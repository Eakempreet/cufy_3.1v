(()=>{var e={};e.id=3,e.ids=[3],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},15617:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>h,originalPathname:()=>x,pages:()=>m,routeModule:()=>u,tree:()=>o});var a=t(73137),l=t(54647),r=t(4183),i=t.n(r),n=t(71775),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(s,c);let d=a.AppPageRouteModule,o=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,78781)),"/home/aman/Desktop/cufy_3.1v-1/app/admin/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,68350)),"/home/aman/Desktop/cufy_3.1v-1/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,51918,23)),"next/dist/client/components/not-found-error"]}],m=["/home/aman/Desktop/cufy_3.1v-1/app/admin/page.tsx"],x="/admin/page",h={require:t,loadChunk:()=>Promise.resolve()},u=new d({definition:{kind:l.x.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},73148:(e,s,t)=>{Promise.resolve().then(t.bind(t,98277))},98277:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>sx});var a=t(60080),l=t(9885),r=t(65345),i=t(37686),n=t(74284),c=t(57114),d=t(77988),o=t(52451),m=t.n(o),x=t(97052),h=t(68384),u=t(24796),p=t(32293),g=t(7589),j=t(56206),b=t(23161);let f=g.fC;g.xz;let N=g.h_;g.x8;let y=l.forwardRef(({className:e,...s},t)=>a.jsx(g.aV,{ref:t,className:(0,b.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s}));y.displayName=g.aV.displayName;let w=l.forwardRef(({className:e,children:s,...t},l)=>(0,a.jsxs)(N,{children:[a.jsx(y,{}),(0,a.jsxs)(g.VY,{ref:l,className:(0,b.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t,children:[s,(0,a.jsxs)(g.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[a.jsx(j.Z,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));w.displayName=g.VY.displayName;let v=({className:e,...s})=>a.jsx("div",{className:(0,b.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...s});v.displayName="DialogHeader";let _=l.forwardRef(({className:e,...s},t)=>a.jsx(g.Dx,{ref:t,className:(0,b.cn)("text-lg font-semibold leading-none tracking-tight",e),...s}));_.displayName=g.Dx.displayName;let C=l.forwardRef(({className:e,...s},t)=>a.jsx(g.dk,{ref:t,className:(0,b.cn)("text-sm text-muted-foreground",e),...s}));C.displayName=g.dk.displayName;var k=t(36392);let S=k.fC,Z=k.xz,A=k.h_,P=l.forwardRef(({className:e,...s},t)=>a.jsx(k.aV,{className:(0,b.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s,ref:t}));P.displayName=k.aV.displayName;let U=l.forwardRef(({className:e,...s},t)=>(0,a.jsxs)(A,{children:[a.jsx(P,{}),a.jsx(k.VY,{ref:t,className:(0,b.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s})]}));U.displayName=k.VY.displayName;let E=({className:e,...s})=>a.jsx("div",{className:(0,b.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...s});E.displayName="AlertDialogHeader";let z=({className:e,...s})=>a.jsx("div",{className:(0,b.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...s});z.displayName="AlertDialogFooter";let D=l.forwardRef(({className:e,...s},t)=>a.jsx(k.Dx,{ref:t,className:(0,b.cn)("text-lg font-semibold",e),...s}));D.displayName=k.Dx.displayName;let T=l.forwardRef(({className:e,...s},t)=>a.jsx(k.dk,{ref:t,className:(0,b.cn)("text-sm text-muted-foreground",e),...s}));T.displayName=k.dk.displayName;let M=l.forwardRef(({className:e,...s},t)=>a.jsx(k.aU,{ref:t,className:(0,b.cn)((0,h.d)(),e),...s}));M.displayName=k.aU.displayName;let R=l.forwardRef(({className:e,...s},t)=>a.jsx(k.$j,{ref:t,className:(0,b.cn)((0,h.d)({variant:"outline"}),"mt-2 sm:mt-0",e),...s}));R.displayName=k.$j.displayName;var L=t(75935),O=t(19458),F=t(4678),$=t(1264);let V=L.fC;L.ZA;let I=L.B4,Y=l.forwardRef(({className:e,children:s,...t},l)=>(0,a.jsxs)(L.xz,{ref:l,className:(0,b.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...t,children:[s,a.jsx(L.JO,{asChild:!0,children:a.jsx(O.Z,{className:"h-4 w-4 opacity-50"})})]}));Y.displayName=L.xz.displayName;let q=l.forwardRef(({className:e,...s},t)=>a.jsx(L.u_,{ref:t,className:(0,b.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:a.jsx(F.Z,{className:"h-4 w-4"})}));q.displayName=L.u_.displayName;let B=l.forwardRef(({className:e,...s},t)=>a.jsx(L.$G,{ref:t,className:(0,b.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:a.jsx(O.Z,{className:"h-4 w-4"})}));B.displayName=L.$G.displayName;let J=l.forwardRef(({className:e,children:s,position:t="popper",...l},r)=>a.jsx(L.h_,{children:(0,a.jsxs)(L.VY,{ref:r,className:(0,b.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...l,children:[a.jsx(q,{}),a.jsx(L.l_,{className:(0,b.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),a.jsx(B,{})]})}));J.displayName=L.VY.displayName;let Q=l.forwardRef(({className:e,...s},t)=>a.jsx(L.__,{ref:t,className:(0,b.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...s}));Q.displayName=L.__.displayName;let G=l.forwardRef(({className:e,children:s,...t},l)=>(0,a.jsxs)(L.ck,{ref:l,className:(0,b.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(L.wU,{children:a.jsx($.Z,{className:"h-4 w-4"})})}),a.jsx(L.eT,{children:s})]}));G.displayName=L.ck.displayName;let H=l.forwardRef(({className:e,...s},t)=>a.jsx(L.Z0,{ref:t,className:(0,b.cn)("-mx-1 my-1 h-px bg-muted",e),...s}));H.displayName=L.Z0.displayName;let W=l.forwardRef(({className:e,type:s,...t},l)=>a.jsx("input",{type:s,className:(0,b.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:l,...t}));W.displayName="Input";let K=l.forwardRef(({className:e,value:s,max:t=100,...l},r)=>a.jsx("div",{ref:r,className:(0,b.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...l,children:a.jsx("div",{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-Math.min(Math.max((s||0)/t*100,0),100)}%)`}})}));K.displayName="Progress";var X=t(20644),ee=t(69518),es=t(34706),et=t(73406),ea=t(74402),el=t(91672),er=t(70696),ei=t(15441),en=t(87371),ec=t(94163),ed=t(52778),eo=t(56305),em=t(22385),ex=t(56254),eh=t(22549),eu=t(96253),ep=t(37631),eg=t(71063);function ej(){let[e,s]=(0,l.useState)([]),[t,n]=(0,l.useState)([]),[c,d]=(0,l.useState)({premiumUsers:0,basicUsers:0,assignedUsers:0,waitingUsers:0,matchedUsers:0}),[o,m]=(0,l.useState)(!0),[p,g]=(0,l.useState)(!1),[j,b]=(0,l.useState)("all"),[N,y]=(0,l.useState)(null),[C,k]=(0,l.useState)(!1),[S,Z]=(0,l.useState)(1),[A,P]=(0,l.useState)(!1),[U,E]=(0,l.useState)(null),[z,D]=(0,l.useState)(""),[T,M]=(0,l.useState)("all"),[R,L]=(0,l.useState)("all"),[O,F]=(0,l.useState)("all"),[$,q]=(0,l.useState)(!1),[B,Q]=(0,l.useState)(""),[H,K]=(0,l.useState)("all"),[eo,em]=(0,l.useState)(""),ex=(0,l.useCallback)(async(e=!1)=>{try{e||p||g(!0);let t=await fetch(`/api/admin/matches?planType=${j}`);if(t.ok){let e=await t.json();s(e.maleUsers||[]),n(e.femaleUsers||[]),d(e.statistics||{premiumUsers:0,basicUsers:0,assignedUsers:0,waitingUsers:0,matchedUsers:0})}else console.error("Failed to fetch matches data")}catch(e){console.error("Error fetching matches data:",e)}finally{m(!1),g(!1)}},[j,p]);(0,l.useEffect)(()=>{ex()},[ex]),(0,l.useEffect)(()=>{o||ex(!0)},[j]);let eh=(0,l.useMemo)(()=>e.filter(e=>(!z||!!e.full_name.toLowerCase().includes(z.toLowerCase())||!!e.email.toLowerCase().includes(z.toLowerCase())||!!e.university.toLowerCase().includes(z.toLowerCase()))&&("all"===R||e.subscription_type===R)&&("all"===T||e.status===T)&&("all"===O||("has_assignments"!==O||0!==e.assignedCount)&&("no_assignments"!==O||!(e.assignedCount>0))&&("full_assignments"!==O||!(e.assignedCount<e.maxAssignments))&&("partial_assignments"!==O||0!==e.assignedCount&&!(e.assignedCount>=e.maxAssignments)))&&("all"===H||e.university===H)),[e,z,R,T,O,H]),eu=(0,l.useMemo)(()=>t.filter(e=>!!(!B||e.full_name.toLowerCase().includes(B.toLowerCase())||e.email.toLowerCase().includes(B.toLowerCase())||e.university.toLowerCase().includes(B.toLowerCase()))&&("all"===H||e.university===H)),[t,B,H]),ep=(0,l.useMemo)(()=>{let s=[...e,...t].map(e=>e.university);return Array.from(new Set(s)).sort()},[e,t]),eg=async(e,s)=>{try{P(!0);let t=await fetch("/api/admin/matches",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"assign_profile",maleUserId:e,femaleUserId:s,data:{round:1}})}),a=await t.json();a.success?(await ex(!0),k(!1),alert("Profile assigned successfully!")):alert(a.error||"Failed to assign profile")}catch(e){console.error("Error assigning profile:",e),alert("An error occurred while assigning profile")}finally{P(!1)}},ej=async(e,s,t)=>{try{E(`${e}-${s}`);let a=await fetch("/api/admin/matches",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:e,maleUserId:s,femaleUserId:t})}),l=await a.json();l.success?(await ex(!0),alert(l.message||"Action completed successfully!")):alert(l.error||"Action failed")}catch(s){console.error(`Error performing ${e}:`,s),alert("An error occurred while performing action")}finally{E(null)}},eN=(e,s)=>{y(e),Z(s),em(""),k(!0)},ey=e=>{let s=e.assignments.map(e=>e.female_user_id),t=e.assignments.filter(e=>"disengaged"===e.status).map(e=>e.female_user_id);return eu.filter(e=>!(s.includes(e.id)||t.includes(e.id))&&(!eo||!!e.full_name.toLowerCase().includes(eo.toLowerCase())||!!e.email.toLowerCase().includes(eo.toLowerCase())||!!e.university.toLowerCase().includes(eo.toLowerCase())||!!e.bio.toLowerCase().includes(eo.toLowerCase())))};return o?a.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:(0,a.jsxs)(r.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-gray-600 border-t-white rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-white text-lg font-medium",children:"Loading Matches Panel..."})]})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Matches Management"}),a.jsx("p",{className:"text-gray-400",children:"Assign and manage profile matches for premium and basic users"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)(V,{value:j,onValueChange:e=>b(e),children:[a.jsx(Y,{className:"w-48 bg-white/5 border-white/20 text-white",children:a.jsx(I,{})}),(0,a.jsxs)(J,{children:[a.jsx(G,{value:"all",children:"All Plans"}),a.jsx(G,{value:"premium",children:"Premium (₹249)"}),a.jsx(G,{value:"basic",children:"Basic (₹99)"})]})]}),(0,a.jsxs)(h.z,{onClick:()=>ex(!0),disabled:p,variant:"outline",className:"border-white/20 text-white hover:bg-white/10",children:[a.jsx(X.Z,{className:`h-4 w-4 mr-2 ${p?"animate-spin":""}`}),"Refresh"]})]})]}),a.jsx(x.Zb,{className:"bg-black/40 backdrop-blur-xl border-white/10",children:a.jsx(x.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[a.jsx(ee.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx(W,{placeholder:"Search male users by name, email, or university...",value:z,onChange:e=>D(e.target.value),className:"pl-10 bg-white/5 border-white/20 text-white placeholder-gray-400"}),z&&a.jsx("button",{onClick:()=>D(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white",children:a.jsx(es.Z,{className:"h-4 w-4"})})]}),(0,a.jsxs)(h.z,{onClick:()=>q(!$),variant:"outline",className:"border-white/20 text-white hover:bg-white/10",children:[a.jsx(et.Z,{className:"h-4 w-4 mr-2"}),"Filters",("all"!==T||"all"!==R||"all"!==O||"all"!==H)&&a.jsx(u.C,{className:"ml-2 bg-blue-500/20 text-blue-400 border-blue-500/50",children:"Active"})]}),(z||"all"!==T||"all"!==R||"all"!==O||"all"!==H||B||eo)&&(0,a.jsxs)(h.z,{onClick:()=>{D(""),Q(""),M("all"),L("all"),F("all"),K("all"),em("")},variant:"outline",size:"sm",className:"border-red-500/50 text-red-400 hover:bg-red-500/10",children:[a.jsx(es.Z,{className:"h-4 w-4 mr-2"}),"Clear All"]})]}),a.jsx(i.M,{children:$&&(0,a.jsxs)(r.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4 border-t border-white/10 pt-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-400 mb-2 block",children:"Status"}),(0,a.jsxs)(V,{value:T,onValueChange:M,children:[a.jsx(Y,{className:"bg-white/5 border-white/20 text-white",children:a.jsx(I,{})}),(0,a.jsxs)(J,{children:[a.jsx(G,{value:"all",children:"All Statuses"}),a.jsx(G,{value:"waiting",children:"Waiting"}),a.jsx(G,{value:"assigned",children:"Assigned"}),a.jsx(G,{value:"temporary_match",children:"Temporary Match"}),a.jsx(G,{value:"permanently_matched",children:"Permanently Matched"})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-400 mb-2 block",children:"Subscription"}),(0,a.jsxs)(V,{value:R,onValueChange:L,children:[a.jsx(Y,{className:"bg-white/5 border-white/20 text-white",children:a.jsx(I,{})}),(0,a.jsxs)(J,{children:[a.jsx(G,{value:"all",children:"All Plans"}),a.jsx(G,{value:"premium",children:"Premium (₹249)"}),a.jsx(G,{value:"basic",children:"Basic (₹99)"})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-400 mb-2 block",children:"Assignments"}),(0,a.jsxs)(V,{value:O,onValueChange:F,children:[a.jsx(Y,{className:"bg-white/5 border-white/20 text-white",children:a.jsx(I,{})}),(0,a.jsxs)(J,{children:[a.jsx(G,{value:"all",children:"All Assignment States"}),a.jsx(G,{value:"no_assignments",children:"No Assignments"}),a.jsx(G,{value:"partial_assignments",children:"Partial Assignments"}),a.jsx(G,{value:"full_assignments",children:"Full Assignments"}),a.jsx(G,{value:"has_assignments",children:"Has Assignments"})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-400 mb-2 block",children:"University"}),(0,a.jsxs)(V,{value:H,onValueChange:K,children:[a.jsx(Y,{className:"bg-white/5 border-white/20 text-white",children:a.jsx(I,{})}),(0,a.jsxs)(J,{children:[a.jsx(G,{value:"all",children:"All Universities"}),ep.map(e=>a.jsx(G,{value:e,children:e},e))]})]})]})]}),(0,a.jsxs)("div",{className:"border-t border-white/10 pt-4",children:[a.jsx("label",{className:"text-sm text-gray-400 mb-2 block",children:"Search Female Users (for assignment)"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx(ee.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx(W,{placeholder:"Search female users by name, email, or university...",value:B,onChange:e=>Q(e.target.value),className:"pl-10 bg-white/5 border-white/20 text-white placeholder-gray-400"}),B&&a.jsx("button",{onClick:()=>Q(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white",children:a.jsx(es.Z,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between bg-white/5 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-300",children:["Showing ",a.jsx("span",{className:"text-white font-medium",children:eh.length})," of ",a.jsx("span",{className:"text-white font-medium",children:e.length})," male users",eu.length!==t.length&&(0,a.jsxs)("span",{className:"ml-2",children:["• ",a.jsx("span",{className:"text-white font-medium",children:eu.length})," of ",a.jsx("span",{className:"text-white font-medium",children:t.length})," female users"]})]}),(z||"all"!==T||"all"!==R||"all"!==O||"all"!==H||B||eo)&&a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx(u.C,{className:"bg-blue-500/20 text-blue-400 border-blue-500/50",children:"Filters Active"})})]})]})})]})})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[a.jsx(x.Zb,{className:"bg-black/40 backdrop-blur-xl border-white/10",children:a.jsx(x.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"Premium Users"}),a.jsx("p",{className:"text-2xl font-bold text-purple-400 mt-1",children:c.premiumUsers})]}),a.jsx(ea.Z,{className:"h-8 w-8 text-purple-400/60"})]})})}),a.jsx(x.Zb,{className:"bg-black/40 backdrop-blur-xl border-white/10",children:a.jsx(x.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"Basic Users"}),a.jsx("p",{className:"text-2xl font-bold text-blue-400 mt-1",children:c.basicUsers})]}),a.jsx(el.Z,{className:"h-8 w-8 text-blue-400/60"})]})})}),a.jsx(x.Zb,{className:"bg-black/40 backdrop-blur-xl border-white/10",children:a.jsx(x.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"Assigned Users"}),a.jsx("p",{className:"text-2xl font-bold text-green-400 mt-1",children:c.assignedUsers})]}),a.jsx(er.Z,{className:"h-8 w-8 text-green-400/60"})]})})}),a.jsx(x.Zb,{className:"bg-black/40 backdrop-blur-xl border-white/10",children:a.jsx(x.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"Waiting Users"}),a.jsx("p",{className:"text-2xl font-bold text-yellow-400 mt-1",children:c.waitingUsers})]}),a.jsx(ei.Z,{className:"h-8 w-8 text-yellow-400/60"})]})})}),a.jsx(x.Zb,{className:"bg-black/40 backdrop-blur-xl border-white/10",children:a.jsx(x.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"Matched Users"}),a.jsx("p",{className:"text-2xl font-bold text-pink-400 mt-1",children:c.matchedUsers})]}),a.jsx(en.Z,{className:"h-8 w-8 text-pink-400/60"})]})})})]}),("all"===j||"premium"===j)&&(0,a.jsxs)(x.Zb,{className:"bg-black/40 backdrop-blur-xl border-white/10",children:[(0,a.jsxs)(x.Ol,{children:[(0,a.jsxs)(x.ll,{className:"text-white flex items-center",children:[a.jsx(ea.Z,{className:"h-6 w-6 mr-3 text-purple-400"}),"Premium Users (₹249) - ",eh.filter(e=>"premium"===e.subscription_type).length,(0,a.jsxs)("div",{className:"ml-4 space-x-2",children:[a.jsx(u.C,{className:"bg-purple-500/20 text-purple-400 border-purple-500/50",children:"Round 1: 2 Options"}),a.jsx(u.C,{className:"bg-purple-600/20 text-purple-300 border-purple-600/50",children:"Round 2: 3 Options"})]})]}),a.jsx("div",{className:"text-gray-400 text-sm mt-2",children:"\uD83D\uDCCB Premium users get 2 profiles in Round 1, then 3 profiles in Round 2. \uD83C\uDFAF User selects 1 profile → 48hr timer starts → Other profiles hidden. ⚠️ Disengage option available with warning."})]}),a.jsx(x.aY,{children:a.jsx(eb,{users:eh.filter(e=>"premium"===e.subscription_type),onAssignProfile:eN,onUserAction:ej,actionLoading:U})})]}),("all"===j||"basic"===j)&&(0,a.jsxs)(x.Zb,{className:"bg-black/40 backdrop-blur-xl border-white/10",children:[(0,a.jsxs)(x.Ol,{children:[(0,a.jsxs)(x.ll,{className:"text-white flex items-center",children:[a.jsx(el.Z,{className:"h-6 w-6 mr-3 text-blue-400"}),"Basic Users (₹99) - ",eh.filter(e=>"basic"===e.subscription_type).length,(0,a.jsxs)("div",{className:"ml-4 space-x-2",children:[a.jsx(u.C,{className:"bg-blue-500/20 text-blue-400 border-blue-500/50",children:"Round 1: 1 Option"}),a.jsx(u.C,{className:"bg-blue-600/20 text-blue-300 border-blue-600/50",children:"Round 2: 1 Option"})]})]}),a.jsx("div",{className:"text-gray-400 text-sm mt-2",children:"\uD83D\uDCCB Basic users get 1 profile per round. \uD83C\uDFAF User selects profile → 48hr timer starts. ⚠️ Disengage option available with warning."})]}),a.jsx(x.aY,{children:a.jsx(ef,{users:eh.filter(e=>"basic"===e.subscription_type),onAssignProfile:eN,onUserAction:ej,actionLoading:U})})]}),a.jsx(f,{open:C,onOpenChange:k,children:(0,a.jsxs)(w,{className:"max-w-6xl max-h-[90vh] bg-gray-900/95 backdrop-blur-xl border border-gray-700 overflow-y-auto",children:[(0,a.jsxs)(v,{children:[(0,a.jsxs)(_,{className:"text-xl font-bold text-white flex items-center space-x-2",children:[a.jsx(er.Z,{className:"h-5 w-5 text-blue-400"}),(0,a.jsxs)("span",{children:["Assign Female Profile - Slot ",S]})]}),N&&(0,a.jsxs)("div",{className:"text-gray-400 text-sm",children:["Assigning to: ",N.full_name," (",N.subscription_type," plan)"]})]}),N&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[a.jsx(ee.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx(W,{placeholder:"Search female profiles by name, email, university, or bio...",value:eo,onChange:e=>em(e.target.value),className:"pl-10 bg-white/5 border-white/20 text-white placeholder-gray-400"}),eo&&a.jsx("button",{onClick:()=>em(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white",children:a.jsx(es.Z,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-300",children:[a.jsx("span",{className:"text-white font-medium",children:ey(N).length}),eo?" matching profiles":" available profiles"]})]}),eo&&0===ey(N).length&&a.jsx("div",{className:"mt-3 p-3 bg-yellow-500/10 border border-yellow-500/20 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(ec.Z,{className:"h-4 w-4 text-yellow-400 mr-2"}),a.jsx("span",{className:"text-yellow-300 text-sm",children:"No profiles match your search. Try different keywords or clear the search."})]})}),eo&&a.jsx("div",{className:"mt-2 text-xs text-gray-400",children:"\uD83D\uDCA1 Tip: Search by name, university, interests in bio, or any keyword"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-96 overflow-y-auto",children:ey(N).map(e=>a.jsx(eC,{female:e,onAssign:()=>eg(N.id,e.id),loading:A},e.id))}),0===ey(N).length&&!eo&&(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx(ed.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),a.jsx("p",{className:"text-white font-medium",children:"No available female profiles"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"All female profiles have been assigned or disengaged by this user"})]})]})]})})]})}function eb({users:e,onAssignProfile:s,onUserAction:t,actionLoading:l}){return(0,a.jsxs)("div",{className:"overflow-x-auto",children:[(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-white/5 border-b border-white/10",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"text-left p-4 text-white font-medium",children:"User Details"}),a.jsx("th",{className:"text-left p-4 text-white font-medium",children:"Round Info"}),a.jsx("th",{className:"text-left p-4 text-white font-medium",children:"Assign Slot 1"}),a.jsx("th",{className:"text-left p-4 text-white font-medium",children:"Assign Slot 2"}),a.jsx("th",{className:"text-left p-4 text-white font-medium",children:"Assign Slot 3"}),a.jsx("th",{className:"text-left p-4 text-white font-medium",children:"Selected/Timer"}),a.jsx("th",{className:"text-left p-4 text-white font-medium",children:"Status"}),a.jsx("th",{className:"text-left p-4 text-white font-medium",children:"Actions"})]})}),a.jsx("tbody",{children:e.map((e,r)=>(0,a.jsxs)("tr",{className:"border-b border-white/5 hover:bg-white/5",children:[a.jsx("td",{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"text-white text-sm font-medium",children:r+1}),(0,a.jsxs)(p.qE,{className:"h-12 w-12",children:[a.jsx(p.F$,{src:e.profile_photo}),a.jsx(p.Q5,{children:e.full_name.charAt(0)})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-white font-medium",children:e.full_name}),a.jsx("p",{className:"text-gray-400 text-sm",children:e.email}),a.jsx("p",{className:"text-gray-400 text-xs",children:e.university}),a.jsx("div",{className:"flex items-center space-x-2 mt-1",children:(0,a.jsxs)(u.C,{className:"bg-purple-500/20 text-purple-400 border-purple-500/50 text-xs",children:[a.jsx(ea.Z,{className:"h-2 w-2 mr-1"}),"Premium"]})})]})]})}),a.jsx("td",{className:"p-4",children:a.jsx(eN,{user:e})}),1===e.current_round?(0,a.jsxs)(a.Fragment,{children:[[1,2].map(r=>a.jsx("td",{className:"p-4",children:a.jsx(ey,{user:e,slot:r,onAssign:()=>s(e,r),onAction:t,actionLoading:l})},r)),a.jsx("td",{className:"p-4",children:a.jsx("span",{className:"text-gray-400 text-sm",children:"Round 2 Slot"})})]}):a.jsx(a.Fragment,{children:[1,2,3].map(r=>a.jsx("td",{className:"p-4",children:a.jsx(ey,{user:e,slot:r,onAssign:()=>s(e,r),onAction:t,actionLoading:l})},r))}),a.jsx("td",{className:"p-4",children:a.jsx(ew,{user:e,onUserAction:t,actionLoading:l})}),a.jsx("td",{className:"p-4",children:a.jsx(ev,{user:e})}),a.jsx("td",{className:"p-4",children:a.jsx(e_,{user:e,onAction:t,actionLoading:l})})]},e.id))})]}),0===e.length&&(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx(ea.Z,{className:"h-12 w-12 text-purple-400 mx-auto mb-3"}),a.jsx("p",{className:"text-white font-medium",children:"No premium users found"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Premium users will appear here once they confirm payment"})]})]})}function ef({users:e,onAssignProfile:s,onUserAction:t,actionLoading:l}){return(0,a.jsxs)("div",{className:"overflow-x-auto",children:[(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-white/5 border-b border-white/10",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"text-left p-4 text-white font-medium",children:"User Details"}),a.jsx("th",{className:"text-left p-4 text-white font-medium",children:"Round Info"}),a.jsx("th",{className:"text-left p-4 text-white font-medium",children:"Assign Slot"}),a.jsx("th",{className:"text-left p-4 text-white font-medium",children:"Selected/Timer"}),a.jsx("th",{className:"text-left p-4 text-white font-medium",children:"Status"}),a.jsx("th",{className:"text-left p-4 text-white font-medium",children:"Actions"})]})}),a.jsx("tbody",{children:e.map((e,r)=>(0,a.jsxs)("tr",{className:"border-b border-white/5 hover:bg-white/5",children:[a.jsx("td",{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"text-white text-sm font-medium",children:r+1}),(0,a.jsxs)(p.qE,{className:"h-12 w-12",children:[a.jsx(p.F$,{src:e.profile_photo}),a.jsx(p.Q5,{children:e.full_name.charAt(0)})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-white font-medium",children:e.full_name}),a.jsx("p",{className:"text-gray-400 text-sm",children:e.email}),a.jsx("p",{className:"text-gray-400 text-xs",children:e.university}),a.jsx("div",{className:"flex items-center space-x-2 mt-1",children:(0,a.jsxs)(u.C,{className:"bg-blue-500/20 text-blue-400 border-blue-500/50 text-xs",children:[a.jsx(el.Z,{className:"h-2 w-2 mr-1"}),"Basic"]})})]})]})}),a.jsx("td",{className:"p-4",children:a.jsx(eN,{user:e})}),a.jsx("td",{className:"p-4",children:a.jsx(ey,{user:e,slot:1,onAssign:()=>s(e,1),onAction:t,actionLoading:l})}),a.jsx("td",{className:"p-4",children:a.jsx(ew,{user:e,onUserAction:t,actionLoading:l})}),a.jsx("td",{className:"p-4",children:a.jsx(ev,{user:e})}),a.jsx("td",{className:"p-4",children:a.jsx(e_,{user:e,onAction:t,actionLoading:l})})]},e.id))})]}),0===e.length&&(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx(el.Z,{className:"h-12 w-12 text-blue-400 mx-auto mb-3"}),a.jsx("p",{className:"text-white font-medium",children:"No basic users found"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Basic users will appear here once they confirm payment"})]})]})}function eN({user:e}){return(()=>{let s="premium"===e.subscription_type?1===e.current_round?2:3:1;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(u.C,{className:`text-xs ${1===e.current_round?"bg-blue-500/20 text-blue-400 border-blue-500/50":"bg-green-500/20 text-green-400 border-green-500/50"}`,children:["Round ",e.current_round]}),(0,a.jsxs)(u.C,{className:"bg-gray-500/20 text-gray-400 border-gray-500/50 text-xs",children:["Max ",s]})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:["R1: ",e.round_1_completed?"✅":"⏳"," | R2: ",e.round_2_completed?"✅":2===e.current_round?"⏳":"⭕"]}),e.roundInfo.canProgressToRound2&&a.jsx("div",{className:"text-xs text-yellow-400",children:"\uD83D\uDD04 Can progress to R2"})]})})()}function ey({user:e,slot:s,onAssign:t,onAction:l,actionLoading:r}){let i=e.assignments.filter(s=>s.round_number===e.current_round&&"assigned"===s.status),n=i[s-1];return e.selectedAssignment&&e.hasActiveTimer?e.selectedAssignment.id===n?.id?(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse"}),(0,a.jsxs)(p.qE,{className:"h-8 w-8",children:[a.jsx(p.F$,{src:e.selectedAssignment.female_user?.profile_photo}),a.jsx(p.Q5,{children:"S"})]}),(0,a.jsxs)("div",{className:"text-xs",children:[a.jsx("div",{className:"text-yellow-400 font-medium",children:"Selected"}),a.jsx("div",{className:"text-gray-400",children:"Timer Active"})]})]}):a.jsx("div",{className:"text-xs text-gray-500",children:"Hidden (Timer active)"}):n?(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(p.qE,{className:"h-8 w-8",children:[a.jsx(p.F$,{src:n.female_user?.profile_photo}),a.jsx(p.Q5,{children:"F"})]}),(0,a.jsxs)(h.z,{onClick:()=>l("select_profile",e.id,n.female_user_id),disabled:r===`select_profile-${e.id}`||e.hasActiveTimer,variant:"outline",size:"sm",className:"border-green-500 text-green-400 hover:bg-green-500/10",children:[a.jsx(eo.Z,{className:"h-3 w-3 mr-1"}),"Select"]})]}):e.availableSlots>0&&s<=e.maxAssignments?(0,a.jsxs)(h.z,{onClick:t,variant:"outline",size:"sm",className:"border-blue-500 text-blue-400 hover:bg-blue-500/10",disabled:e.hasActiveTimer,children:[a.jsx(em.Z,{className:"h-3 w-3 mr-1"}),"Assign"]}):a.jsx("span",{className:"text-gray-400 text-sm",children:s>e.maxAssignments?"N/A":"Empty"})}function ew({user:e,onUserAction:s,actionLoading:t}){let[r,i]=(0,l.useState)("");return((0,l.useEffect)(()=>{if(e.hasActiveTimer&&e.decisionExpiresAt){let s=setInterval(()=>{let t=new Date().getTime(),a=new Date(e.decisionExpiresAt).getTime(),l=a-t;l>0?i(`${Math.floor(l/36e5)}h ${Math.floor(l%36e5/6e4)}m ${Math.floor(l%6e4/1e3)}s`):(i("EXPIRED"),clearInterval(s))},1e3);return()=>clearInterval(s)}},[e.hasActiveTimer,e.decisionExpiresAt]),e.permanentMatch)?(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(p.qE,{className:"h-8 w-8",children:[a.jsx(p.F$,{src:e.permanentMatch.female_user?.profile_photo}),a.jsx(p.Q5,{children:"M"})]}),(0,a.jsxs)(u.C,{className:"bg-pink-500/20 text-pink-400 border-pink-500/50",children:[a.jsx(en.Z,{className:"h-2 w-2 mr-1"}),"Matched"]})]}):e.currentTempMatch?a.jsx("div",{className:"space-y-2",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(p.qE,{className:"h-8 w-8",children:[a.jsx(p.F$,{src:e.currentTempMatch.female_user?.profile_photo}),a.jsx(p.Q5,{children:"T"})]}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("div",{className:"text-white text-sm font-medium",children:e.currentTempMatch.female_user?.full_name}),(0,a.jsxs)(u.C,{className:"bg-green-500/20 text-green-400 border-green-500/50 text-xs",children:[a.jsx(ex.Z,{className:"h-2 w-2 mr-1"}),"Auto Match Process"]})]})]})}):e.selectedAssignment&&e.hasActiveTimer?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(p.qE,{className:"h-10 w-10",children:[a.jsx(p.F$,{src:e.selectedAssignment.female_user?.profile_photo}),a.jsx(p.Q5,{children:"S"})]}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("div",{className:"text-white text-sm font-medium",children:e.selectedAssignment.female_user?.full_name}),(0,a.jsxs)(u.C,{className:"bg-yellow-500/20 text-yellow-400 border-yellow-500/50 text-xs",children:[a.jsx(ex.Z,{className:"h-2 w-2 mr-1"}),"Decision Timer Active"]})]})]}),(0,a.jsxs)("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Timer: Auto-confirm if no disengage"}),a.jsx("div",{className:"text-yellow-300 text-sm font-mono",children:r})]}),a.jsx(K,{value:e.timeRemaining?Math.max(0,e.timeRemaining/1728e5*100):0,className:"h-2"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)(h.z,{onClick:()=>s("confirm_match",e.id,e.selectedAssignment.female_user_id),disabled:t===`confirm_match-${e.id}`,size:"sm",className:"bg-green-600 hover:bg-green-700 text-white text-xs",children:[a.jsx(en.Z,{className:"h-3 w-3 mr-1"}),"Confirm Match"]}),(0,a.jsxs)(S,{children:[a.jsx(Z,{asChild:!0,children:(0,a.jsxs)(h.z,{variant:"outline",size:"sm",className:"border-red-500 text-red-400 hover:bg-red-500/10 text-xs",children:[a.jsx(ed.Z,{className:"h-3 w-3 mr-1"}),"Disengage"]})}),(0,a.jsxs)(U,{className:"bg-gray-900 border-gray-700",children:[(0,a.jsxs)(E,{children:[a.jsx(D,{className:"text-white",children:"⚠️ Confirm Disengagement"}),a.jsx(T,{className:"text-gray-400",children:"Are you sure you want to disengage? This will stop the timer and show other profiles again."})]}),(0,a.jsxs)(z,{children:[a.jsx(R,{className:"border-white/20 text-white hover:bg-white/10",children:"Cancel"}),a.jsx(M,{onClick:()=>s("disengage_profile",e.id,e.selectedAssignment.female_user_id),className:"bg-red-600 hover:bg-red-700",children:"Yes, Disengage"})]})]})]})]})]}):a.jsx("span",{className:"text-gray-400 text-sm",children:"No selection"})}function ev({user:e}){return(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)(u.C,{className:(e=>{switch(e){case"permanently_matched":return"bg-pink-500/20 text-pink-400 border-pink-500/50";case"temporary_match":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/50";case"deciding":return"bg-orange-500/20 text-orange-400 border-orange-500/50";case"assigned":return"bg-green-500/20 text-green-400 border-green-500/50";default:return"bg-gray-500/20 text-gray-400 border-gray-500/50"}})(e.status),children:[(e=>{switch(e){case"permanently_matched":return a.jsx(en.Z,{className:"h-3 w-3 mr-1"});case"temporary_match":return a.jsx(ex.Z,{className:"h-3 w-3 mr-1"});case"deciding":return a.jsx(eh.Z,{className:"h-3 w-3 mr-1"});case"assigned":return a.jsx(eu.Z,{className:"h-3 w-3 mr-1"});case"waiting":return a.jsx(ei.Z,{className:"h-3 w-3 mr-1"});default:return a.jsx(ec.Z,{className:"h-3 w-3 mr-1"})}})(e.status),(e=>{switch(e){case"permanently_matched":return"Permanently Matched";case"temporary_match":return"Temporary Match";case"deciding":return"Making Decision";case"assigned":return"Has Assignments";case"waiting":return"Waiting for Assignment";default:return"Unknown Status"}})(e.status)]}),e.hasActiveTimer&&e.decisionExpiresAt&&(0,a.jsxs)("div",{className:"text-xs text-yellow-400",children:[a.jsx(ex.Z,{className:"h-3 w-3 inline mr-1"}),"Expires: ",new Date(e.decisionExpiresAt).toLocaleString()]}),(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:[e.assignedCount,"/",e.maxAssignments," assigned"]})]})}function e_({user:e,onAction:s,actionLoading:t}){return(0,a.jsxs)("div",{className:"flex flex-col space-y-2",children:[e.roundInfo.canProgressToRound2&&(0,a.jsxs)(h.z,{onClick:()=>s("progress_to_round_2",e.id),disabled:t===`progress_to_round_2-${e.id}`,variant:"outline",size:"sm",className:"border-blue-500 text-blue-400 hover:bg-blue-500/10",children:[a.jsx(ep.Z,{className:"h-3 w-3 mr-1"}),"Round 2"]}),e.currentTempMatch&&!e.hasActiveTimer&&(0,a.jsxs)(h.z,{onClick:()=>s("confirm_match",e.id,e.currentTempMatch.female_user_id),disabled:t===`confirm_match-${e.id}`,variant:"outline",size:"sm",className:"border-pink-500 text-pink-400 hover:bg-pink-500/10",children:[a.jsx(en.Z,{className:"h-3 w-3 mr-1"}),"Confirm"]}),(0,a.jsxs)(S,{children:[a.jsx(Z,{asChild:!0,children:(0,a.jsxs)(h.z,{variant:"outline",size:"sm",className:"border-red-500 text-red-400 hover:bg-red-500/10",children:[a.jsx(eg.Z,{className:"h-3 w-3 mr-1"}),"Reset"]})}),(0,a.jsxs)(U,{className:"bg-gray-900 border-gray-700",children:[(0,a.jsxs)(E,{children:[a.jsx(D,{className:"text-white",children:"Reset User History"}),a.jsx(T,{className:"text-gray-400",children:"This will permanently delete all assignments, matches, and reset the user to Round 1. This action cannot be undone."})]}),(0,a.jsxs)(z,{children:[a.jsx(R,{className:"border-white/20 text-white hover:bg-white/10",children:"Cancel"}),a.jsx(M,{onClick:()=>s("clear_history",e.id),className:"bg-red-600 hover:bg-red-700",children:"Reset User"})]})]})]})]})}function eC({female:e,onAssign:s,loading:t}){return(0,a.jsxs)(r.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white/5 border border-white/10 rounded-lg p-4 hover:border-white/20 transition-all duration-300",children:[(0,a.jsxs)("div",{className:"text-center mb-4",children:[(0,a.jsxs)(p.qE,{className:"h-16 w-16 mx-auto mb-3",children:[a.jsx(p.F$,{src:e.profile_photo}),a.jsx(p.Q5,{children:e.full_name.charAt(0)})]}),a.jsx("h3",{className:"text-white font-medium",children:e.full_name}),(0,a.jsxs)("p",{className:"text-gray-400 text-sm",children:[e.age," years"]}),a.jsx("p",{className:"text-gray-400 text-xs",children:e.university})]}),(0,a.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[a.jsx("span",{className:"text-gray-400",children:"Currently Assigned:"}),a.jsx(u.C,{className:"bg-blue-500/20 text-blue-400 border-blue-500/50",children:e.currentlyAssignedCount})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[a.jsx("span",{className:"text-gray-400",children:"Selected Count:"}),a.jsx(u.C,{className:"bg-yellow-500/20 text-yellow-400 border-yellow-500/50",children:e.selectedCount})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[a.jsx("span",{className:"text-gray-400",children:"Permanent Matches:"}),a.jsx(u.C,{className:"bg-pink-500/20 text-pink-400 border-pink-500/50",children:e.permanentMatchCount})]})]}),(0,a.jsxs)(h.z,{onClick:s,disabled:t,className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:[t?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):a.jsx(em.Z,{className:"h-4 w-4 mr-2"}),t?"Assigning...":"Assign Profile"]})]})}var ek=t(17111),eS=t(28598),eZ=t(34516),eA=t(21091),eP=t(5311),eU=t(7652),eE=t(44901),ez=t(89815),eD=t(82875),eT=t(71725),eM=t(42673),eR=t(79803),eL=t(78260),eO=t(5987),eF=t(39546),e$=t(22388),eV=t(65688),eI=t(12029),eY=t(53488),eq=t(28200),eB=t(1611),eJ=t(26303),eQ=t(66908),eG=t(85335),eH=t(40834),eW=t(93680),eK=t(59490),eX=t(16920),e0=t(78937),e4=t(14571),e5=t(54278),e1=t(517),e2=t(38724),e3=t(34010),e8=t(52995),e6=t(6827),e9=t(95866),e7=t(85574);let se=e=>{if(!e)return null;if(e.startsWith("http")||e.startsWith("https"))return e;let{data:s}=d.O.storage.from("payment-proofs").getPublicUrl(e);return s.publicUrl};function ss(){let{data:e}=(0,n.useSession)(),s=(0,c.useRouter)(),[t,i]=(0,l.useState)([]),[d,o]=(0,l.useState)(!0),[x,h]=(0,l.useState)(!1),[u,p]=(0,l.useState)(""),[g,j]=(0,l.useState)(""),[b,N]=(0,l.useState)({gender:"all",status:"all",verification:"all",subscription:"all",payment:"all",university:"",age_range:{min:18,max:30},date_range:{start:"",end:""},sort_by:"created_at",sort_order:"desc"}),[y,C]=(0,l.useState)("users"),[k,S]=(0,l.useState)(null),[Z,A]=(0,l.useState)(!1),[P,U]=(0,l.useState)(!1),[E,z]=(0,l.useState)(!1),[D,T]=(0,l.useState)(null),[M,R]=(0,l.useState)(null),[L,O]=(0,l.useState)(new Set),[F,$]=(0,l.useState)("table"),[V,I]=(0,l.useState)(!1),[Y,q]=(0,l.useState)(!1),[B,J]=(0,l.useState)(null),[Q,G]=(0,l.useState)(1),[H,W]=(0,l.useState)(25),[K,ee]=(0,l.useState)(0),[es,et]=(0,l.useState)([]),[ea,er]=(0,l.useState)(""),[ei,ec]=(0,l.useState)("system"),[ed,eo]=(0,l.useState)(!1),[em,ex]=(0,l.useState)(null),[eh,eu]=(0,l.useState)(""),[ep,eg]=(0,l.useState)(!0),[eb,ef]=(0,l.useState)(!1),[eN,ey]=(0,l.useState)(!1),[ew,ev]=(0,l.useState)(null),[e_,eC]=(0,l.useState)(0),[eS,eA]=(0,l.useState)(!0);(0,l.useEffect)(()=>{let e=setTimeout(()=>{d&&(console.warn("Loading timeout reached, forcing loading to false"),o(!1))},1e4);return()=>clearTimeout(e)},[d]);let eP=(0,l.useCallback)(async(e=!1)=>{try{let s=Date.now();if(!e&&e_&&s-e_<12e4&&t.length>0){console.log("Using cached data, skipping fetch");return}let a=new URLSearchParams;a.append("page",Q.toString()),a.append("limit",H.toString()),a.append("search",g),Object.entries(b).forEach(([e,s])=>{"string"==typeof s&&s?a.append(e,s):"object"==typeof s&&null!==s&&a.append(e,JSON.stringify(s))});let l=await fetch(`/api/admin/users?${a}`);if(l.ok){let e=await l.json();i(e.users||[]),ee(e.total||0),ev(new Date),eC(s),console.log("Data fetched successfully at",new Date().toLocaleTimeString())}else throw console.error("Failed to fetch users:",l.status,l.statusText),Error(`API responded with ${l.status}`)}catch(e){console.error("Error fetching users:",e),i([]),ee(0)}},[Q,H,g,b,e_,t.length]),eU=(0,l.useCallback)(async(e=!1)=>eP(e),[eP]);(0,l.useCallback)(async()=>{try{let e=await fetch("/api/admin/system-settings");if(e.ok){let s=await e.json();s.success&&(eg(s.settings.boys_registration_enabled),ef(s.settings.maintenance_mode))}else console.error("Failed to fetch system settings:",e.status)}catch(e){console.error("Error fetching system settings:",e),eg(!0),ef(!1)}},[]);let eI=(0,l.useCallback)(async()=>{h(!0);try{await eU(!0)}finally{h(!1)}},[eU]),eY=(0,l.useCallback)(async()=>{console.log("Initializing admin panel..."),o(!0);try{console.log("Starting parallel fetch operations...");try{let e=await fetch("/api/admin/system-settings");if(e.ok){let s=await e.json();s.success&&(eg(s.settings.boys_registration_enabled),ef(s.settings.maintenance_mode))}}catch(e){console.error("Error fetching system settings:",e)}try{let e=await fetch("/api/admin/users?page=1&limit=10");if(e.ok){let s=await e.json();i(s.users||[]),ee(s.total||0),ev(new Date),eC(Date.now())}}catch(e){console.error("Error fetching users:",e),i([]),ee(0)}console.log("Admin panel initialization completed successfully")}catch(e){console.error("Failed to initialize admin panel:",e)}finally{o(!1),console.log("Loading state cleared")}},[]);(0,l.useEffect)(()=>{if(console.log("Session check running:",{session:e?.user?.email}),!e?.user?.email){console.log("No session found, redirecting to login"),s.push("/");return}if("cufy.online@gmail.com"!==e.user.email){console.log("Not admin user, redirecting to dashboard"),s.push("/dashboard");return}console.log("Admin user confirmed, initializing panel"),eY()},[e,s,eY]),(0,l.useEffect)(()=>{let e=setTimeout(()=>{j(u),G(1)},1200);return()=>clearTimeout(e)},[u]);let eq=async e=>{try{let s=await fetch(`/api/admin/notes?user_id=${e}`);if(s.ok){let e=await s.json();et(e)}}catch(e){console.error("Error fetching admin notes:",e)}},eB=async(e,s,t)=>{try{let a=await fetch("/api/admin/user-actions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,action:s,data:t})});if(a.ok)return await eU(),!0;return!1}catch(e){return console.error("Error performing user action:",e),!1}},eJ=async(e,s)=>{try{R(e),console.log("Confirming payment for user:",e,"amount:",s);let t=await fetch("/api/admin/payments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,action:"confirm"})}),a=await t.json();if(console.log("Payment confirmation result:",a),t.ok&&a.success)return alert("Payment confirmed successfully!"),await eU(),!0;return alert(a.error||"Failed to confirm payment. Please try again."),!1}catch(e){return console.error("Error confirming payment:",e),alert("Error confirming payment. Please try again."),!1}finally{R(null)}},eQ=async(e,s,t)=>await eB(e,"suspend",{reason:s,duration:t}),eG=async(e,s)=>await eB(e,"ban",{reason:s}),eH=async e=>{try{let s=await fetch("/api/admin/users/delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e})}),t=await s.json();if(t.success)return await eU(),alert("User deleted successfully!"),!0;return alert(t.error||"Failed to delete user"),!1}catch(e){return console.error("Error deleting user:",e),alert("An error occurred while deleting the user"),!1}},eW=async(s,t)=>{try{let a=e?.user?.email;if(!a)return alert("Admin authentication required"),!1;let l=await fetch("/api/admin/users/update",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:s,adminEmail:a,updates:t})}),r=await l.json();if(r.user)return await eU(),alert("User updated successfully!"),!0;return alert(r.error||"Failed to update user"),!1}catch(e){return console.error("Error updating user:",e),alert("An error occurred while updating the user"),!1}},eK=async e=>await eB(e,"verify"),eX=async e=>await eB(e,"reset_password"),e0=async(e,s,t)=>{try{let a=await fetch("/api/admin/bulk-actions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:e,userIds:Array.from(s),data:t})});if(a.ok)return await eU(),O(new Set),!0;return!1}catch(e){return console.error("Error performing bulk action:",e),!1}},e4=async(e,s,t)=>{eo(!0);try{let a=await fetch("/api/admin/notes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,note:s,type:t})});a.ok&&(await eq(e),er(""),ec("system"))}catch(e){console.error("Error adding admin note:",e)}finally{eo(!1)}},e5=async(e,s)=>{try{let t=await fetch(`/api/admin/notes/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({note:s})});t.ok&&k&&(await eq(k.id),ex(null),eu(""))}catch(e){console.error("Error updating admin note:",e)}},e1=async e=>{try{let s=await fetch(`/api/admin/notes/${e}`,{method:"DELETE"});s.ok&&k&&await eq(k.id)}catch(e){console.error("Error deleting admin note:",e)}},e2=(0,l.useMemo)(()=>t.filter(e=>{if(u){let s=u.toLowerCase(),t=e.full_name.toLowerCase().includes(s)||e.email.toLowerCase().includes(s)||e.university.toLowerCase().includes(s)||e.phone_number?.toLowerCase().includes(s)||e.instagram?.toLowerCase().includes(s);if(!t)return!1}return("all"===b.gender||e.gender===b.gender)&&("all"===b.status||e.status===b.status)&&("all"===b.verification||e.verification_status===b.verification)&&("all"===b.subscription||("none"!==b.subscription||!e.subscription_type)&&("none"===b.subscription||e.subscription_type===b.subscription))&&("all"===b.payment||("confirmed"!==b.payment||!!e.payment_confirmed)&&("review"!==b.payment||!!e.payment_proof_url&&!e.payment_confirmed)&&("none"!==b.payment||!e.payment_confirmed&&!e.payment_proof_url))&&(!b.university||!!e.university.toLowerCase().includes(b.university.toLowerCase()))&&!(e.age<b.age_range.min)&&!(e.age>b.age_range.max)}),[t,u,b]),e3=(0,l.useMemo)(()=>{let e=(Q-1)*H;return e2.slice(e,e+H)},[e2,Q,H]),e8=Math.ceil(e2.length/H);(0,l.useEffect)(()=>{let e=()=>{eA(!document.hidden)};return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)},[]),(0,l.useEffect)(()=>{if(!eN||!eS)return;let e=setInterval(()=>{d||x||!eS||(h(!0),eU(!0).finally(()=>h(!1)))},12e4);return()=>clearInterval(e)},[eN,d,x,eU,eS]),(0,l.useEffect)(()=>{let e=e=>{if(e.ctrlKey||e.metaKey)switch(e.key){case"f":e.preventDefault(),document.getElementById("search-input")?.focus();break;case"r":e.preventDefault(),eI();break;case"a":e.preventDefault(),e.shiftKey&&O(new Set(e2.map(e=>e.id)))}"Escape"===e.key&&(O(new Set),A(!1),U(!1))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[e2,eI]);let e6=async e=>{S(e),await eq(e.id),A(!0)};return d?a.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:(0,a.jsxs)(r.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-gray-600 border-t-white rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-white text-lg font-medium",children:"Loading Admin Panel..."}),a.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Initializing dashboard components"})]})}):(0,a.jsxs)("div",{className:`min-h-screen bg-black ${Y?"fixed inset-0 z-50":""}`,children:[a.jsx(r.E.header,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},className:"bg-black/95 backdrop-blur-xl border-b border-gray-800 sticky top-0 z-40 shadow-2xl",children:a.jsx("div",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center shadow-lg border border-gray-700",children:a.jsx(eE.Z,{className:"h-6 w-6 text-white"})}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-white",children:"Admin Panel"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Professional user management system"})]})]}),ew&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-400",children:[a.jsx(ez.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:["Last updated: ",ew.toLocaleTimeString()]}),x&&a.jsx("div",{className:"w-3 h-3 border border-purple-400 border-t-transparent rounded-full animate-spin"})]}),e_&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-green-400",children:[a.jsx(eD.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:["Cache: ",Math.round((Date.now()-e_)/1e3),"s ago"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)(eZ.z,{onClick:()=>ey(!eN),variant:"outline",size:"sm",className:`border-white/20 text-white hover:bg-white/10 ${eN?"bg-green-500/20 border-green-500":"bg-gray-500/20 border-gray-500"}`,children:[a.jsx(ez.Z,{className:"h-4 w-4 mr-2"}),"Real-time ",eN?"ON":"OFF (Performance Mode)"]}),(0,a.jsxs)(eZ.z,{onClick:eI,disabled:x,variant:"outline",size:"sm",className:"border-white/20 text-white hover:bg-white/10",children:[a.jsx(X.Z,{className:`h-4 w-4 mr-2 ${x?"animate-spin":""}`}),"Refresh"]}),a.jsx(eZ.z,{onClick:()=>q(!Y),variant:"outline",size:"sm",className:"border-white/20 text-white hover:bg-white/10",children:Y?a.jsx(eT.Z,{className:"h-4 w-4"}):a.jsx(eM.Z,{className:"h-4 w-4"})}),(0,a.jsxs)(eZ.z,{onClick:()=>(0,n.signOut)({callbackUrl:"/"}),variant:"outline",size:"sm",className:"border-white/20 text-white hover:bg-white/10",children:[a.jsx(eR.Z,{className:"h-4 w-4 mr-2"}),"Exit Admin"]})]})]})})}),a.jsx("div",{className:"px-6 py-6",children:(0,a.jsxs)(ek.mQ,{value:"dashboard"===y?"users":y,onValueChange:C,className:"w-full",children:[(0,a.jsxs)(ek.dr,{className:"grid w-full grid-cols-5 bg-black/90 backdrop-blur-xl border border-gray-800 mb-6",children:[(0,a.jsxs)(ek.SP,{value:"users",className:"data-[state=active]:bg-gray-800 text-white",children:[a.jsx(el.Z,{className:"h-4 w-4 mr-2"}),"Users (",K,")"]}),(0,a.jsxs)(ek.SP,{value:"matches",className:"data-[state=active]:bg-gray-800 text-white",children:[a.jsx(en.Z,{className:"h-4 w-4 mr-2"}),"Matches"]}),(0,a.jsxs)(ek.SP,{value:"payments",className:"data-[state=active]:bg-gray-800 text-white",children:[a.jsx(eL.Z,{className:"h-4 w-4 mr-2"}),"Payments"]}),(0,a.jsxs)(ek.SP,{value:"system",className:"data-[state=active]:bg-gray-800 text-white",children:[a.jsx(eO.Z,{className:"h-4 w-4 mr-2"}),"System"]}),(0,a.jsxs)(ek.SP,{value:"logs",className:"data-[state=active]:bg-gray-800 text-white",children:[a.jsx(eF.Z,{className:"h-4 w-4 mr-2"}),"Logs"]})]}),a.jsx(ek.nU,{value:"users",children:a.jsx(st,{users:e3,filteredUsers:e2,totalUsers:K,searchTerm:u,setSearchTerm:p,filters:b,setFilters:N,selectedUsers:L,setSelectedUsers:O,viewMode:F,setViewMode:$,showAdvancedFilters:V,setShowAdvancedFilters:I,currentPage:Q,setCurrentPage:G,usersPerPage:H,setUsersPerPage:W,totalPages:e8,onUserSelect:(e,s)=>{let t=new Set(L);s?t.add(e):t.delete(e),O(t)},onSelectAll:e=>{e?O(new Set(e3.map(e=>e.id))):O(new Set)},onUserDetail:e6,onPaymentDetail:e=>{S(e),U(!0)},onBulkAction:e0,onDeleteUser:eH})}),a.jsx(ek.nU,{value:"matches",children:a.jsx(ej,{})}),a.jsx(ek.nU,{value:"payments",children:a.jsx(sr,{users:t,onConfirmPayment:eJ,paymentLoading:M,setSelectedPaymentProof:T})}),a.jsx(ek.nU,{value:"system",children:a.jsx(si,{boysRegistrationEnabled:ep,setBoysRegistrationEnabled:eg,systemMaintenanceMode:eb,setSystemMaintenanceMode:ef})}),a.jsx(ek.nU,{value:"logs",children:a.jsx(sn,{})})]})}),a.jsx(sc,{user:k,open:Z,onOpenChange:A,adminNotes:es,newNote:ea,setNewNote:er,newNoteType:ei,setNewNoteType:ec,isAddingNote:ed,editingNoteId:em,editingNoteText:eh,setEditingNoteId:ex,setEditingNoteText:eu,onAddNote:e4,onUpdateNote:e5,onDeleteNote:e1,onConfirmPayment:eJ,onSuspendUser:eQ,onBanUser:eG,onDeleteUser:eH,onEditUser:eW,onVerifyUser:eK,onResetPassword:eX,setSelectedFullPhoto:J}),a.jsx(so,{user:k,open:P,onOpenChange:U,onConfirmPayment:eJ}),a.jsx(sm,{open:E,onOpenChange:z,selectedUsers:L,onBulkAction:e0}),a.jsx(f,{open:!!D,onOpenChange:()=>T(null),children:(0,a.jsxs)(w,{className:"max-w-4xl max-h-[90vh] bg-gray-900/95 backdrop-blur-xl border border-gray-700",children:[a.jsx(v,{children:(0,a.jsxs)(_,{className:"text-xl font-bold text-white flex items-center space-x-2",children:[a.jsx(e$.Z,{className:"h-5 w-5 text-blue-400"}),(0,a.jsxs)("span",{children:["Payment Proof - ",D?.user]})]})}),a.jsx("div",{className:"flex items-center justify-center p-4 bg-black/50 rounded-lg",children:D?.url&&a.jsx(m(),{src:D.url,alt:"Payment Proof",width:800,height:600,className:"max-w-full max-h-[70vh] object-contain rounded-lg",style:{width:"auto",height:"auto"}})}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,a.jsxs)(eZ.z,{onClick:()=>window.open(D?.url,"_blank"),variant:"outline",className:"border-blue-500 text-blue-400 hover:bg-blue-500/10",children:[a.jsx(eV.Z,{className:"h-4 w-4 mr-2"}),"Open in New Tab"]}),a.jsx(eZ.z,{onClick:()=>T(null),variant:"outline",className:"border-white/20 text-white hover:bg-white/10",children:"Close"})]})]})}),a.jsx(sd,{photo:B,open:!!B,onOpenChange:()=>J(null)})]})}function st({users:e,filteredUsers:s,totalUsers:t,searchTerm:l,setSearchTerm:n,filters:c,setFilters:d,selectedUsers:o,setSelectedUsers:m,viewMode:x,setViewMode:h,showAdvancedFilters:u,setShowAdvancedFilters:p,currentPage:g,setCurrentPage:j,usersPerPage:b,setUsersPerPage:f,totalPages:N,onUserSelect:y,onSelectAll:w,onUserDetail:v,onPaymentDetail:_,onBulkAction:C,onDeleteUser:k}){return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between bg-black/40 backdrop-blur-xl border border-white/10 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"text-white text-sm",children:["Showing ",(g-1)*b+1," to ",Math.min(g*b,s.length)," of ",s.length," users"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(eZ.z,{onClick:()=>j(Math.max(1,g-1)),disabled:1===g,variant:"outline",size:"sm",className:"border-white/20 text-white hover:bg-white/10",children:a.jsx(eR.Z,{className:"h-4 w-4"})}),(0,a.jsxs)("span",{className:"text-white px-3 py-1",children:["Page ",g," of ",N]}),a.jsx(eZ.z,{onClick:()=>j(Math.min(N,g+1)),disabled:g===N,variant:"outline",size:"sm",className:"border-white/20 text-white hover:bg-white/10",children:a.jsx(ep.Z,{className:"h-4 w-4"})})]})]}),a.jsx(eS.Zb,{className:"bg-black/40 backdrop-blur-xl border-white/10",children:(0,a.jsxs)(eS.aY,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[a.jsx("div",{className:"flex-1 max-w-md",children:(0,a.jsxs)("div",{className:"relative",children:[a.jsx(ee.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx(eA.I,{id:"search-input",placeholder:"Search users by name, email, university...",value:l,onChange:e=>n(e.target.value),className:"pl-10 bg-white/5 border-white/20 text-white placeholder-gray-400"})]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)(eZ.z,{onClick:()=>p(!u),variant:"outline",size:"sm",className:"border-white/20 text-white hover:bg-white/10",children:[a.jsx(eI.Z,{className:"h-4 w-4 mr-2"}),"Advanced Filters",u?a.jsx(F.Z,{className:"h-4 w-4 ml-2"}):a.jsx(O.Z,{className:"h-4 w-4 ml-2"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 border border-white/20 rounded-lg p-1",children:[a.jsx(eZ.z,{onClick:()=>h("table"),variant:"table"===x?"default":"ghost",size:"sm",className:"h-8 w-8 p-0",children:a.jsx(eY.Z,{className:"h-4 w-4"})}),a.jsx(eZ.z,{onClick:()=>h("grid"),variant:"grid"===x?"default":"ghost",size:"sm",className:"h-8 w-8 p-0",children:a.jsx(eq.Z,{className:"h-4 w-4"})})]}),o.size>0&&(0,a.jsxs)(eZ.z,{variant:"outline",size:"sm",className:"border-purple-500 text-purple-400 hover:bg-purple-500/10",children:[a.jsx(eB.Z,{className:"h-4 w-4 mr-2"}),"Bulk Actions (",o.size,")"]})]})]}),a.jsx(i.M,{children:u&&a.jsx(r.E.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"mt-6 pt-6 border-t border-white/10",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Gender"}),(0,a.jsxs)(V,{value:c.gender,onValueChange:e=>d({...c,gender:e}),children:[a.jsx(Y,{className:"bg-white/5 border-white/20 text-white",children:a.jsx(I,{})}),(0,a.jsxs)(J,{children:[a.jsx(G,{value:"all",children:"All Genders"}),a.jsx(G,{value:"male",children:"Male"}),a.jsx(G,{value:"female",children:"Female"})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Status"}),(0,a.jsxs)(V,{value:c.status,onValueChange:e=>d({...c,status:e}),children:[a.jsx(Y,{className:"bg-white/5 border-white/20 text-white",children:a.jsx(I,{})}),(0,a.jsxs)(J,{children:[a.jsx(G,{value:"all",children:"All Status"}),a.jsx(G,{value:"active",children:"Active"}),a.jsx(G,{value:"suspended",children:"Suspended"}),a.jsx(G,{value:"banned",children:"Banned"}),a.jsx(G,{value:"pending",children:"Pending"}),a.jsx(G,{value:"Match Found",children:"Match Found"})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Verification"}),(0,a.jsxs)(V,{value:c.verification,onValueChange:e=>d({...c,verification:e}),children:[a.jsx(Y,{className:"bg-white/5 border-white/20 text-white",children:a.jsx(I,{})}),(0,a.jsxs)(J,{children:[a.jsx(G,{value:"all",children:"All Verification"}),a.jsx(G,{value:"verified",children:"Verified"}),a.jsx(G,{value:"pending",children:"Pending"}),a.jsx(G,{value:"rejected",children:"Rejected"})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Subscription"}),(0,a.jsxs)(V,{value:c.subscription,onValueChange:e=>d({...c,subscription:e}),children:[a.jsx(Y,{className:"bg-white/5 border-white/20 text-white",children:a.jsx(I,{})}),(0,a.jsxs)(J,{children:[a.jsx(G,{value:"all",children:"All Subscriptions"}),a.jsx(G,{value:"basic",children:"Basic"}),a.jsx(G,{value:"premium",children:"Premium"}),a.jsx(G,{value:"none",children:"No Subscription"})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Payment Status"}),(0,a.jsxs)(V,{value:c.payment,onValueChange:e=>d({...c,payment:e}),children:[a.jsx(Y,{className:"bg-white/5 border-white/20 text-white",children:a.jsx(I,{})}),(0,a.jsxs)(J,{children:[a.jsx(G,{value:"all",children:"All Payments"}),a.jsx(G,{value:"confirmed",children:"Confirmed"}),a.jsx(G,{value:"review",children:"Under Review"}),a.jsx(G,{value:"none",children:"No Payment"})]})]})]})]})})})]})}),a.jsx(eS.Zb,{className:"bg-black/40 backdrop-blur-xl border-white/10",children:a.jsx(eS.aY,{className:"p-0",children:"table"===x?a.jsx(sa,{users:e,selectedUsers:o,onUserSelect:y,onSelectAll:w,onUserDetail:v,onPaymentDetail:_,onDeleteUser:k}):a.jsx(sl,{users:e,selectedUsers:o,onUserSelect:y,onUserDetail:v,onPaymentDetail:_,onDeleteUser:k})})})]})}function sa({users:e,selectedUsers:s,onUserSelect:t,onSelectAll:l,onUserDetail:r,onPaymentDetail:i,onDeleteUser:n}){return a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-white/5 border-b border-white/10",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"text-left p-4",children:a.jsx("input",{type:"checkbox",checked:e.length>0&&e.every(e=>s.has(e.id)),onChange:e=>l(e.target.checked),className:"rounded border-white/20 bg-white/5 text-gray-400"})}),a.jsx("th",{className:"text-left p-4 text-white font-medium",children:"User"}),a.jsx("th",{className:"text-left p-4 text-white font-medium",children:"Status"}),a.jsx("th",{className:"text-left p-4 text-white font-medium",children:"Subscription"}),a.jsx("th",{className:"text-left p-4 text-white font-medium",children:"Payment"}),a.jsx("th",{className:"text-left p-4 text-white font-medium",children:"Joined"}),a.jsx("th",{className:"text-left p-4 text-white font-medium",children:"Actions"})]})}),a.jsx("tbody",{children:e.map(e=>(0,a.jsxs)("tr",{className:"border-b border-white/5 hover:bg-white/5",children:[a.jsx("td",{className:"p-4",children:a.jsx("input",{type:"checkbox",checked:s.has(e.id),onChange:s=>t(e.id,s.target.checked),className:"rounded border-white/20 bg-white/5 text-gray-400"})}),a.jsx("td",{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)(p.qE,{className:"h-10 w-10",children:[a.jsx(p.F$,{src:e.profile_photo}),a.jsx(p.Q5,{children:e.full_name.charAt(0)})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-white font-medium",children:e.full_name}),a.jsx("p",{className:"text-gray-400 text-sm",children:e.email}),a.jsx("p",{className:"text-gray-400 text-sm",children:e.university})]})]})}),a.jsx("td",{className:"p-4",children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)(eP.C,{variant:"secondary",className:`${"active"===e.status?"bg-green-500/20 text-green-400 border-green-500/50":"suspended"===e.status?"bg-yellow-500/20 text-yellow-400 border-yellow-500/50":"banned"===e.status?"bg-red-500/20 text-red-400 border-red-500/50":"Match Found"===e.status?"bg-emerald-500/20 text-emerald-400 border-emerald-500/50":"bg-gray-500/20 text-gray-400 border-gray-500/50"}`,children:["Match Found"===e.status&&a.jsx(en.Z,{className:"h-3 w-3 mr-1"}),e.status]}),a.jsx(eP.C,{variant:"secondary",className:`${"verified"===e.verification_status?"bg-blue-500/20 text-blue-400 border-blue-500/50":"pending"===e.verification_status?"bg-yellow-500/20 text-yellow-400 border-yellow-500/50":"bg-red-500/20 text-red-400 border-red-500/50"}`,children:e.verification_status})]})}),a.jsx("td",{className:"p-4",children:e.subscription_type?(0,a.jsxs)(eP.C,{variant:"secondary",className:"bg-purple-500/20 text-purple-400 border-purple-500/50",children:[a.jsx(ea.Z,{className:"h-3 w-3 mr-1"}),e.subscription_type]}):a.jsx("span",{className:"text-gray-400",children:"No subscription"})}),a.jsx("td",{className:"p-4",children:e.payment_confirmed?(0,a.jsxs)(eP.C,{className:"bg-green-500/20 text-green-400 border-green-500/50",children:[a.jsx(eu.Z,{className:"h-3 w-3 mr-1"}),"Confirmed"]}):e.payment_proof_url?(0,a.jsxs)(eZ.z,{onClick:()=>i(e),variant:"outline",size:"sm",className:"border-yellow-500 text-yellow-400 hover:bg-yellow-500/10",children:[a.jsx(ei.Z,{className:"h-3 w-3 mr-1"}),"Review"]}):a.jsx("span",{className:"text-gray-400",children:"No payment"})}),(0,a.jsxs)("td",{className:"p-4",children:[a.jsx("p",{className:"text-white text-sm",children:new Date(e.created_at).toLocaleDateString()}),a.jsx("p",{className:"text-gray-400 text-xs",children:new Date(e.created_at).toLocaleTimeString()})]}),a.jsx("td",{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(eZ.z,{onClick:()=>r(e),variant:"outline",size:"sm",className:"border-blue-500 text-blue-400 hover:bg-blue-500/10",children:[a.jsx(e$.Z,{className:"h-3 w-3 mr-1"}),"View Profile"]}),(0,a.jsxs)(S,{children:[a.jsx(Z,{asChild:!0,children:(0,a.jsxs)(eZ.z,{variant:"outline",size:"sm",className:"border-red-500 text-red-400 hover:bg-red-500/10",children:[a.jsx(eJ.Z,{className:"h-3 w-3 mr-1"}),"Delete"]})}),(0,a.jsxs)(U,{className:"bg-gray-900 border-gray-700",children:[(0,a.jsxs)(E,{children:[a.jsx(D,{className:"text-white",children:"Delete User"}),(0,a.jsxs)(T,{className:"text-gray-400",children:["Are you sure you want to permanently delete ",e.full_name,"? This action cannot be undone."]})]}),(0,a.jsxs)(z,{children:[a.jsx(R,{className:"border-white/20 text-white hover:bg-white/10",children:"Cancel"}),a.jsx(M,{onClick:()=>n(e.id),className:"bg-red-600 hover:bg-red-700",children:"Delete User"})]})]})]})]})})]},e.id))})]})})}function sl({users:e,selectedUsers:s,onUserSelect:t,onUserDetail:l,onPaymentDetail:i,onDeleteUser:n}){return a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 p-6",children:e.map(e=>(0,a.jsxs)(r.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white/5 border border-white/10 rounded-lg p-4 hover:border-white/20 transition-all duration-300",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("input",{type:"checkbox",checked:s.has(e.id),onChange:s=>t(e.id,s.target.checked),className:"rounded border-white/20 bg-white/5 text-gray-400"}),(0,a.jsxs)("div",{className:"flex space-x-1",children:[a.jsx(eZ.z,{onClick:()=>l(e),variant:"outline",size:"sm",className:"border-blue-500 text-blue-400 hover:bg-blue-500/10 h-7 px-2",children:a.jsx(e$.Z,{className:"h-3 w-3"})}),(0,a.jsxs)(S,{children:[a.jsx(Z,{asChild:!0,children:a.jsx(eZ.z,{variant:"outline",size:"sm",className:"border-red-500 text-red-400 hover:bg-red-500/10 h-7 px-2",children:a.jsx(eJ.Z,{className:"h-3 w-3"})})}),(0,a.jsxs)(U,{className:"bg-gray-900 border-gray-700",children:[(0,a.jsxs)(E,{children:[a.jsx(D,{className:"text-white",children:"Delete User"}),(0,a.jsxs)(T,{className:"text-gray-400",children:["Are you sure you want to permanently delete ",e.full_name,"? This action cannot be undone."]})]}),(0,a.jsxs)(z,{children:[a.jsx(R,{className:"border-white/20 text-white hover:bg-white/10",children:"Cancel"}),a.jsx(M,{onClick:()=>n(e.id),className:"bg-red-600 hover:bg-red-700",children:"Delete User"})]})]})]})]})]}),(0,a.jsxs)("div",{className:"text-center mb-4",children:[(0,a.jsxs)(p.qE,{className:"h-16 w-16 mx-auto mb-3",children:[a.jsx(p.F$,{src:e.profile_photo}),a.jsx(p.Q5,{children:e.full_name.charAt(0)})]}),a.jsx("h3",{className:"text-white font-medium",children:e.full_name}),(0,a.jsxs)("p",{className:"text-gray-400 text-sm",children:[e.age," years"]}),a.jsx("p",{className:"text-gray-400 text-xs",children:e.university})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-400 text-sm",children:"Status:"}),(0,a.jsxs)(eP.C,{variant:"secondary",className:`${"active"===e.status?"bg-green-500/20 text-green-400 border-green-500/50":"suspended"===e.status?"bg-yellow-500/20 text-yellow-400 border-yellow-500/50":"banned"===e.status?"bg-red-500/20 text-red-400 border-red-500/50":"Match Found"===e.status?"bg-emerald-500/20 text-emerald-400 border-emerald-500/50":"bg-gray-500/20 text-gray-400 border-gray-500/50"}`,children:["Match Found"===e.status&&a.jsx(en.Z,{className:"h-2 w-2 mr-1"}),e.status]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-400 text-sm",children:"Payment:"}),e.payment_confirmed?(0,a.jsxs)(eP.C,{className:"bg-green-500/20 text-green-400 border-green-500/50 text-xs",children:[a.jsx(eu.Z,{className:"h-2 w-2 mr-1"}),"Confirmed"]}):e.payment_proof_url?a.jsx(eZ.z,{onClick:()=>i(e),variant:"outline",size:"sm",className:"border-yellow-500 text-yellow-400 hover:bg-yellow-500/10 text-xs h-6",children:"Review"}):a.jsx("span",{className:"text-gray-400 text-xs",children:"None"})]})]})]},e.id))})}function sr({users:e,onConfirmPayment:s,paymentLoading:t,setSelectedPaymentProof:l}){let r=e.filter(e=>e.payment_proof_url&&!e.payment_confirmed),i=e.filter(e=>e.payment_confirmed),n=e.filter(e=>"basic"===e.subscription_type&&e.payment_confirmed),c=e.filter(e=>"premium"===e.subscription_type&&e.payment_confirmed);console.log("Total users count:",e.length),console.log("Premium users with confirmed payment:",c.length),console.log("Basic users with confirmed payment:",n.length),console.log("Sample users:",e.slice(0,5).map(e=>({email:e.email,subscription_type:e.subscription_type,payment_confirmed:e.payment_confirmed})));let d=i.reduce((e,s)=>"basic"===s.subscription_type?e+99:"premium"===s.subscription_type?e+249:e,0);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[a.jsx(eS.Zb,{className:"bg-black/40 backdrop-blur-xl border-white/10",children:a.jsx(eS.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"Pending Reviews"}),a.jsx("p",{className:"text-2xl font-bold text-yellow-400 mt-1",children:r.length})]}),a.jsx(ei.Z,{className:"h-8 w-8 text-yellow-400/60"})]})})}),a.jsx(eS.Zb,{className:"bg-black/40 backdrop-blur-xl border-white/10",children:a.jsx(eS.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"Confirmed Payments"}),a.jsx("p",{className:"text-2xl font-bold text-green-400 mt-1",children:i.length})]}),a.jsx(eu.Z,{className:"h-8 w-8 text-green-400/60"})]})})}),a.jsx(eS.Zb,{className:"bg-black/40 backdrop-blur-xl border-white/10",children:a.jsx(eS.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"Paid Basic Users"}),a.jsx("p",{className:"text-2xl font-bold text-blue-400 mt-1",children:n.length})]}),a.jsx(el.Z,{className:"h-8 w-8 text-blue-400/60"})]})})}),a.jsx(eS.Zb,{className:"bg-black/40 backdrop-blur-xl border-white/10",children:a.jsx(eS.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"Paid Premium Users"}),a.jsx("p",{className:"text-2xl font-bold text-purple-400 mt-1",children:c.length})]}),a.jsx(ea.Z,{className:"h-8 w-8 text-purple-400/60"})]})})}),a.jsx(eS.Zb,{className:"bg-black/40 backdrop-blur-xl border-white/10",children:a.jsx(eS.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"Total Revenue"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-emerald-400 mt-1",children:["₹",d.toLocaleString()]})]}),a.jsx(eQ.Z,{className:"h-8 w-8 text-emerald-400/60"})]})})})]}),(0,a.jsxs)(eS.Zb,{className:"bg-black/40 backdrop-blur-xl border-white/10",children:[a.jsx(eS.Ol,{children:(0,a.jsxs)(eS.ll,{className:"text-white flex items-center",children:[a.jsx(ei.Z,{className:"h-5 w-5 mr-2"}),"Pending Payment Reviews (",r.length,")"]})}),a.jsx(eS.aY,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[r.map(e=>a.jsx("div",{className:"bg-white/5 border border-white/10 rounded-lg p-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)(p.qE,{className:"h-16 w-16",children:[a.jsx(p.F$,{src:e.profile_photo}),a.jsx(p.Q5,{children:e.full_name.charAt(0)})]}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-white font-medium text-lg",children:e.full_name}),a.jsx("p",{className:"text-gray-400 text-sm",children:e.email}),a.jsx("p",{className:"text-gray-400 text-sm",children:e.university}),a.jsx("div",{className:"mt-2",children:(0,a.jsxs)(eP.C,{className:"bg-purple-500/20 text-purple-400",children:[e.subscription_type," plan - ₹","basic"===e.subscription_type?"99":"249"]})})]})]}),a.jsx("div",{className:"flex items-center space-x-3",children:(0,a.jsxs)(eZ.z,{onClick:()=>s(e.id,"basic"===e.subscription_type?99:249),disabled:t===e.id,className:"bg-green-600 hover:bg-green-700 text-white disabled:opacity-50 disabled:cursor-not-allowed",children:[t===e.id?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):a.jsx(eu.Z,{className:"h-4 w-4 mr-2"}),t===e.id?"Processing...":"Confirm Payment"]})})]}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"text-white font-medium mb-3",children:"Payment Proof"}),e.payment_proof_url?(0,a.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4 text-center",children:[(0,a.jsxs)(eZ.z,{onClick:()=>l({url:e.payment_proof_url?se(e.payment_proof_url):null,user:e.full_name}),variant:"outline",className:"border-blue-500 text-blue-400 hover:bg-blue-500/10 w-full",children:[a.jsx(e$.Z,{className:"h-4 w-4 mr-2"}),"View Payment Proof"]}),a.jsx("p",{className:"text-gray-400 text-xs mt-2",children:"Click to view full proof image"})]}):a.jsx("div",{className:"bg-gray-500/20 border border-gray-500/30 rounded-lg p-6 text-center",children:a.jsx("p",{className:"text-gray-400",children:"No payment proof uploaded"})})]})]})},e.id)),0===r.length&&(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx(eu.Z,{className:"h-12 w-12 text-green-400 mx-auto mb-3"}),a.jsx("p",{className:"text-white font-medium",children:"No pending payment reviews"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"All payments have been processed"})]})]})})]})]})}function si({boysRegistrationEnabled:e,setBoysRegistrationEnabled:s,systemMaintenanceMode:t,setSystemMaintenanceMode:l}){return a.jsx("div",{className:"space-y-6",children:(0,a.jsxs)(eS.Zb,{className:"bg-black/40 backdrop-blur-xl border-white/10",children:[a.jsx(eS.Ol,{children:a.jsx(eS.ll,{className:"text-white",children:"System Controls"})}),(0,a.jsxs)(eS.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-white font-medium",children:"Boys Registration"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Control whether new male users can register"})]}),(0,a.jsxs)(eZ.z,{onClick:async()=>{try{let e=await fetch("/api/admin/system-settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"toggle_boys_registration"})}),t=await e.json();t.success?(s(t.new_value),alert(t.message)):alert(t.error||"Failed to toggle boys registration")}catch(e){console.error("Error toggling boys registration:",e),alert("An error occurred while updating the setting")}},variant:"outline",className:`${e?"border-green-500 text-green-400":"border-red-500 text-red-400"}`,children:[e?a.jsx(eG.Z,{className:"h-4 w-4 mr-2"}):a.jsx(eH.Z,{className:"h-4 w-4 mr-2"}),e?"Enabled":"Disabled"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-white font-medium",children:"Maintenance Mode"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Enable maintenance mode for system updates"})]}),(0,a.jsxs)(eZ.z,{onClick:()=>l(!t),variant:"outline",className:`${t?"border-yellow-500 text-yellow-400":"border-green-500 text-green-400"}`,children:[t?a.jsx(ec.Z,{className:"h-4 w-4 mr-2"}):a.jsx(eu.Z,{className:"h-4 w-4 mr-2"}),t?"Maintenance":"Operational"]})]})]})]})})}function sn(){return a.jsx("div",{className:"space-y-6",children:(0,a.jsxs)(eS.Zb,{className:"bg-black/40 backdrop-blur-xl border-white/10",children:[a.jsx(eS.Ol,{children:a.jsx(eS.ll,{className:"text-white",children:"System Logs"})}),a.jsx(eS.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),a.jsx("span",{className:"text-white",children:"User registration successful"}),a.jsx("span",{className:"text-gray-400 text-sm ml-auto",children:"2 minutes ago"})]})}),a.jsx("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),a.jsx("span",{className:"text-white",children:"Payment confirmed for user"}),a.jsx("span",{className:"text-gray-400 text-sm ml-auto",children:"5 minutes ago"})]})}),a.jsx("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),a.jsx("span",{className:"text-white",children:"Admin login detected"}),a.jsx("span",{className:"text-gray-400 text-sm ml-auto",children:"10 minutes ago"})]})})]})})]})})}function sc({user:e,open:s,onOpenChange:t,adminNotes:r,newNote:i,setNewNote:n,newNoteType:c,setNewNoteType:d,isAddingNote:o,editingNoteId:m,editingNoteText:x,setEditingNoteId:h,setEditingNoteText:u,onAddNote:g,onUpdateNote:b,onDeleteNote:N,onConfirmPayment:y,onSuspendUser:C,onBanUser:k,onDeleteUser:A,onEditUser:P,onVerifyUser:L,onResetPassword:O,setSelectedFullPhoto:F}){let[$,q]=(0,l.useState)(!1),[B,Q]=(0,l.useState)({}),[H,W]=(0,l.useState)(!1);(0,l.useEffect)(()=>{e&&Q({name:e.name||"",email:e.email||"",phone:e.phone||"",college:e.college||"",year:e.year||"",course:e.course||"",branch:e.branch||"",age:e.age||"",height:e.height||"",location:e.location||"",interests:e.interests||"",relationship_status:e.relationship_status||"",instagram:e.instagram||"",subscription_type:e.subscription_type||"basic",is_payment_verified:e.is_payment_verified||!1,points:e.points||0,is_active:!1!==e.is_active})},[e]);let K=async()=>{W(!0);try{let s=await P(e.id,B);s&&q(!1)}catch(e){console.error("Error updating user:",e)}finally{W(!1)}};return e?a.jsx(f,{open:s,onOpenChange:t,children:(0,a.jsxs)(w,{className:"max-w-7xl max-h-[95vh] bg-black/95 backdrop-blur-xl border border-gray-800",children:[a.jsx(v,{className:"border-b border-gray-800 pb-4",children:(0,a.jsxs)(_,{className:"text-2xl font-bold text-white flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:a.jsx(eW.Z,{className:"h-5 w-5 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{children:["User Profile: ",e.full_name]}),a.jsx("p",{className:"text-sm text-gray-400 font-normal",children:"Complete user management and information"})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 py-6 max-h-[75vh] overflow-y-auto",children:[a.jsx("div",{className:"lg:col-span-1",children:a.jsx(eS.Zb,{className:"bg-gray-900/80 border-gray-800 shadow-2xl",children:(0,a.jsxs)(eS.aY,{className:"p-8 text-center",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)(p.qE,{className:"h-48 w-48 mx-auto cursor-pointer ring-4 ring-blue-500/20 hover:ring-blue-500/40 transition-all duration-300",onClick:()=>e.profile_photo&&F({url:e.profile_photo,name:e.full_name}),children:[a.jsx(p.F$,{src:e.profile_photo,className:"object-cover"}),a.jsx(p.Q5,{className:"text-6xl bg-gradient-to-br from-gray-700 to-gray-800 text-white",children:e.full_name.charAt(0)})]}),e.profile_photo&&a.jsx("p",{className:"text-gray-400 text-xs mt-3",children:"Click to view full size"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:e.full_name}),(0,a.jsxs)("p",{className:"text-gray-400 text-lg",children:[e.age," years old • ",e.gender]}),a.jsx("p",{className:"text-blue-400 font-medium",children:e.university})]})]})})}),(0,a.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,a.jsxs)(eS.Zb,{className:"bg-gray-900/80 border-gray-800 shadow-xl",children:[a.jsx(eS.Ol,{className:"border-b border-gray-800",children:(0,a.jsxs)(eS.ll,{className:"text-white text-xl flex items-center",children:[a.jsx(eK.Z,{className:"h-5 w-5 mr-3 text-blue-400"}),"Contact Information"]})}),(0,a.jsxs)(eS.aY,{className:"p-6 space-y-5",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-5",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-gray-400 text-sm font-medium",children:"Email Address"}),$?a.jsx(eA.I,{value:B.email,onChange:e=>Q({...B,email:e.target.value}),className:"bg-gray-800/50 border-gray-700 text-white"}):(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(eK.Z,{className:"h-4 w-4 text-blue-400"}),a.jsx("p",{className:"text-white font-medium",children:e.email})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-gray-400 text-sm font-medium",children:"Full Name"}),$?a.jsx(eA.I,{value:B.name,onChange:e=>Q({...B,name:e.target.value}),className:"bg-gray-800/50 border-gray-700 text-white"}):(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(eW.Z,{className:"h-4 w-4 text-blue-400"}),a.jsx("p",{className:"text-white font-medium",children:e.name||e.full_name})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-gray-400 text-sm font-medium",children:"College"}),$?a.jsx(eA.I,{value:B.college,onChange:e=>Q({...B,college:e.target.value}),className:"bg-gray-800/50 border-gray-700 text-white"}):(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(eX.Z,{className:"h-4 w-4 text-purple-400"}),a.jsx("p",{className:"text-white font-medium",children:e.college||e.university})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-gray-400 text-sm font-medium",children:"Year of Study"}),$?a.jsx(eA.I,{value:B.year,onChange:e=>Q({...B,year:e.target.value}),className:"bg-gray-800/50 border-gray-700 text-white"}):(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(e0.Z,{className:"h-4 w-4 text-green-400"}),a.jsx("p",{className:"text-white font-medium",children:e.year||e.year_of_study||"Not specified"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-gray-400 text-sm font-medium",children:"Phone Number"}),$?a.jsx(eA.I,{value:B.phone,onChange:e=>Q({...B,phone:e.target.value}),className:"bg-gray-800/50 border-gray-700 text-white"}):(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(e4.Z,{className:"h-4 w-4 text-orange-400"}),a.jsx("p",{className:"text-white font-medium",children:e.phone||e.phone_number||"Not provided"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-gray-400 text-sm font-medium",children:"Instagram"}),$?a.jsx(eA.I,{value:B.instagram,onChange:e=>Q({...B,instagram:e.target.value}),className:"bg-gray-800/50 border-gray-700 text-white",placeholder:"@username"}):(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(e5.Z,{className:"h-4 w-4 text-pink-400"}),a.jsx("p",{className:"text-white font-medium",children:e.instagram?`@${e.instagram}`:"Not provided"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-gray-400 text-sm font-medium",children:"Age"}),$?a.jsx(eA.I,{type:"number",value:B.age,onChange:e=>Q({...B,age:e.target.value}),className:"bg-gray-800/50 border-gray-700 text-white"}):(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(e1.Z,{className:"h-4 w-4 text-yellow-400"}),a.jsx("p",{className:"text-white font-medium",children:e.age||"Not specified"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-gray-400 text-sm font-medium",children:"Height"}),$?a.jsx(eA.I,{value:B.height,onChange:e=>Q({...B,height:e.target.value}),className:"bg-gray-800/50 border-gray-700 text-white",placeholder:"e.g., 5'8"}):(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(e2.Z,{className:"h-4 w-4 text-green-400"}),a.jsx("p",{className:"text-white font-medium",children:e.height||"Not specified"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2 pt-4 border-t border-gray-800",children:[a.jsx("label",{className:"text-gray-400 text-sm font-medium",children:"Bio"}),$?a.jsx(eU.g,{value:B.interests,onChange:e=>Q({...B,interests:e.target.value}),className:"bg-gray-800/50 border-gray-700 text-white min-h-[100px]",placeholder:"Tell us about yourself..."}):a.jsx("div",{className:"bg-gray-800/50 rounded-lg p-4",children:a.jsx("p",{className:"text-white",children:e.bio||e.interests||"No bio provided"})})]})]})]}),(0,a.jsxs)(eS.Zb,{className:"bg-gray-900/80 border-gray-800 shadow-xl",children:[a.jsx(eS.Ol,{className:"border-b border-gray-800",children:(0,a.jsxs)(eS.ll,{className:"text-white text-xl flex items-center",children:[a.jsx(eL.Z,{className:"h-5 w-5 mr-3 text-green-400"}),"Subscription & Payment"]})}),a.jsx(eS.aY,{className:"p-6 space-y-6",children:e.subscription_type?(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-purple-500/10 border border-purple-500/20 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(ea.Z,{className:"h-6 w-6 text-purple-400"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-white font-semibold",children:[e.subscription_type?.toUpperCase()||"FREE"," Plan"]}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Premium subscription active"})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-purple-400 font-bold text-xl",children:["₹","basic"===e.subscription_type?"99":"249"]}),a.jsx("p",{className:"text-gray-400 text-xs",children:"one-time"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-400 font-medium",children:"Payment Status"}),e.payment_confirmed?(0,a.jsxs)(eP.C,{className:"bg-green-500/20 text-green-400 border-green-500/50 px-4 py-2",children:[a.jsx(eu.Z,{className:"h-4 w-4 mr-2"}),"CONFIRMED"]}):e.payment_proof_url?(0,a.jsxs)(eP.C,{className:"bg-yellow-500/20 text-yellow-400 border-yellow-500/50 px-4 py-2",children:[a.jsx(ei.Z,{className:"h-4 w-4 mr-2"}),"PENDING REVIEW"]}):(0,a.jsxs)(eP.C,{className:"bg-gray-500/20 text-gray-400 border-gray-500/50 px-4 py-2",children:[a.jsx(j.Z,{className:"h-4 w-4 mr-2"}),"NO PAYMENT"]})]}),e.payment_proof_url&&(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-gray-400 text-sm font-medium",children:"Payment Proof"}),a.jsx("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-white",children:"Payment screenshot uploaded"}),(0,a.jsxs)(eZ.z,{onClick:()=>{let s=e.payment_proof_url?se(e.payment_proof_url):null;s&&window.open(s,"_blank")},variant:"outline",size:"sm",className:"border-blue-500 text-blue-400 hover:bg-blue-500/10",children:[a.jsx(e$.Z,{className:"h-4 w-4 mr-2"}),"View Proof"]})]})}),!e.payment_confirmed&&(0,a.jsxs)(eZ.z,{onClick:()=>y(e.id,"basic"===e.subscription_type?99:249),className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3",children:[a.jsx(eu.Z,{className:"h-5 w-5 mr-2"}),"Confirm Payment (₹","basic"===e.subscription_type?"99":"249",")"]})]})]})]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(j.Z,{className:"h-8 w-8 text-gray-400"})}),a.jsx("p",{className:"text-gray-400 text-lg",children:"No subscription"}),a.jsx("p",{className:"text-gray-500 text-sm",children:"User has not subscribed to any plan"})]})})]})]}),(0,a.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,a.jsxs)(eS.Zb,{className:"bg-gray-900/80 border-gray-800 shadow-xl",children:[a.jsx(eS.Ol,{className:"border-b border-gray-800",children:(0,a.jsxs)(eS.ll,{className:"text-white text-xl flex items-center",children:[a.jsx(eO.Z,{className:"h-5 w-5 mr-3 text-red-400"}),"Admin Actions"]})}),a.jsx(eS.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-3",children:[(0,a.jsxs)(eZ.z,{onClick:()=>q(!$),variant:"outline",className:"border-blue-500 text-blue-400 hover:bg-blue-500/10 justify-start",children:[a.jsx(e3.Z,{className:"h-4 w-4 mr-3"}),$?"Cancel Edit":"Edit Profile"]}),$&&(0,a.jsxs)(eZ.z,{onClick:K,disabled:H,className:"bg-green-600 hover:bg-green-700 text-white justify-start",children:[a.jsx(e8.Z,{className:"h-4 w-4 mr-3"}),H?"Saving...":"Save Changes"]}),(0,a.jsxs)(S,{children:[a.jsx(Z,{asChild:!0,children:(0,a.jsxs)(eZ.z,{variant:"outline",className:"border-red-500 text-red-400 hover:bg-red-500/10 justify-start",children:[a.jsx(eJ.Z,{className:"h-4 w-4 mr-3"}),"Delete User"]})}),(0,a.jsxs)(U,{className:"bg-gray-900 border-gray-700",children:[(0,a.jsxs)(E,{children:[a.jsx(D,{className:"text-white",children:"Delete User"}),(0,a.jsxs)(T,{className:"text-gray-400",children:["Are you sure you want to permanently delete ",e.full_name,"? This action cannot be undone."]})]}),(0,a.jsxs)(z,{children:[a.jsx(R,{className:"border-gray-600 text-gray-400 hover:bg-gray-700",children:"Cancel"}),a.jsx(M,{onClick:()=>A(e.id),className:"bg-red-600 hover:bg-red-700",children:"Delete User"})]})]})]})]})})]}),(0,a.jsxs)(eS.Zb,{className:"bg-gray-900/80 border-gray-800 shadow-xl",children:[a.jsx(eS.Ol,{className:"border-b border-gray-800",children:(0,a.jsxs)(eS.ll,{className:"text-white text-xl flex items-center",children:[a.jsx(e6.Z,{className:"h-5 w-5 mr-3 text-yellow-400"}),"Admin Notes"]})}),(0,a.jsxs)(eS.aY,{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(V,{value:c,onValueChange:d,children:[a.jsx(Y,{className:"bg-gray-800/50 border-gray-700 text-white",children:a.jsx(I,{})}),(0,a.jsxs)(J,{className:"bg-gray-900 border-gray-700",children:[a.jsx(G,{value:"note",children:"Note"}),a.jsx(G,{value:"warning",children:"Warning"}),a.jsx(G,{value:"system",children:"System"})]})]}),a.jsx(eU.g,{placeholder:"Add a note about this user...",value:i,onChange:e=>n(e.target.value),className:"bg-gray-800/50 border-gray-700 text-white placeholder-gray-400 min-h-[80px]"}),(0,a.jsxs)(eZ.z,{onClick:()=>g(e.id,i,c),disabled:!i.trim()||o,className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:[a.jsx(em.Z,{className:"h-4 w-4 mr-2"}),o?"Adding...":"Add Note"]})]}),a.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:r.length>0?r.map(e=>(0,a.jsxs)("div",{className:"bg-gray-800/30 border border-gray-700 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[a.jsx(eP.C,{className:`${"warning"===e.type?"bg-yellow-500/20 text-yellow-400 border-yellow-500/50":"system"===e.type?"bg-blue-500/20 text-blue-400 border-blue-500/50":"bg-gray-500/20 text-gray-400 border-gray-500/50"}`,children:e.type?.toUpperCase()||"NOTE"}),a.jsx("span",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleDateString()})]}),a.jsx("p",{className:"text-white text-sm leading-relaxed whitespace-pre-wrap",children:e.note}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 mt-3 pt-2 border-t border-gray-700",children:[(0,a.jsxs)("span",{children:["By: ",e.admin_email]}),a.jsx("span",{children:new Date(e.created_at).toLocaleTimeString()})]})]},e.id)):(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx(e6.Z,{className:"h-12 w-12 text-gray-600 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-400",children:"No admin notes"}),a.jsx("p",{className:"text-gray-500 text-sm",children:"Add the first note above"})]})})]})]})]})]})]})}):null}function sd({photo:e,open:s,onOpenChange:t}){return e?a.jsx(f,{open:s,onOpenChange:t,children:(0,a.jsxs)(w,{className:"max-w-4xl max-h-[90vh] bg-black/95 backdrop-blur-xl border border-gray-800 p-0",children:[a.jsx(v,{className:"px-6 py-4 border-b border-gray-800",children:(0,a.jsxs)(_,{className:"text-xl font-bold text-white flex items-center space-x-2",children:[a.jsx(eW.Z,{className:"h-5 w-5 text-blue-400"}),(0,a.jsxs)("span",{children:[e.name," - Profile Photo"]})]})}),a.jsx("div",{className:"p-6 flex items-center justify-center",children:a.jsx("div",{className:"relative max-w-full max-h-[70vh] overflow-hidden rounded-lg",children:a.jsx(m(),{src:e.url,alt:`${e.name} Profile Photo`,width:800,height:800,className:"object-contain max-w-full max-h-full",unoptimized:!0})})})]})}):null}function so({user:e,open:s,onOpenChange:t,onConfirmPayment:r}){let[i,n]=(0,l.useState)(!1);if(!e?.payment_proof_url)return null;let c=async()=>{n(!0);try{await r(e.id,"basic"===e.subscription_type?99:249),t(!1)}catch(e){console.error("Error confirming payment:",e)}finally{n(!1)}};return a.jsx(f,{open:s,onOpenChange:t,children:(0,a.jsxs)(w,{className:"max-w-4xl max-h-[90vh] bg-gray-900/95 backdrop-blur-xl border border-gray-700",children:[a.jsx(v,{children:(0,a.jsxs)(_,{className:"text-xl font-bold text-white flex items-center space-x-2",children:[a.jsx(eL.Z,{className:"h-5 w-5 text-green-400"}),(0,a.jsxs)("span",{children:["Payment Verification: ",e.full_name]})]})}),a.jsx("div",{className:"py-6 space-y-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-white font-medium mb-4",children:"Payment Details"}),(0,a.jsxs)("div",{className:"space-y-3 bg-white/5 border border-white/10 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"User:"}),a.jsx("span",{className:"text-white",children:e.full_name})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Plan:"}),(0,a.jsxs)("span",{className:"text-white",children:[e.subscription_type," Plan"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Amount:"}),(0,a.jsxs)("span",{className:"text-white",children:["₹","basic"===e.subscription_type?"99":"249"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Submitted:"}),a.jsx("span",{className:"text-white",children:e.payment_date?new Date(e.payment_date).toLocaleString():"Unknown"})]})]}),a.jsx("div",{className:"mt-6 flex items-center space-x-3",children:(0,a.jsxs)(eZ.z,{onClick:c,disabled:i,className:"bg-green-600 hover:bg-green-700 text-white disabled:opacity-50",children:[a.jsx(eu.Z,{className:"h-4 w-4 mr-2"}),i?"Confirming...":"Confirm Payment"]})})]}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-white font-medium mb-4",children:"Payment Proof"}),a.jsx("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4",children:a.jsx(m(),{src:(e.payment_proof_url?se(e.payment_proof_url):null)||"",alt:"Payment Proof",width:500,height:400,className:"w-full h-auto max-h-96 object-contain rounded-lg"})})]})]})})]})})}function sm({open:e,onOpenChange:s,selectedUsers:t,onBulkAction:r}){let[i,n]=(0,l.useState)(""),[c,d]=(0,l.useState)(""),o=[{value:"verify",label:"Verify Users",icon:eu.Z,color:"text-blue-400"},{value:"suspend",label:"Suspend Users",icon:e9.Z,color:"text-yellow-400"},{value:"ban",label:"Ban Users",icon:ed.Z,color:"text-red-400"},{value:"delete",label:"Delete Users",icon:eJ.Z,color:"text-red-500"},{value:"export",label:"Export Data",icon:e7.Z,color:"text-green-400"}];return a.jsx(f,{open:e,onOpenChange:s,children:(0,a.jsxs)(w,{className:"max-w-md bg-gray-900/95 backdrop-blur-xl border border-gray-700",children:[a.jsx(v,{children:(0,a.jsxs)(_,{className:"text-xl font-bold text-white",children:["Bulk Actions (",t.size," users)"]})}),(0,a.jsxs)("div",{className:"py-6 space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Select Action"}),(0,a.jsxs)(V,{value:i,onValueChange:n,children:[a.jsx(Y,{className:"bg-white/5 border-white/20 text-white",children:a.jsx(I,{placeholder:"Choose an action"})}),a.jsx(J,{children:o.map(e=>a.jsx(G,{value:e.value,children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(e.icon,{className:`h-4 w-4 ${e.color}`}),a.jsx("span",{children:e.label})]})},e.value))})]})]}),("suspend"===i||"ban"===i||"delete"===i)&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Reason"}),a.jsx(eU.g,{placeholder:"Enter reason for this action...",value:c,onChange:e=>d(e.target.value),className:"bg-white/5 border-white/20 text-white placeholder-gray-400"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 pt-4",children:[a.jsx(eZ.z,{onClick:()=>{i&&(r(i,t,{reason:c}),s(!1),n(""),d(""))},disabled:!i||"verify"!==i&&"export"!==i&&!c.trim(),className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white",children:"Execute Action"}),a.jsx(eZ.z,{onClick:()=>s(!1),variant:"outline",className:"border-white/20 text-white hover:bg-white/10",children:"Cancel"})]})]})]})})}function sx(){return a.jsx(ss,{})}},78781:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>i,__esModule:()=>r,default:()=>c});var a=t(17536);let l=(0,a.createProxy)(String.raw`/home/aman/Desktop/cufy_3.1v-1/app/admin/page.tsx`),{__esModule:r,$$typeof:i}=l,n=l.default,c=n}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[5020,6911,7345,7135,9680,2730,3174,7799,6429,2451,563,1293,6830,4516,8598,9378,3783,9614,8941],()=>t(15617));module.exports=a})();