(()=>{var e={};e.id=3,e.ids=[3],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},95905:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>h,originalPathname:()=>x,pages:()=>m,routeModule:()=>u,tree:()=>o});var a=t(73137),r=t(54647),l=t(4183),i=t.n(l),n=t(71775),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(s,c);let d=a.AppPageRouteModule,o=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,78781)),"/home/aman/Desktop/cufy_3.1v/app/admin/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,68350)),"/home/aman/Desktop/cufy_3.1v/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,51918,23)),"next/dist/client/components/not-found-error"]}],m=["/home/aman/Desktop/cufy_3.1v/app/admin/page.tsx"],x="/admin/page",h={require:t,loadChunk:()=>Promise.resolve()},u=new d({definition:{kind:r.x.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},88558:(e,s,t)=>{Promise.resolve().then(t.bind(t,65059))},65059:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>e4});var a=t(60080),r=t(9885),l=t(65345),i=t(37686),n=t(74284),c=t(57114),d=t(77988),o=t(52451),m=t.n(o),x=t(17111),h=t(28598),u=t(34516),p=t(21091),g=t(5311),b=t(32293),j=t(7589),y=t(56206),f=t(23161);let N=j.fC;j.xz;let w=j.h_;j.x8;let v=r.forwardRef(({className:e,...s},t)=>a.jsx(j.aV,{ref:t,className:(0,f.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s}));v.displayName=j.aV.displayName;let _=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(w,{children:[a.jsx(v,{}),(0,a.jsxs)(j.VY,{ref:r,className:(0,f.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t,children:[s,(0,a.jsxs)(j.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[a.jsx(y.Z,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));_.displayName=j.VY.displayName;let k=({className:e,...s})=>a.jsx("div",{className:(0,f.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...s});k.displayName="DialogHeader";let C=r.forwardRef(({className:e,...s},t)=>a.jsx(j.Dx,{ref:t,className:(0,f.cn)("text-lg font-semibold leading-none tracking-tight",e),...s}));C.displayName=j.Dx.displayName;let S=r.forwardRef(({className:e,...s},t)=>a.jsx(j.dk,{ref:t,className:(0,f.cn)("text-sm text-muted-foreground",e),...s}));S.displayName=j.dk.displayName;var P=t(36392),Z=t(68384);let z=P.fC,E=P.xz,U=P.h_,A=r.forwardRef(({className:e,...s},t)=>a.jsx(P.aV,{className:(0,f.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s,ref:t}));A.displayName=P.aV.displayName;let D=r.forwardRef(({className:e,...s},t)=>(0,a.jsxs)(U,{children:[a.jsx(A,{}),a.jsx(P.VY,{ref:t,className:(0,f.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s})]}));D.displayName=P.VY.displayName;let T=({className:e,...s})=>a.jsx("div",{className:(0,f.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...s});T.displayName="AlertDialogHeader";let O=({className:e,...s})=>a.jsx("div",{className:(0,f.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...s});O.displayName="AlertDialogFooter";let R=r.forwardRef(({className:e,...s},t)=>a.jsx(P.Dx,{ref:t,className:(0,f.cn)("text-lg font-semibold",e),...s}));R.displayName=P.Dx.displayName;let L=r.forwardRef(({className:e,...s},t)=>a.jsx(P.dk,{ref:t,className:(0,f.cn)("text-sm text-muted-foreground",e),...s}));L.displayName=P.dk.displayName;let V=r.forwardRef(({className:e,...s},t)=>a.jsx(P.aU,{ref:t,className:(0,f.cn)((0,Z.d)(),e),...s}));V.displayName=P.aU.displayName;let $=r.forwardRef(({className:e,...s},t)=>a.jsx(P.$j,{ref:t,className:(0,f.cn)((0,Z.d)({variant:"outline"}),"mt-2 sm:mt-0",e),...s}));$.displayName=P.$j.displayName;var M=t(75935),I=t(19458),F=t(4678),Y=t(1264);let q=M.fC;M.ZA;let B=M.B4,J=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(M.xz,{ref:r,className:(0,f.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...t,children:[s,a.jsx(M.JO,{asChild:!0,children:a.jsx(I.Z,{className:"h-4 w-4 opacity-50"})})]}));J.displayName=M.xz.displayName;let G=r.forwardRef(({className:e,...s},t)=>a.jsx(M.u_,{ref:t,className:(0,f.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:a.jsx(F.Z,{className:"h-4 w-4"})}));G.displayName=M.u_.displayName;let Q=r.forwardRef(({className:e,...s},t)=>a.jsx(M.$G,{ref:t,className:(0,f.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:a.jsx(I.Z,{className:"h-4 w-4"})}));Q.displayName=M.$G.displayName;let W=r.forwardRef(({className:e,children:s,position:t="popper",...r},l)=>a.jsx(M.h_,{children:(0,a.jsxs)(M.VY,{ref:l,className:(0,f.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...r,children:[a.jsx(G,{}),a.jsx(M.l_,{className:(0,f.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),a.jsx(Q,{})]})}));W.displayName=M.VY.displayName;let H=r.forwardRef(({className:e,...s},t)=>a.jsx(M.__,{ref:t,className:(0,f.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...s}));H.displayName=M.__.displayName;let K=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(M.ck,{ref:r,className:(0,f.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(M.wU,{children:a.jsx(Y.Z,{className:"h-4 w-4"})})}),a.jsx(M.eT,{children:s})]}));K.displayName=M.ck.displayName;let X=r.forwardRef(({className:e,...s},t)=>a.jsx(M.Z0,{ref:t,className:(0,f.cn)("-mx-1 my-1 h-px bg-muted",e),...s}));X.displayName=M.Z0.displayName;var ee=t(7652),es=t(44901),et=t(89815),ea=t(82875),er=t(20644),el=t(71725),ei=t(42673),en=t(79803),ec=t(91672),ed=t(78260),eo=t(5987),em=t(39546),ex=t(22388),eh=t(65688),eu=t(37631),ep=t(69518),eg=t(12029),eb=t(53488),ej=t(28200),ey=t(1611),ef=t(74402),eN=t(96253),ew=t(15441),ev=t(26303),e_=t(66908),ek=t(85335),eC=t(40834),eS=t(94163),eP=t(93680),eZ=t(59490),ez=t(16920),eE=t(78937),eU=t(14571),eA=t(54278),eD=t(517),eT=t(38724),eO=t(34010),eR=t(52995),eL=t(6827),eV=t(22385),e$=t(95866),eM=t(52778),eI=t(85574);let eF=e=>{if(!e)return null;if(e.startsWith("http")||e.startsWith("https"))return e;let{data:s}=d.O.storage.from("payment-proofs").getPublicUrl(e);return s.publicUrl};function eY(){let{data:e}=(0,n.useSession)(),s=(0,c.useRouter)(),[t,i]=(0,r.useState)([]),[d,o]=(0,r.useState)(!0),[h,p]=(0,r.useState)(!1),[g,b]=(0,r.useState)(""),[j,y]=(0,r.useState)(""),[f,w]=(0,r.useState)({gender:"all",status:"all",verification:"all",subscription:"all",payment:"all",university:"",age_range:{min:18,max:30},date_range:{start:"",end:""},sort_by:"created_at",sort_order:"desc"}),[v,S]=(0,r.useState)("users"),[P,Z]=(0,r.useState)(null),[z,E]=(0,r.useState)(!1),[U,A]=(0,r.useState)(!1),[D,T]=(0,r.useState)(!1),[O,R]=(0,r.useState)(null),[L,V]=(0,r.useState)(null),[$,M]=(0,r.useState)(new Set),[I,F]=(0,r.useState)("table"),[Y,q]=(0,r.useState)(!1),[B,J]=(0,r.useState)(!1),[G,Q]=(0,r.useState)(null),[W,H]=(0,r.useState)(1),[K,X]=(0,r.useState)(25),[ee,eu]=(0,r.useState)(0),[ep,eg]=(0,r.useState)([]),[eb,ej]=(0,r.useState)(""),[ey,ef]=(0,r.useState)("system"),[eN,ew]=(0,r.useState)(!1),[ev,e_]=(0,r.useState)(null),[ek,eC]=(0,r.useState)(""),[eS,eP]=(0,r.useState)(!0),[eZ,ez]=(0,r.useState)(!1),[eE,eU]=(0,r.useState)(!1),[eA,eD]=(0,r.useState)(null),[eT,eO]=(0,r.useState)(0),[eR,eL]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=setTimeout(()=>{d&&(console.warn("Loading timeout reached, forcing loading to false"),o(!1))},1e4);return()=>clearTimeout(e)},[d]);let eV=(0,r.useCallback)(async(e=!1)=>{try{let s=Date.now();if(!e&&eT&&s-eT<12e4&&t.length>0){console.log("Using cached data, skipping fetch");return}let a=new URLSearchParams;a.append("page",W.toString()),a.append("limit",K.toString()),a.append("search",j),Object.entries(f).forEach(([e,s])=>{"string"==typeof s&&s?a.append(e,s):"object"==typeof s&&null!==s&&a.append(e,JSON.stringify(s))});let r=await fetch(`/api/admin/users?${a}`);if(r.ok){let e=await r.json();i(e.users||[]),eu(e.total||0),eD(new Date),eO(s),console.log("Data fetched successfully at",new Date().toLocaleTimeString())}else throw console.error("Failed to fetch users:",r.status,r.statusText),Error(`API responded with ${r.status}`)}catch(e){console.error("Error fetching users:",e),i([]),eu(0)}},[W,K,j,f,eT,t.length]),e$=(0,r.useCallback)(async(e=!1)=>eV(e),[eV]);(0,r.useCallback)(async()=>{try{let e=await fetch("/api/admin/system-settings");if(e.ok){let s=await e.json();s.success&&(eP(s.settings.boys_registration_enabled),ez(s.settings.maintenance_mode))}else console.error("Failed to fetch system settings:",e.status)}catch(e){console.error("Error fetching system settings:",e),eP(!0),ez(!1)}},[]);let eM=(0,r.useCallback)(async()=>{p(!0);try{await e$(!0)}finally{p(!1)}},[e$]),eI=(0,r.useCallback)(async()=>{console.log("Initializing admin panel..."),o(!0);try{console.log("Starting parallel fetch operations...");try{let e=await fetch("/api/admin/system-settings");if(e.ok){let s=await e.json();s.success&&(eP(s.settings.boys_registration_enabled),ez(s.settings.maintenance_mode))}}catch(e){console.error("Error fetching system settings:",e)}try{let e=await fetch("/api/admin/users?page=1&limit=10");if(e.ok){let s=await e.json();i(s.users||[]),eu(s.total||0),eD(new Date),eO(Date.now())}}catch(e){console.error("Error fetching users:",e),i([]),eu(0)}console.log("Admin panel initialization completed successfully")}catch(e){console.error("Failed to initialize admin panel:",e)}finally{o(!1),console.log("Loading state cleared")}},[]);(0,r.useEffect)(()=>{if(console.log("Session check running:",{session:e?.user?.email}),!e?.user?.email){console.log("No session found, redirecting to login"),s.push("/");return}if("cufy.online@gmail.com"!==e.user.email){console.log("Not admin user, redirecting to dashboard"),s.push("/dashboard");return}console.log("Admin user confirmed, initializing panel"),eI()},[e,s,eI]),(0,r.useEffect)(()=>{let e=setTimeout(()=>{y(g),H(1)},1200);return()=>clearTimeout(e)},[g]);let eF=async e=>{try{let s=await fetch(`/api/admin/notes?user_id=${e}`);if(s.ok){let e=await s.json();eg(e)}}catch(e){console.error("Error fetching admin notes:",e)}},eY=async(e,s,t)=>{try{let a=await fetch("/api/admin/user-actions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,action:s,data:t})});if(a.ok)return await e$(),!0;return!1}catch(e){return console.error("Error performing user action:",e),!1}},eB=async(e,s)=>{try{V(e),console.log("Confirming payment for user:",e,"amount:",s);let t=await fetch("/api/admin/payments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,action:"confirm"})}),a=await t.json();if(console.log("Payment confirmation result:",a),t.ok&&a.success)return alert("Payment confirmed successfully!"),await e$(),!0;return alert(a.error||"Failed to confirm payment. Please try again."),!1}catch(e){return console.error("Error confirming payment:",e),alert("Error confirming payment. Please try again."),!1}finally{V(null)}},eJ=async(e,s,t)=>await eY(e,"suspend",{reason:s,duration:t}),e4=async(e,s)=>await eY(e,"ban",{reason:s}),e5=async e=>{try{let s=await fetch("/api/admin/users/delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e})}),t=await s.json();if(t.success)return await e$(),alert("User deleted successfully!"),!0;return alert(t.error||"Failed to delete user"),!1}catch(e){return console.error("Error deleting user:",e),alert("An error occurred while deleting the user"),!1}},e1=async(s,t)=>{try{let a=e?.user?.email;if(!a)return alert("Admin authentication required"),!1;let r=await fetch("/api/admin/users/update",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:s,adminEmail:a,updates:t})}),l=await r.json();if(l.user)return await e$(),alert("User updated successfully!"),!0;return alert(l.error||"Failed to update user"),!1}catch(e){return console.error("Error updating user:",e),alert("An error occurred while updating the user"),!1}},e2=async e=>await eY(e,"verify"),e8=async e=>await eY(e,"reset_password"),e6=async(e,s,t)=>{try{let a=await fetch("/api/admin/bulk-actions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:e,userIds:Array.from(s),data:t})});if(a.ok)return await e$(),M(new Set),!0;return!1}catch(e){return console.error("Error performing bulk action:",e),!1}},e3=async(e,s,t)=>{ew(!0);try{let a=await fetch("/api/admin/notes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,note:s,type:t})});a.ok&&(await eF(e),ej(""),ef("system"))}catch(e){console.error("Error adding admin note:",e)}finally{ew(!1)}},e9=async(e,s)=>{try{let t=await fetch(`/api/admin/notes/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({note:s})});t.ok&&P&&(await eF(P.id),e_(null),eC(""))}catch(e){console.error("Error updating admin note:",e)}},e7=async e=>{try{let s=await fetch(`/api/admin/notes/${e}`,{method:"DELETE"});s.ok&&P&&await eF(P.id)}catch(e){console.error("Error deleting admin note:",e)}},se=(0,r.useMemo)(()=>t.filter(e=>{if(g){let s=g.toLowerCase(),t=e.full_name.toLowerCase().includes(s)||e.email.toLowerCase().includes(s)||e.university.toLowerCase().includes(s)||e.phone_number?.toLowerCase().includes(s)||e.instagram?.toLowerCase().includes(s);if(!t)return!1}return("all"===f.gender||e.gender===f.gender)&&("all"===f.status||e.status===f.status)&&("all"===f.verification||e.verification_status===f.verification)&&("all"===f.subscription||("none"!==f.subscription||!e.subscription_type)&&("none"===f.subscription||e.subscription_type===f.subscription))&&("all"===f.payment||("confirmed"!==f.payment||!!e.payment_confirmed)&&("review"!==f.payment||!!e.payment_proof_url&&!e.payment_confirmed)&&("none"!==f.payment||!e.payment_confirmed&&!e.payment_proof_url))&&(!f.university||!!e.university.toLowerCase().includes(f.university.toLowerCase()))&&!(e.age<f.age_range.min)&&!(e.age>f.age_range.max)}),[t,g,f]),ss=(0,r.useMemo)(()=>{let e=(W-1)*K;return se.slice(e,e+K)},[se,W,K]),st=Math.ceil(se.length/K);(0,r.useEffect)(()=>{let e=()=>{eL(!document.hidden)};return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)},[]),(0,r.useEffect)(()=>{if(!eE||!eR)return;let e=setInterval(()=>{d||h||!eR||(p(!0),e$(!0).finally(()=>p(!1)))},12e4);return()=>clearInterval(e)},[eE,d,h,e$,eR]),(0,r.useEffect)(()=>{let e=e=>{if(e.ctrlKey||e.metaKey)switch(e.key){case"f":e.preventDefault(),document.getElementById("search-input")?.focus();break;case"r":e.preventDefault(),eM();break;case"a":e.preventDefault(),e.shiftKey&&M(new Set(se.map(e=>e.id)))}"Escape"===e.key&&(M(new Set),E(!1),A(!1))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[se,eM]);let sa=async e=>{Z(e),await eF(e.id),E(!0)};return d?a.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:(0,a.jsxs)(l.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-gray-600 border-t-white rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-white text-lg font-medium",children:"Loading Admin Panel..."}),a.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Initializing dashboard components"})]})}):(0,a.jsxs)("div",{className:`min-h-screen bg-black ${B?"fixed inset-0 z-50":""}`,children:[a.jsx(l.E.header,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},className:"bg-black/95 backdrop-blur-xl border-b border-gray-800 sticky top-0 z-40 shadow-2xl",children:a.jsx("div",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center shadow-lg border border-gray-700",children:a.jsx(es.Z,{className:"h-6 w-6 text-white"})}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-white",children:"Admin Panel"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Professional user management system"})]})]}),eA&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-400",children:[a.jsx(et.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:["Last updated: ",eA.toLocaleTimeString()]}),h&&a.jsx("div",{className:"w-3 h-3 border border-purple-400 border-t-transparent rounded-full animate-spin"})]}),eT&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-green-400",children:[a.jsx(ea.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:["Cache: ",Math.round((Date.now()-eT)/1e3),"s ago"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)(u.z,{onClick:()=>eU(!eE),variant:"outline",size:"sm",className:`border-white/20 text-white hover:bg-white/10 ${eE?"bg-green-500/20 border-green-500":"bg-gray-500/20 border-gray-500"}`,children:[a.jsx(et.Z,{className:"h-4 w-4 mr-2"}),"Real-time ",eE?"ON":"OFF (Performance Mode)"]}),(0,a.jsxs)(u.z,{onClick:eM,disabled:h,variant:"outline",size:"sm",className:"border-white/20 text-white hover:bg-white/10",children:[a.jsx(er.Z,{className:`h-4 w-4 mr-2 ${h?"animate-spin":""}`}),"Refresh"]}),a.jsx(u.z,{onClick:()=>J(!B),variant:"outline",size:"sm",className:"border-white/20 text-white hover:bg-white/10",children:B?a.jsx(el.Z,{className:"h-4 w-4"}):a.jsx(ei.Z,{className:"h-4 w-4"})}),(0,a.jsxs)(u.z,{onClick:()=>(0,n.signOut)({callbackUrl:"/"}),variant:"outline",size:"sm",className:"border-white/20 text-white hover:bg-white/10",children:[a.jsx(en.Z,{className:"h-4 w-4 mr-2"}),"Exit Admin"]})]})]})})}),a.jsx("div",{className:"px-6 py-6",children:(0,a.jsxs)(x.mQ,{value:"dashboard"===v?"users":v,onValueChange:S,className:"w-full",children:[(0,a.jsxs)(x.dr,{className:"grid w-full grid-cols-4 bg-black/90 backdrop-blur-xl border border-gray-800 mb-6",children:[(0,a.jsxs)(x.SP,{value:"users",className:"data-[state=active]:bg-gray-800 text-white",children:[a.jsx(ec.Z,{className:"h-4 w-4 mr-2"}),"Users (",ee,")"]}),(0,a.jsxs)(x.SP,{value:"payments",className:"data-[state=active]:bg-gray-800 text-white",children:[a.jsx(ed.Z,{className:"h-4 w-4 mr-2"}),"Payments"]}),(0,a.jsxs)(x.SP,{value:"system",className:"data-[state=active]:bg-gray-800 text-white",children:[a.jsx(eo.Z,{className:"h-4 w-4 mr-2"}),"System"]}),(0,a.jsxs)(x.SP,{value:"logs",className:"data-[state=active]:bg-gray-800 text-white",children:[a.jsx(em.Z,{className:"h-4 w-4 mr-2"}),"Logs"]})]}),a.jsx(x.nU,{value:"users",children:a.jsx(eq,{users:ss,filteredUsers:se,totalUsers:ee,searchTerm:g,setSearchTerm:b,filters:f,setFilters:w,selectedUsers:$,setSelectedUsers:M,viewMode:I,setViewMode:F,showAdvancedFilters:Y,setShowAdvancedFilters:q,currentPage:W,setCurrentPage:H,usersPerPage:K,setUsersPerPage:X,totalPages:st,onUserSelect:(e,s)=>{let t=new Set($);s?t.add(e):t.delete(e),M(t)},onSelectAll:e=>{e?M(new Set(ss.map(e=>e.id))):M(new Set)},onUserDetail:sa,onPaymentDetail:e=>{Z(e),A(!0)},onBulkAction:e6,onDeleteUser:e5})}),a.jsx(x.nU,{value:"payments",children:a.jsx(eG,{users:t,onConfirmPayment:eB,paymentLoading:L,setSelectedPaymentProof:R})}),a.jsx(x.nU,{value:"system",children:a.jsx(eQ,{boysRegistrationEnabled:eS,setBoysRegistrationEnabled:eP,systemMaintenanceMode:eZ,setSystemMaintenanceMode:ez})}),a.jsx(x.nU,{value:"logs",children:a.jsx(eW,{})})]})}),a.jsx(eH,{user:P,open:z,onOpenChange:E,adminNotes:ep,newNote:eb,setNewNote:ej,newNoteType:ey,setNewNoteType:ef,isAddingNote:eN,editingNoteId:ev,editingNoteText:ek,setEditingNoteId:e_,setEditingNoteText:eC,onAddNote:e3,onUpdateNote:e9,onDeleteNote:e7,onConfirmPayment:eB,onSuspendUser:eJ,onBanUser:e4,onDeleteUser:e5,onEditUser:e1,onVerifyUser:e2,onResetPassword:e8,setSelectedFullPhoto:Q}),a.jsx(eX,{user:P,open:U,onOpenChange:A,onConfirmPayment:eB}),a.jsx(e0,{open:D,onOpenChange:T,selectedUsers:$,onBulkAction:e6}),a.jsx(N,{open:!!O,onOpenChange:()=>R(null),children:(0,a.jsxs)(_,{className:"max-w-4xl max-h-[90vh] bg-gray-900/95 backdrop-blur-xl border border-gray-700",children:[a.jsx(k,{children:(0,a.jsxs)(C,{className:"text-xl font-bold text-white flex items-center space-x-2",children:[a.jsx(ex.Z,{className:"h-5 w-5 text-blue-400"}),(0,a.jsxs)("span",{children:["Payment Proof - ",O?.user]})]})}),a.jsx("div",{className:"flex items-center justify-center p-4 bg-black/50 rounded-lg",children:O?.url&&a.jsx(m(),{src:O.url,alt:"Payment Proof",width:800,height:600,className:"max-w-full max-h-[70vh] object-contain rounded-lg",style:{width:"auto",height:"auto"}})}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,a.jsxs)(u.z,{onClick:()=>window.open(O?.url,"_blank"),variant:"outline",className:"border-blue-500 text-blue-400 hover:bg-blue-500/10",children:[a.jsx(eh.Z,{className:"h-4 w-4 mr-2"}),"Open in New Tab"]}),a.jsx(u.z,{onClick:()=>R(null),variant:"outline",className:"border-white/20 text-white hover:bg-white/10",children:"Close"})]})]})}),a.jsx(eK,{photo:G,open:!!G,onOpenChange:()=>Q(null)})]})}function eq({users:e,filteredUsers:s,totalUsers:t,searchTerm:r,setSearchTerm:n,filters:c,setFilters:d,selectedUsers:o,setSelectedUsers:m,viewMode:x,setViewMode:g,showAdvancedFilters:b,setShowAdvancedFilters:j,currentPage:y,setCurrentPage:f,usersPerPage:N,setUsersPerPage:w,totalPages:v,onUserSelect:_,onSelectAll:k,onUserDetail:C,onPaymentDetail:S,onBulkAction:P,onDeleteUser:Z}){return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between bg-black/40 backdrop-blur-xl border border-white/10 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"text-white text-sm",children:["Showing ",(y-1)*N+1," to ",Math.min(y*N,s.length)," of ",s.length," users"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(u.z,{onClick:()=>f(Math.max(1,y-1)),disabled:1===y,variant:"outline",size:"sm",className:"border-white/20 text-white hover:bg-white/10",children:a.jsx(en.Z,{className:"h-4 w-4"})}),(0,a.jsxs)("span",{className:"text-white px-3 py-1",children:["Page ",y," of ",v]}),a.jsx(u.z,{onClick:()=>f(Math.min(v,y+1)),disabled:y===v,variant:"outline",size:"sm",className:"border-white/20 text-white hover:bg-white/10",children:a.jsx(eu.Z,{className:"h-4 w-4"})})]})]}),a.jsx(h.Zb,{className:"bg-black/40 backdrop-blur-xl border-white/10",children:(0,a.jsxs)(h.aY,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[a.jsx("div",{className:"flex-1 max-w-md",children:(0,a.jsxs)("div",{className:"relative",children:[a.jsx(ep.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx(p.I,{id:"search-input",placeholder:"Search users by name, email, university...",value:r,onChange:e=>n(e.target.value),className:"pl-10 bg-white/5 border-white/20 text-white placeholder-gray-400"})]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)(u.z,{onClick:()=>j(!b),variant:"outline",size:"sm",className:"border-white/20 text-white hover:bg-white/10",children:[a.jsx(eg.Z,{className:"h-4 w-4 mr-2"}),"Advanced Filters",b?a.jsx(F.Z,{className:"h-4 w-4 ml-2"}):a.jsx(I.Z,{className:"h-4 w-4 ml-2"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 border border-white/20 rounded-lg p-1",children:[a.jsx(u.z,{onClick:()=>g("table"),variant:"table"===x?"default":"ghost",size:"sm",className:"h-8 w-8 p-0",children:a.jsx(eb.Z,{className:"h-4 w-4"})}),a.jsx(u.z,{onClick:()=>g("grid"),variant:"grid"===x?"default":"ghost",size:"sm",className:"h-8 w-8 p-0",children:a.jsx(ej.Z,{className:"h-4 w-4"})})]}),o.size>0&&(0,a.jsxs)(u.z,{variant:"outline",size:"sm",className:"border-purple-500 text-purple-400 hover:bg-purple-500/10",children:[a.jsx(ey.Z,{className:"h-4 w-4 mr-2"}),"Bulk Actions (",o.size,")"]})]})]}),a.jsx(i.M,{children:b&&a.jsx(l.E.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"mt-6 pt-6 border-t border-white/10",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Gender"}),(0,a.jsxs)(q,{value:c.gender,onValueChange:e=>d({...c,gender:e}),children:[a.jsx(J,{className:"bg-white/5 border-white/20 text-white",children:a.jsx(B,{})}),(0,a.jsxs)(W,{children:[a.jsx(K,{value:"all",children:"All Genders"}),a.jsx(K,{value:"male",children:"Male"}),a.jsx(K,{value:"female",children:"Female"})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Status"}),(0,a.jsxs)(q,{value:c.status,onValueChange:e=>d({...c,status:e}),children:[a.jsx(J,{className:"bg-white/5 border-white/20 text-white",children:a.jsx(B,{})}),(0,a.jsxs)(W,{children:[a.jsx(K,{value:"all",children:"All Status"}),a.jsx(K,{value:"active",children:"Active"}),a.jsx(K,{value:"suspended",children:"Suspended"}),a.jsx(K,{value:"banned",children:"Banned"}),a.jsx(K,{value:"pending",children:"Pending"})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Verification"}),(0,a.jsxs)(q,{value:c.verification,onValueChange:e=>d({...c,verification:e}),children:[a.jsx(J,{className:"bg-white/5 border-white/20 text-white",children:a.jsx(B,{})}),(0,a.jsxs)(W,{children:[a.jsx(K,{value:"all",children:"All Verification"}),a.jsx(K,{value:"verified",children:"Verified"}),a.jsx(K,{value:"pending",children:"Pending"}),a.jsx(K,{value:"rejected",children:"Rejected"})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Subscription"}),(0,a.jsxs)(q,{value:c.subscription,onValueChange:e=>d({...c,subscription:e}),children:[a.jsx(J,{className:"bg-white/5 border-white/20 text-white",children:a.jsx(B,{})}),(0,a.jsxs)(W,{children:[a.jsx(K,{value:"all",children:"All Subscriptions"}),a.jsx(K,{value:"basic",children:"Basic"}),a.jsx(K,{value:"premium",children:"Premium"}),a.jsx(K,{value:"none",children:"No Subscription"})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Payment Status"}),(0,a.jsxs)(q,{value:c.payment,onValueChange:e=>d({...c,payment:e}),children:[a.jsx(J,{className:"bg-white/5 border-white/20 text-white",children:a.jsx(B,{})}),(0,a.jsxs)(W,{children:[a.jsx(K,{value:"all",children:"All Payments"}),a.jsx(K,{value:"confirmed",children:"Confirmed"}),a.jsx(K,{value:"review",children:"Under Review"}),a.jsx(K,{value:"none",children:"No Payment"})]})]})]})]})})})]})}),a.jsx(h.Zb,{className:"bg-black/40 backdrop-blur-xl border-white/10",children:a.jsx(h.aY,{className:"p-0",children:"table"===x?a.jsx(eB,{users:e,selectedUsers:o,onUserSelect:_,onSelectAll:k,onUserDetail:C,onPaymentDetail:S,onDeleteUser:Z}):a.jsx(eJ,{users:e,selectedUsers:o,onUserSelect:_,onUserDetail:C,onPaymentDetail:S,onDeleteUser:Z})})})]})}function eB({users:e,selectedUsers:s,onUserSelect:t,onSelectAll:r,onUserDetail:l,onPaymentDetail:i,onDeleteUser:n}){return a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-white/5 border-b border-white/10",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"text-left p-4",children:a.jsx("input",{type:"checkbox",checked:e.length>0&&e.every(e=>s.has(e.id)),onChange:e=>r(e.target.checked),className:"rounded border-white/20 bg-white/5 text-gray-400"})}),a.jsx("th",{className:"text-left p-4 text-white font-medium",children:"User"}),a.jsx("th",{className:"text-left p-4 text-white font-medium",children:"Status"}),a.jsx("th",{className:"text-left p-4 text-white font-medium",children:"Subscription"}),a.jsx("th",{className:"text-left p-4 text-white font-medium",children:"Payment"}),a.jsx("th",{className:"text-left p-4 text-white font-medium",children:"Joined"}),a.jsx("th",{className:"text-left p-4 text-white font-medium",children:"Actions"})]})}),a.jsx("tbody",{children:e.map(e=>(0,a.jsxs)("tr",{className:"border-b border-white/5 hover:bg-white/5",children:[a.jsx("td",{className:"p-4",children:a.jsx("input",{type:"checkbox",checked:s.has(e.id),onChange:s=>t(e.id,s.target.checked),className:"rounded border-white/20 bg-white/5 text-gray-400"})}),a.jsx("td",{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)(b.qE,{className:"h-10 w-10",children:[a.jsx(b.F$,{src:e.profile_photo}),a.jsx(b.Q5,{children:e.full_name.charAt(0)})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-white font-medium",children:e.full_name}),a.jsx("p",{className:"text-gray-400 text-sm",children:e.email}),a.jsx("p",{className:"text-gray-400 text-sm",children:e.university})]})]})}),a.jsx("td",{className:"p-4",children:(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx(g.C,{variant:"secondary",className:`${"active"===e.status?"bg-green-500/20 text-green-400 border-green-500/50":"suspended"===e.status?"bg-yellow-500/20 text-yellow-400 border-yellow-500/50":"banned"===e.status?"bg-red-500/20 text-red-400 border-red-500/50":"bg-gray-500/20 text-gray-400 border-gray-500/50"}`,children:e.status}),a.jsx(g.C,{variant:"secondary",className:`${"verified"===e.verification_status?"bg-blue-500/20 text-blue-400 border-blue-500/50":"pending"===e.verification_status?"bg-yellow-500/20 text-yellow-400 border-yellow-500/50":"bg-red-500/20 text-red-400 border-red-500/50"}`,children:e.verification_status})]})}),a.jsx("td",{className:"p-4",children:e.subscription_type?(0,a.jsxs)(g.C,{variant:"secondary",className:"bg-purple-500/20 text-purple-400 border-purple-500/50",children:[a.jsx(ef.Z,{className:"h-3 w-3 mr-1"}),e.subscription_type]}):a.jsx("span",{className:"text-gray-400",children:"No subscription"})}),a.jsx("td",{className:"p-4",children:e.payment_confirmed?(0,a.jsxs)(g.C,{className:"bg-green-500/20 text-green-400 border-green-500/50",children:[a.jsx(eN.Z,{className:"h-3 w-3 mr-1"}),"Confirmed"]}):e.payment_proof_url?(0,a.jsxs)(u.z,{onClick:()=>i(e),variant:"outline",size:"sm",className:"border-yellow-500 text-yellow-400 hover:bg-yellow-500/10",children:[a.jsx(ew.Z,{className:"h-3 w-3 mr-1"}),"Review"]}):a.jsx("span",{className:"text-gray-400",children:"No payment"})}),(0,a.jsxs)("td",{className:"p-4",children:[a.jsx("p",{className:"text-white text-sm",children:new Date(e.created_at).toLocaleDateString()}),a.jsx("p",{className:"text-gray-400 text-xs",children:new Date(e.created_at).toLocaleTimeString()})]}),a.jsx("td",{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(u.z,{onClick:()=>l(e),variant:"outline",size:"sm",className:"border-blue-500 text-blue-400 hover:bg-blue-500/10",children:[a.jsx(ex.Z,{className:"h-3 w-3 mr-1"}),"View Profile"]}),(0,a.jsxs)(z,{children:[a.jsx(E,{asChild:!0,children:(0,a.jsxs)(u.z,{variant:"outline",size:"sm",className:"border-red-500 text-red-400 hover:bg-red-500/10",children:[a.jsx(ev.Z,{className:"h-3 w-3 mr-1"}),"Delete"]})}),(0,a.jsxs)(D,{className:"bg-gray-900 border-gray-700",children:[(0,a.jsxs)(T,{children:[a.jsx(R,{className:"text-white",children:"Delete User"}),(0,a.jsxs)(L,{className:"text-gray-400",children:["Are you sure you want to permanently delete ",e.full_name,"? This action cannot be undone."]})]}),(0,a.jsxs)(O,{children:[a.jsx($,{className:"border-white/20 text-white hover:bg-white/10",children:"Cancel"}),a.jsx(V,{onClick:()=>n(e.id),className:"bg-red-600 hover:bg-red-700",children:"Delete User"})]})]})]})]})})]},e.id))})]})})}function eJ({users:e,selectedUsers:s,onUserSelect:t,onUserDetail:r,onPaymentDetail:i,onDeleteUser:n}){return a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 p-6",children:e.map(e=>(0,a.jsxs)(l.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white/5 border border-white/10 rounded-lg p-4 hover:border-white/20 transition-all duration-300",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("input",{type:"checkbox",checked:s.has(e.id),onChange:s=>t(e.id,s.target.checked),className:"rounded border-white/20 bg-white/5 text-gray-400"}),(0,a.jsxs)("div",{className:"flex space-x-1",children:[a.jsx(u.z,{onClick:()=>r(e),variant:"outline",size:"sm",className:"border-blue-500 text-blue-400 hover:bg-blue-500/10 h-7 px-2",children:a.jsx(ex.Z,{className:"h-3 w-3"})}),(0,a.jsxs)(z,{children:[a.jsx(E,{asChild:!0,children:a.jsx(u.z,{variant:"outline",size:"sm",className:"border-red-500 text-red-400 hover:bg-red-500/10 h-7 px-2",children:a.jsx(ev.Z,{className:"h-3 w-3"})})}),(0,a.jsxs)(D,{className:"bg-gray-900 border-gray-700",children:[(0,a.jsxs)(T,{children:[a.jsx(R,{className:"text-white",children:"Delete User"}),(0,a.jsxs)(L,{className:"text-gray-400",children:["Are you sure you want to permanently delete ",e.full_name,"? This action cannot be undone."]})]}),(0,a.jsxs)(O,{children:[a.jsx($,{className:"border-white/20 text-white hover:bg-white/10",children:"Cancel"}),a.jsx(V,{onClick:()=>n(e.id),className:"bg-red-600 hover:bg-red-700",children:"Delete User"})]})]})]})]})]}),(0,a.jsxs)("div",{className:"text-center mb-4",children:[(0,a.jsxs)(b.qE,{className:"h-16 w-16 mx-auto mb-3",children:[a.jsx(b.F$,{src:e.profile_photo}),a.jsx(b.Q5,{children:e.full_name.charAt(0)})]}),a.jsx("h3",{className:"text-white font-medium",children:e.full_name}),(0,a.jsxs)("p",{className:"text-gray-400 text-sm",children:[e.age," years"]}),a.jsx("p",{className:"text-gray-400 text-xs",children:e.university})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-400 text-sm",children:"Status:"}),a.jsx(g.C,{variant:"secondary",className:`${"active"===e.status?"bg-green-500/20 text-green-400 border-green-500/50":"suspended"===e.status?"bg-yellow-500/20 text-yellow-400 border-yellow-500/50":"banned"===e.status?"bg-red-500/20 text-red-400 border-red-500/50":"bg-gray-500/20 text-gray-400 border-gray-500/50"}`,children:e.status})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-400 text-sm",children:"Payment:"}),e.payment_confirmed?(0,a.jsxs)(g.C,{className:"bg-green-500/20 text-green-400 border-green-500/50 text-xs",children:[a.jsx(eN.Z,{className:"h-2 w-2 mr-1"}),"Confirmed"]}):e.payment_proof_url?a.jsx(u.z,{onClick:()=>i(e),variant:"outline",size:"sm",className:"border-yellow-500 text-yellow-400 hover:bg-yellow-500/10 text-xs h-6",children:"Review"}):a.jsx("span",{className:"text-gray-400 text-xs",children:"None"})]})]})]},e.id))})}function eG({users:e,onConfirmPayment:s,paymentLoading:t,setSelectedPaymentProof:r}){let l=e.filter(e=>e.payment_proof_url&&!e.payment_confirmed),i=e.filter(e=>e.payment_confirmed),n=e.filter(e=>"basic"===e.subscription_type&&e.payment_confirmed),c=e.filter(e=>"premium"===e.subscription_type&&e.payment_confirmed);console.log("Total users count:",e.length),console.log("Premium users with confirmed payment:",c.length),console.log("Basic users with confirmed payment:",n.length),console.log("Sample users:",e.slice(0,5).map(e=>({email:e.email,subscription_type:e.subscription_type,payment_confirmed:e.payment_confirmed})));let d=i.reduce((e,s)=>"basic"===s.subscription_type?e+99:"premium"===s.subscription_type?e+249:e,0);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[a.jsx(h.Zb,{className:"bg-black/40 backdrop-blur-xl border-white/10",children:a.jsx(h.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"Pending Reviews"}),a.jsx("p",{className:"text-2xl font-bold text-yellow-400 mt-1",children:l.length})]}),a.jsx(ew.Z,{className:"h-8 w-8 text-yellow-400/60"})]})})}),a.jsx(h.Zb,{className:"bg-black/40 backdrop-blur-xl border-white/10",children:a.jsx(h.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"Confirmed Payments"}),a.jsx("p",{className:"text-2xl font-bold text-green-400 mt-1",children:i.length})]}),a.jsx(eN.Z,{className:"h-8 w-8 text-green-400/60"})]})})}),a.jsx(h.Zb,{className:"bg-black/40 backdrop-blur-xl border-white/10",children:a.jsx(h.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"Paid Basic Users"}),a.jsx("p",{className:"text-2xl font-bold text-blue-400 mt-1",children:n.length})]}),a.jsx(ec.Z,{className:"h-8 w-8 text-blue-400/60"})]})})}),a.jsx(h.Zb,{className:"bg-black/40 backdrop-blur-xl border-white/10",children:a.jsx(h.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"Paid Premium Users"}),a.jsx("p",{className:"text-2xl font-bold text-purple-400 mt-1",children:c.length})]}),a.jsx(ef.Z,{className:"h-8 w-8 text-purple-400/60"})]})})}),a.jsx(h.Zb,{className:"bg-black/40 backdrop-blur-xl border-white/10",children:a.jsx(h.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"Total Revenue"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-emerald-400 mt-1",children:["₹",d.toLocaleString()]})]}),a.jsx(e_.Z,{className:"h-8 w-8 text-emerald-400/60"})]})})})]}),(0,a.jsxs)(h.Zb,{className:"bg-black/40 backdrop-blur-xl border-white/10",children:[a.jsx(h.Ol,{children:(0,a.jsxs)(h.ll,{className:"text-white flex items-center",children:[a.jsx(ew.Z,{className:"h-5 w-5 mr-2"}),"Pending Payment Reviews (",l.length,")"]})}),a.jsx(h.aY,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[l.map(e=>a.jsx("div",{className:"bg-white/5 border border-white/10 rounded-lg p-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)(b.qE,{className:"h-16 w-16",children:[a.jsx(b.F$,{src:e.profile_photo}),a.jsx(b.Q5,{children:e.full_name.charAt(0)})]}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-white font-medium text-lg",children:e.full_name}),a.jsx("p",{className:"text-gray-400 text-sm",children:e.email}),a.jsx("p",{className:"text-gray-400 text-sm",children:e.university}),a.jsx("div",{className:"mt-2",children:(0,a.jsxs)(g.C,{className:"bg-purple-500/20 text-purple-400",children:[e.subscription_type," plan - ₹","basic"===e.subscription_type?"99":"249"]})})]})]}),a.jsx("div",{className:"flex items-center space-x-3",children:(0,a.jsxs)(u.z,{onClick:()=>s(e.id,"basic"===e.subscription_type?99:249),disabled:t===e.id,className:"bg-green-600 hover:bg-green-700 text-white disabled:opacity-50 disabled:cursor-not-allowed",children:[t===e.id?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):a.jsx(eN.Z,{className:"h-4 w-4 mr-2"}),t===e.id?"Processing...":"Confirm Payment"]})})]}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"text-white font-medium mb-3",children:"Payment Proof"}),e.payment_proof_url?(0,a.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4 text-center",children:[(0,a.jsxs)(u.z,{onClick:()=>r({url:e.payment_proof_url?eF(e.payment_proof_url):null,user:e.full_name}),variant:"outline",className:"border-blue-500 text-blue-400 hover:bg-blue-500/10 w-full",children:[a.jsx(ex.Z,{className:"h-4 w-4 mr-2"}),"View Payment Proof"]}),a.jsx("p",{className:"text-gray-400 text-xs mt-2",children:"Click to view full proof image"})]}):a.jsx("div",{className:"bg-gray-500/20 border border-gray-500/30 rounded-lg p-6 text-center",children:a.jsx("p",{className:"text-gray-400",children:"No payment proof uploaded"})})]})]})},e.id)),0===l.length&&(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx(eN.Z,{className:"h-12 w-12 text-green-400 mx-auto mb-3"}),a.jsx("p",{className:"text-white font-medium",children:"No pending payment reviews"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"All payments have been processed"})]})]})})]})]})}function eQ({boysRegistrationEnabled:e,setBoysRegistrationEnabled:s,systemMaintenanceMode:t,setSystemMaintenanceMode:r}){return a.jsx("div",{className:"space-y-6",children:(0,a.jsxs)(h.Zb,{className:"bg-black/40 backdrop-blur-xl border-white/10",children:[a.jsx(h.Ol,{children:a.jsx(h.ll,{className:"text-white",children:"System Controls"})}),(0,a.jsxs)(h.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-white font-medium",children:"Boys Registration"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Control whether new male users can register"})]}),(0,a.jsxs)(u.z,{onClick:async()=>{try{let e=await fetch("/api/admin/system-settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"toggle_boys_registration"})}),t=await e.json();t.success?(s(t.new_value),alert(t.message)):alert(t.error||"Failed to toggle boys registration")}catch(e){console.error("Error toggling boys registration:",e),alert("An error occurred while updating the setting")}},variant:"outline",className:`${e?"border-green-500 text-green-400":"border-red-500 text-red-400"}`,children:[e?a.jsx(ek.Z,{className:"h-4 w-4 mr-2"}):a.jsx(eC.Z,{className:"h-4 w-4 mr-2"}),e?"Enabled":"Disabled"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-white font-medium",children:"Maintenance Mode"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Enable maintenance mode for system updates"})]}),(0,a.jsxs)(u.z,{onClick:()=>r(!t),variant:"outline",className:`${t?"border-yellow-500 text-yellow-400":"border-green-500 text-green-400"}`,children:[t?a.jsx(eS.Z,{className:"h-4 w-4 mr-2"}):a.jsx(eN.Z,{className:"h-4 w-4 mr-2"}),t?"Maintenance":"Operational"]})]})]})]})})}function eW(){return a.jsx("div",{className:"space-y-6",children:(0,a.jsxs)(h.Zb,{className:"bg-black/40 backdrop-blur-xl border-white/10",children:[a.jsx(h.Ol,{children:a.jsx(h.ll,{className:"text-white",children:"System Logs"})}),a.jsx(h.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),a.jsx("span",{className:"text-white",children:"User registration successful"}),a.jsx("span",{className:"text-gray-400 text-sm ml-auto",children:"2 minutes ago"})]})}),a.jsx("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),a.jsx("span",{className:"text-white",children:"Payment confirmed for user"}),a.jsx("span",{className:"text-gray-400 text-sm ml-auto",children:"5 minutes ago"})]})}),a.jsx("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),a.jsx("span",{className:"text-white",children:"Admin login detected"}),a.jsx("span",{className:"text-gray-400 text-sm ml-auto",children:"10 minutes ago"})]})})]})})]})})}function eH({user:e,open:s,onOpenChange:t,adminNotes:l,newNote:i,setNewNote:n,newNoteType:c,setNewNoteType:d,isAddingNote:o,editingNoteId:m,editingNoteText:x,setEditingNoteId:j,setEditingNoteText:f,onAddNote:w,onUpdateNote:v,onDeleteNote:S,onConfirmPayment:P,onSuspendUser:Z,onBanUser:U,onDeleteUser:A,onEditUser:M,onVerifyUser:I,onResetPassword:F,setSelectedFullPhoto:Y}){let[G,Q]=(0,r.useState)(!1),[H,X]=(0,r.useState)({}),[es,et]=(0,r.useState)(!1);(0,r.useEffect)(()=>{e&&X({name:e.name||"",email:e.email||"",phone:e.phone||"",college:e.college||"",year:e.year||"",course:e.course||"",branch:e.branch||"",age:e.age||"",height:e.height||"",location:e.location||"",interests:e.interests||"",relationship_status:e.relationship_status||"",instagram:e.instagram||"",subscription_type:e.subscription_type||"basic",is_payment_verified:e.is_payment_verified||!1,points:e.points||0,is_active:!1!==e.is_active})},[e]);let ea=async()=>{et(!0);try{let s=await M(e.id,H);s&&Q(!1)}catch(e){console.error("Error updating user:",e)}finally{et(!1)}};return e?a.jsx(N,{open:s,onOpenChange:t,children:(0,a.jsxs)(_,{className:"max-w-7xl max-h-[95vh] bg-black/95 backdrop-blur-xl border border-gray-800",children:[a.jsx(k,{className:"border-b border-gray-800 pb-4",children:(0,a.jsxs)(C,{className:"text-2xl font-bold text-white flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:a.jsx(eP.Z,{className:"h-5 w-5 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{children:["User Profile: ",e.full_name]}),a.jsx("p",{className:"text-sm text-gray-400 font-normal",children:"Complete user management and information"})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 py-6 max-h-[75vh] overflow-y-auto",children:[a.jsx("div",{className:"lg:col-span-1",children:a.jsx(h.Zb,{className:"bg-gray-900/80 border-gray-800 shadow-2xl",children:(0,a.jsxs)(h.aY,{className:"p-8 text-center",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)(b.qE,{className:"h-48 w-48 mx-auto cursor-pointer ring-4 ring-blue-500/20 hover:ring-blue-500/40 transition-all duration-300",onClick:()=>e.profile_photo&&Y({url:e.profile_photo,name:e.full_name}),children:[a.jsx(b.F$,{src:e.profile_photo,className:"object-cover"}),a.jsx(b.Q5,{className:"text-6xl bg-gradient-to-br from-gray-700 to-gray-800 text-white",children:e.full_name.charAt(0)})]}),e.profile_photo&&a.jsx("p",{className:"text-gray-400 text-xs mt-3",children:"Click to view full size"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:e.full_name}),(0,a.jsxs)("p",{className:"text-gray-400 text-lg",children:[e.age," years old • ",e.gender]}),a.jsx("p",{className:"text-blue-400 font-medium",children:e.university})]})]})})}),(0,a.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,a.jsxs)(h.Zb,{className:"bg-gray-900/80 border-gray-800 shadow-xl",children:[a.jsx(h.Ol,{className:"border-b border-gray-800",children:(0,a.jsxs)(h.ll,{className:"text-white text-xl flex items-center",children:[a.jsx(eZ.Z,{className:"h-5 w-5 mr-3 text-blue-400"}),"Contact Information"]})}),(0,a.jsxs)(h.aY,{className:"p-6 space-y-5",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-5",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-gray-400 text-sm font-medium",children:"Email Address"}),G?a.jsx(p.I,{value:H.email,onChange:e=>X({...H,email:e.target.value}),className:"bg-gray-800/50 border-gray-700 text-white"}):(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(eZ.Z,{className:"h-4 w-4 text-blue-400"}),a.jsx("p",{className:"text-white font-medium",children:e.email})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-gray-400 text-sm font-medium",children:"Full Name"}),G?a.jsx(p.I,{value:H.name,onChange:e=>X({...H,name:e.target.value}),className:"bg-gray-800/50 border-gray-700 text-white"}):(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(eP.Z,{className:"h-4 w-4 text-blue-400"}),a.jsx("p",{className:"text-white font-medium",children:e.name||e.full_name})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-gray-400 text-sm font-medium",children:"College"}),G?a.jsx(p.I,{value:H.college,onChange:e=>X({...H,college:e.target.value}),className:"bg-gray-800/50 border-gray-700 text-white"}):(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(ez.Z,{className:"h-4 w-4 text-purple-400"}),a.jsx("p",{className:"text-white font-medium",children:e.college||e.university})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-gray-400 text-sm font-medium",children:"Year of Study"}),G?a.jsx(p.I,{value:H.year,onChange:e=>X({...H,year:e.target.value}),className:"bg-gray-800/50 border-gray-700 text-white"}):(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(eE.Z,{className:"h-4 w-4 text-green-400"}),a.jsx("p",{className:"text-white font-medium",children:e.year||e.year_of_study||"Not specified"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-gray-400 text-sm font-medium",children:"Phone Number"}),G?a.jsx(p.I,{value:H.phone,onChange:e=>X({...H,phone:e.target.value}),className:"bg-gray-800/50 border-gray-700 text-white"}):(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(eU.Z,{className:"h-4 w-4 text-orange-400"}),a.jsx("p",{className:"text-white font-medium",children:e.phone||e.phone_number||"Not provided"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-gray-400 text-sm font-medium",children:"Instagram"}),G?a.jsx(p.I,{value:H.instagram,onChange:e=>X({...H,instagram:e.target.value}),className:"bg-gray-800/50 border-gray-700 text-white",placeholder:"@username"}):(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(eA.Z,{className:"h-4 w-4 text-pink-400"}),a.jsx("p",{className:"text-white font-medium",children:e.instagram?`@${e.instagram}`:"Not provided"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-gray-400 text-sm font-medium",children:"Age"}),G?a.jsx(p.I,{type:"number",value:H.age,onChange:e=>X({...H,age:e.target.value}),className:"bg-gray-800/50 border-gray-700 text-white"}):(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(eD.Z,{className:"h-4 w-4 text-yellow-400"}),a.jsx("p",{className:"text-white font-medium",children:e.age||"Not specified"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-gray-400 text-sm font-medium",children:"Height"}),G?a.jsx(p.I,{value:H.height,onChange:e=>X({...H,height:e.target.value}),className:"bg-gray-800/50 border-gray-700 text-white",placeholder:"e.g., 5'8"}):(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(eT.Z,{className:"h-4 w-4 text-green-400"}),a.jsx("p",{className:"text-white font-medium",children:e.height||"Not specified"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2 pt-4 border-t border-gray-800",children:[a.jsx("label",{className:"text-gray-400 text-sm font-medium",children:"Bio"}),G?a.jsx(ee.g,{value:H.interests,onChange:e=>X({...H,interests:e.target.value}),className:"bg-gray-800/50 border-gray-700 text-white min-h-[100px]",placeholder:"Tell us about yourself..."}):a.jsx("div",{className:"bg-gray-800/50 rounded-lg p-4",children:a.jsx("p",{className:"text-white",children:e.bio||e.interests||"No bio provided"})})]})]})]}),(0,a.jsxs)(h.Zb,{className:"bg-gray-900/80 border-gray-800 shadow-xl",children:[a.jsx(h.Ol,{className:"border-b border-gray-800",children:(0,a.jsxs)(h.ll,{className:"text-white text-xl flex items-center",children:[a.jsx(ed.Z,{className:"h-5 w-5 mr-3 text-green-400"}),"Subscription & Payment"]})}),a.jsx(h.aY,{className:"p-6 space-y-6",children:e.subscription_type?(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-purple-500/10 border border-purple-500/20 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(ef.Z,{className:"h-6 w-6 text-purple-400"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-white font-semibold",children:[e.subscription_type?.toUpperCase()||"FREE"," Plan"]}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Premium subscription active"})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-purple-400 font-bold text-xl",children:["₹","basic"===e.subscription_type?"99":"249"]}),a.jsx("p",{className:"text-gray-400 text-xs",children:"one-time"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-400 font-medium",children:"Payment Status"}),e.payment_confirmed?(0,a.jsxs)(g.C,{className:"bg-green-500/20 text-green-400 border-green-500/50 px-4 py-2",children:[a.jsx(eN.Z,{className:"h-4 w-4 mr-2"}),"CONFIRMED"]}):e.payment_proof_url?(0,a.jsxs)(g.C,{className:"bg-yellow-500/20 text-yellow-400 border-yellow-500/50 px-4 py-2",children:[a.jsx(ew.Z,{className:"h-4 w-4 mr-2"}),"PENDING REVIEW"]}):(0,a.jsxs)(g.C,{className:"bg-gray-500/20 text-gray-400 border-gray-500/50 px-4 py-2",children:[a.jsx(y.Z,{className:"h-4 w-4 mr-2"}),"NO PAYMENT"]})]}),e.payment_proof_url&&(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-gray-400 text-sm font-medium",children:"Payment Proof"}),a.jsx("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-white",children:"Payment screenshot uploaded"}),(0,a.jsxs)(u.z,{onClick:()=>{let s=e.payment_proof_url?eF(e.payment_proof_url):null;s&&window.open(s,"_blank")},variant:"outline",size:"sm",className:"border-blue-500 text-blue-400 hover:bg-blue-500/10",children:[a.jsx(ex.Z,{className:"h-4 w-4 mr-2"}),"View Proof"]})]})}),!e.payment_confirmed&&(0,a.jsxs)(u.z,{onClick:()=>P(e.id,"basic"===e.subscription_type?99:249),className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3",children:[a.jsx(eN.Z,{className:"h-5 w-5 mr-2"}),"Confirm Payment (₹","basic"===e.subscription_type?"99":"249",")"]})]})]})]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(y.Z,{className:"h-8 w-8 text-gray-400"})}),a.jsx("p",{className:"text-gray-400 text-lg",children:"No subscription"}),a.jsx("p",{className:"text-gray-500 text-sm",children:"User has not subscribed to any plan"})]})})]})]}),(0,a.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,a.jsxs)(h.Zb,{className:"bg-gray-900/80 border-gray-800 shadow-xl",children:[a.jsx(h.Ol,{className:"border-b border-gray-800",children:(0,a.jsxs)(h.ll,{className:"text-white text-xl flex items-center",children:[a.jsx(eo.Z,{className:"h-5 w-5 mr-3 text-red-400"}),"Admin Actions"]})}),a.jsx(h.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-3",children:[(0,a.jsxs)(u.z,{onClick:()=>Q(!G),variant:"outline",className:"border-blue-500 text-blue-400 hover:bg-blue-500/10 justify-start",children:[a.jsx(eO.Z,{className:"h-4 w-4 mr-3"}),G?"Cancel Edit":"Edit Profile"]}),G&&(0,a.jsxs)(u.z,{onClick:ea,disabled:es,className:"bg-green-600 hover:bg-green-700 text-white justify-start",children:[a.jsx(eR.Z,{className:"h-4 w-4 mr-3"}),es?"Saving...":"Save Changes"]}),(0,a.jsxs)(z,{children:[a.jsx(E,{asChild:!0,children:(0,a.jsxs)(u.z,{variant:"outline",className:"border-red-500 text-red-400 hover:bg-red-500/10 justify-start",children:[a.jsx(ev.Z,{className:"h-4 w-4 mr-3"}),"Delete User"]})}),(0,a.jsxs)(D,{className:"bg-gray-900 border-gray-700",children:[(0,a.jsxs)(T,{children:[a.jsx(R,{className:"text-white",children:"Delete User"}),(0,a.jsxs)(L,{className:"text-gray-400",children:["Are you sure you want to permanently delete ",e.full_name,"? This action cannot be undone."]})]}),(0,a.jsxs)(O,{children:[a.jsx($,{className:"border-gray-600 text-gray-400 hover:bg-gray-700",children:"Cancel"}),a.jsx(V,{onClick:()=>A(e.id),className:"bg-red-600 hover:bg-red-700",children:"Delete User"})]})]})]})]})})]}),(0,a.jsxs)(h.Zb,{className:"bg-gray-900/80 border-gray-800 shadow-xl",children:[a.jsx(h.Ol,{className:"border-b border-gray-800",children:(0,a.jsxs)(h.ll,{className:"text-white text-xl flex items-center",children:[a.jsx(eL.Z,{className:"h-5 w-5 mr-3 text-yellow-400"}),"Admin Notes"]})}),(0,a.jsxs)(h.aY,{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(q,{value:c,onValueChange:d,children:[a.jsx(J,{className:"bg-gray-800/50 border-gray-700 text-white",children:a.jsx(B,{})}),(0,a.jsxs)(W,{className:"bg-gray-900 border-gray-700",children:[a.jsx(K,{value:"note",children:"Note"}),a.jsx(K,{value:"warning",children:"Warning"}),a.jsx(K,{value:"system",children:"System"})]})]}),a.jsx(ee.g,{placeholder:"Add a note about this user...",value:i,onChange:e=>n(e.target.value),className:"bg-gray-800/50 border-gray-700 text-white placeholder-gray-400 min-h-[80px]"}),(0,a.jsxs)(u.z,{onClick:()=>w(e.id,i,c),disabled:!i.trim()||o,className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:[a.jsx(eV.Z,{className:"h-4 w-4 mr-2"}),o?"Adding...":"Add Note"]})]}),a.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:l.length>0?l.map(e=>(0,a.jsxs)("div",{className:"bg-gray-800/30 border border-gray-700 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[a.jsx(g.C,{className:`${"warning"===e.type?"bg-yellow-500/20 text-yellow-400 border-yellow-500/50":"system"===e.type?"bg-blue-500/20 text-blue-400 border-blue-500/50":"bg-gray-500/20 text-gray-400 border-gray-500/50"}`,children:e.type?.toUpperCase()||"NOTE"}),a.jsx("span",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleDateString()})]}),a.jsx("p",{className:"text-white text-sm leading-relaxed whitespace-pre-wrap",children:e.note}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 mt-3 pt-2 border-t border-gray-700",children:[(0,a.jsxs)("span",{children:["By: ",e.admin_email]}),a.jsx("span",{children:new Date(e.created_at).toLocaleTimeString()})]})]},e.id)):(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx(eL.Z,{className:"h-12 w-12 text-gray-600 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-400",children:"No admin notes"}),a.jsx("p",{className:"text-gray-500 text-sm",children:"Add the first note above"})]})})]})]})]})]})]})}):null}function eK({photo:e,open:s,onOpenChange:t}){return e?a.jsx(N,{open:s,onOpenChange:t,children:(0,a.jsxs)(_,{className:"max-w-4xl max-h-[90vh] bg-black/95 backdrop-blur-xl border border-gray-800 p-0",children:[a.jsx(k,{className:"px-6 py-4 border-b border-gray-800",children:(0,a.jsxs)(C,{className:"text-xl font-bold text-white flex items-center space-x-2",children:[a.jsx(eP.Z,{className:"h-5 w-5 text-blue-400"}),(0,a.jsxs)("span",{children:[e.name," - Profile Photo"]})]})}),a.jsx("div",{className:"p-6 flex items-center justify-center",children:a.jsx("div",{className:"relative max-w-full max-h-[70vh] overflow-hidden rounded-lg",children:a.jsx(m(),{src:e.url,alt:`${e.name} Profile Photo`,width:800,height:800,className:"object-contain max-w-full max-h-full",unoptimized:!0})})})]})}):null}function eX({user:e,open:s,onOpenChange:t,onConfirmPayment:l}){let[i,n]=(0,r.useState)(!1);if(!e?.payment_proof_url)return null;let c=async()=>{n(!0);try{await l(e.id,"basic"===e.subscription_type?99:249),t(!1)}catch(e){console.error("Error confirming payment:",e)}finally{n(!1)}};return a.jsx(N,{open:s,onOpenChange:t,children:(0,a.jsxs)(_,{className:"max-w-4xl max-h-[90vh] bg-gray-900/95 backdrop-blur-xl border border-gray-700",children:[a.jsx(k,{children:(0,a.jsxs)(C,{className:"text-xl font-bold text-white flex items-center space-x-2",children:[a.jsx(ed.Z,{className:"h-5 w-5 text-green-400"}),(0,a.jsxs)("span",{children:["Payment Verification: ",e.full_name]})]})}),a.jsx("div",{className:"py-6 space-y-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-white font-medium mb-4",children:"Payment Details"}),(0,a.jsxs)("div",{className:"space-y-3 bg-white/5 border border-white/10 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"User:"}),a.jsx("span",{className:"text-white",children:e.full_name})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Plan:"}),(0,a.jsxs)("span",{className:"text-white",children:[e.subscription_type," Plan"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Amount:"}),(0,a.jsxs)("span",{className:"text-white",children:["₹","basic"===e.subscription_type?"99":"249"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Submitted:"}),a.jsx("span",{className:"text-white",children:e.payment_date?new Date(e.payment_date).toLocaleString():"Unknown"})]})]}),a.jsx("div",{className:"mt-6 flex items-center space-x-3",children:(0,a.jsxs)(u.z,{onClick:c,disabled:i,className:"bg-green-600 hover:bg-green-700 text-white disabled:opacity-50",children:[a.jsx(eN.Z,{className:"h-4 w-4 mr-2"}),i?"Confirming...":"Confirm Payment"]})})]}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-white font-medium mb-4",children:"Payment Proof"}),a.jsx("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4",children:a.jsx(m(),{src:(e.payment_proof_url?eF(e.payment_proof_url):null)||"",alt:"Payment Proof",width:500,height:400,className:"w-full h-auto max-h-96 object-contain rounded-lg"})})]})]})})]})})}function e0({open:e,onOpenChange:s,selectedUsers:t,onBulkAction:l}){let[i,n]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),o=[{value:"verify",label:"Verify Users",icon:eN.Z,color:"text-blue-400"},{value:"suspend",label:"Suspend Users",icon:e$.Z,color:"text-yellow-400"},{value:"ban",label:"Ban Users",icon:eM.Z,color:"text-red-400"},{value:"delete",label:"Delete Users",icon:ev.Z,color:"text-red-500"},{value:"export",label:"Export Data",icon:eI.Z,color:"text-green-400"}];return a.jsx(N,{open:e,onOpenChange:s,children:(0,a.jsxs)(_,{className:"max-w-md bg-gray-900/95 backdrop-blur-xl border border-gray-700",children:[a.jsx(k,{children:(0,a.jsxs)(C,{className:"text-xl font-bold text-white",children:["Bulk Actions (",t.size," users)"]})}),(0,a.jsxs)("div",{className:"py-6 space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Select Action"}),(0,a.jsxs)(q,{value:i,onValueChange:n,children:[a.jsx(J,{className:"bg-white/5 border-white/20 text-white",children:a.jsx(B,{placeholder:"Choose an action"})}),a.jsx(W,{children:o.map(e=>a.jsx(K,{value:e.value,children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(e.icon,{className:`h-4 w-4 ${e.color}`}),a.jsx("span",{children:e.label})]})},e.value))})]})]}),("suspend"===i||"ban"===i||"delete"===i)&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Reason"}),a.jsx(ee.g,{placeholder:"Enter reason for this action...",value:c,onChange:e=>d(e.target.value),className:"bg-white/5 border-white/20 text-white placeholder-gray-400"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 pt-4",children:[a.jsx(u.z,{onClick:()=>{i&&(l(i,t,{reason:c}),s(!1),n(""),d(""))},disabled:!i||"verify"!==i&&"export"!==i&&!c.trim(),className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white",children:"Execute Action"}),a.jsx(u.z,{onClick:()=>s(!1),variant:"outline",className:"border-white/20 text-white hover:bg-white/10",children:"Cancel"})]})]})]})})}function e4(){return a.jsx(eY,{})}},78781:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>i,__esModule:()=>l,default:()=>c});var a=t(17536);let r=(0,a.createProxy)(String.raw`/home/aman/Desktop/cufy_3.1v/app/admin/page.tsx`),{__esModule:l,$$typeof:i}=r,n=r.default,c=n}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[4650,4433,7345,7024,2730,3174,7799,7674,2451,563,1935,8687,4516,8598,9378,3783,8384,8941],()=>t(95905));module.exports=a})();