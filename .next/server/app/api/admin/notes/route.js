(()=>{var e={};e.id=294,e.ids=[294],e.modules={52213:e=>{function r(e){var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=52213,e.exports=r},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},50306:(e,r,t)=>{"use strict";t.r(r),t.d(r,{headerHooks:()=>Z,originalPathname:()=>_,requestAsyncStorage:()=>j,routeModule:()=>E,serverHooks:()=>g,staticGenerationAsyncStorage:()=>h,staticGenerationBailout:()=>q});var n={};t.r(n),t.d(n,{DELETE:()=>p,GET:()=>c,POST:()=>l,PUT:()=>m}),t(95655);var o=t(83323),s=t(54647),a=t(66886),i=t(63433);let u=(0,i.createClient)("https://xdhtrwaghahigmbojotu.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY),d=["cufy.online@gmail.com","eakampreet@gmail.com"];async function c(e){try{let{searchParams:r}=new URL(e.url),t=r.get("userId"),n=r.get("adminEmail");if(!n||!d.includes(n))return a.Z.json({error:"Unauthorized"},{status:403});if(!t)return a.Z.json({error:"User ID is required"},{status:400});let{data:o,error:s}=await u.from("admin_notes").select("*").eq("user_id",t).order("created_at",{ascending:!1});if(s)return console.error("Error fetching admin notes:",s),a.Z.json({error:"Failed to fetch notes"},{status:500});return a.Z.json({notes:o})}catch(e){return console.error("Error in admin notes GET:",e),a.Z.json({error:"Internal server error"},{status:500})}}async function l(e){try{let{userId:r,adminEmail:t,note:n}=await e.json();if(!t||!d.includes(t))return a.Z.json({error:"Unauthorized"},{status:403});if(!r||!n?.trim())return a.Z.json({error:"User ID and note are required"},{status:400});let{data:o,error:s}=await u.from("admin_notes").insert({user_id:r,admin_email:t,note:n.trim()}).select().single();if(s)return console.error("Error creating admin note:",s),a.Z.json({error:"Failed to create note"},{status:500});return a.Z.json({note:o})}catch(e){return console.error("Error in admin notes POST:",e),a.Z.json({error:"Internal server error"},{status:500})}}async function m(e){try{let{noteId:r,adminEmail:t,note:n}=await e.json();if(!t||!d.includes(t))return a.Z.json({error:"Unauthorized"},{status:403});if(!r||!n?.trim())return a.Z.json({error:"Note ID and note content are required"},{status:400});let{data:o,error:s}=await u.from("admin_notes").update({note:n.trim(),updated_at:new Date().toISOString()}).eq("id",r).eq("admin_email",t).select().single();if(s)return console.error("Error updating admin note:",s),a.Z.json({error:"Failed to update note"},{status:500});return a.Z.json({note:o})}catch(e){return console.error("Error in admin notes PUT:",e),a.Z.json({error:"Internal server error"},{status:500})}}async function p(e){try{let{searchParams:r}=new URL(e.url),t=r.get("noteId"),n=r.get("adminEmail");if(!n||!d.includes(n))return a.Z.json({error:"Unauthorized"},{status:403});if(!t)return a.Z.json({error:"Note ID is required"},{status:400});let{error:o}=await u.from("admin_notes").delete().eq("id",t).eq("admin_email",n);if(o)return console.error("Error deleting admin note:",o),a.Z.json({error:"Failed to delete note"},{status:500});return a.Z.json({success:!0})}catch(e){return console.error("Error in admin notes DELETE:",e),a.Z.json({error:"Internal server error"},{status:500})}}let f=o.AppRouteRouteModule,E=new f({definition:{kind:s.x.APP_ROUTE,page:"/api/admin/notes/route",pathname:"/api/admin/notes",filename:"route",bundlePath:"app/api/admin/notes/route"},resolvedPagePath:"/home/aman/Desktop/cufy_3.1v-1/app/api/admin/notes/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:j,staticGenerationAsyncStorage:h,serverHooks:g,headerHooks:Z,staticGenerationBailout:q}=E,_="/api/admin/notes/route"}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[9195,6886,3433],()=>t(50306));module.exports=n})();