"use strict";(()=>{var e={};e.id=2628,e.ids=[2628],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},85477:e=>{e.exports=require("punycode")},12781:e=>{e.exports=require("stream")},57310:e=>{e.exports=require("url")},59796:e=>{e.exports=require("zlib")},71191:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>g,originalPathname:()=>f,requestAsyncStorage:()=>m,routeModule:()=>d,serverHooks:()=>_,staticGenerationAsyncStorage:()=>h,staticGenerationBailout:()=>y});var o={};t.r(o),t.d(o,{GET:()=>c,dynamic:()=>l,revalidate:()=>u}),t(95655);var s=t(83323),a=t(54647),n=t(66886),i=t(93439);let l="force-dynamic",u=0;async function c(e){try{console.log("Fetching users from admin API...");let{count:e,error:r}=await i.p.from("users").select("*",{count:"exact",head:!0});r?console.error("Count fetch error:",r):console.log(`Total users in database: ${e}`);let{data:t,error:o}=await i.p.from("users").select("*").range(0,1e3).order("created_at",{ascending:!1});if(o){console.error("Users fetch error:",o);let e=n.Z.json({users:[],total:0,error:o.message});return e.headers.set("Cache-Control","no-cache, no-store, must-revalidate"),e}console.log(`Fetched ${(t||[]).length} users from database`);let s=(t||[]).filter(e=>"premium"===e.subscription_type);console.log(`Raw premium users count: ${s.length}`),console.log("Sample raw subscription types:",(t||[]).slice(0,5).map(e=>({email:e.email,subscription_type:e.subscription_type})));let a=(t||[]).map(e=>({id:e.id,email:e.email,full_name:e.full_name,age:e.age,gender:e.gender,university:e.university,profile_photo:e.profile_photo,bio:e.bio,created_at:e.created_at,subscription_type:e.subscription_type||null,subscription_status:e.subscription_status||"pending",payment_confirmed:e.payment_confirmed||!1,payment_proof_url:e.payment_proof_url||null,rounds_count:e.rounds_used||0,phone_number:e.phone_number||null,year_of_study:e.year_of_study||null,energy_style:e.energy_style||null,group_setting:e.group_setting||null,ideal_weekend:e.ideal_weekend||null,communication_style:e.communication_style||null,best_trait:e.best_trait||null,relationship_values:e.relationship_values||null,love_language:e.love_language||null,connection_statement:e.connection_statement||null,instagram:e.instagram||null})),l=n.Z.json({users:a,total:e||a.length,fetched:a.length});return l.headers.set("Cache-Control","no-cache, no-store, must-revalidate, max-age=0, s-maxage=0"),l.headers.set("Pragma","no-cache"),l.headers.set("Expires","0"),l.headers.set("Surrogate-Control","no-store"),l.headers.set("CDN-Cache-Control","no-store"),l.headers.set("Vercel-CDN-Cache-Control","no-store"),l.headers.set("X-Vercel-Cache","MISS"),l}catch(r){console.error("Users fetch error:",r);let e=n.Z.json({users:[],total:0,error:r instanceof Error?r.message:"Unknown error"});return e.headers.set("Cache-Control","no-cache, no-store, must-revalidate"),e.headers.set("Pragma","no-cache"),e.headers.set("Expires","0"),e}}let p=s.AppRouteRouteModule,d=new p({definition:{kind:a.x.APP_ROUTE,page:"/api/admin/users/route",pathname:"/api/admin/users",filename:"route",bundlePath:"app/api/admin/users/route"},resolvedPagePath:"/home/aman/Desktop/cufy_3.1v-1/app/api/admin/users/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:m,staticGenerationAsyncStorage:h,serverHooks:_,headerHooks:g,staticGenerationBailout:y}=d,f="/api/admin/users/route"}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[9195,6886,3433,7221],()=>t(71191));module.exports=o})();