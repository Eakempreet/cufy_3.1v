"use strict";exports.id=9413,exports.ids=[9413],exports.modules={19413:(e,t,o)=>{o.d(t,{Z:()=>p});var r=o(60080),a=o(9885),s=o(77988),l=o(34516),i=o(976);function p({onImageUploaded:e,currentImage:t,className:o="",uploadType:p="profile",userId:m}){let[n,d]=(0,a.useState)(!1),[c,h]=(0,a.useState)(t||null),f=async t=>{try{let o,r;if(d(!0),!t.target.files||0===t.target.files.length)throw Error("You must select an image to upload.");let a=t.target.files[0];if(!a.type.startsWith("image/"))throw Error("Please select an image file.");if(a.size>5242880)throw Error("Image must be less than 5MB.");let l=a.name.split(".").pop();"payment-proof"===p&&m?(o=`payment_proof_${m}_${Date.now()}.${l}`,r="payment-proofs"):(o=`${Math.random().toString(36).substring(2)}.${l}`,r="profile-photos");let i="payment-proof"===p?o:`profile-photos/${o}`,{error:n}=await s.O.storage.from(r).upload("payment-proof"===p?o:i,a);if(n)throw n;if("payment-proof"===p)h(URL.createObjectURL(a)),e(o);else{let{data:t}=s.O.storage.from(r).getPublicUrl(i),o=t.publicUrl;h(o),e(o)}}catch(e){console.error("Image upload error:",e),alert(e.message||"Failed to upload image. Please try again.")}finally{d(!1)}};return r.jsx("div",{className:`space-y-4 ${o}`,children:(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[c?r.jsx("div",{className:"relative",children:r.jsx("img",{src:c,alt:"payment-proof"===p?"Payment proof preview":"Profile photo preview",className:"w-28 h-28 sm:w-32 sm:h-32 rounded-lg object-cover border-4 border-white shadow-lg"})}):r.jsx("div",{className:"w-28 h-28 sm:w-32 sm:h-32 rounded-lg border-2 border-dashed border-white/30 flex items-center justify-center",children:r.jsx(i.Z,{className:"h-10 w-10 sm:h-12 sm:w-12 text-white/50"})}),(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[r.jsx("input",{type:"file",accept:"image/*",onChange:f,disabled:n,className:"hidden",id:"image-upload"}),r.jsx("label",{htmlFor:"image-upload",children:(0,r.jsxs)(l.z,{type:"button",disabled:n,onClick:()=>document.getElementById("image-upload")?.click(),className:"cursor-pointer bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 min-h-[44px] px-4 sm:px-6",children:[r.jsx(i.Z,{className:"mr-2 h-4 w-4"}),n?"Uploading...":c?"Change Photo":"payment-proof"===p?"Upload Payment Proof":"Upload Photo"]})}),(0,r.jsxs)("p",{className:"text-sm text-white/60 text-center",children:["payment-proof"===p?"Upload payment proof (max 5MB)":"Upload profile photo (max 5MB)",r.jsx("br",{}),"Supported: JPG, PNG, WebP, GIF"]})]})]})})}}};