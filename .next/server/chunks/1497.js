exports.id=1497,exports.ids=[1497],exports.modules={52213:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=52213,e.exports=t},5194:(e,t,o)=>{"use strict";o.d(t,{Z:()=>d});var r=o(60080),a=o(9885),s=o(22730);let i="https://xdhtrwaghahigmbojotu.supabase.co",l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhkaHRyd2FnaGFoaWdtYm9qb3R1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU5Njk1OTYsImV4cCI6MjA3MTU0NTU5Nn0.ItDXVqjGSI-DaRCCbTCiWbopMnhXLGQiA3DMgBEzS4s",n=process.env.SUPABASE_SERVICE_ROLE_KEY;if(!i)throw Error("Missing NEXT_PUBLIC_SUPABASE_URL environment variable");if(!l)throw Error("Missing NEXT_PUBLIC_SUPABASE_ANON_KEY environment variable");let p=(0,s.createClient)(i,l);n?(0,s.createClient)(i,n,{auth:{autoRefreshToken:!1,persistSession:!1}}):(console.warn("SUPABASE_SERVICE_ROLE_KEY not found, some admin operations may not work"),(0,s.createClient)(i,l));var m=o(34516),c=o(976);function d({onImageUploaded:e,currentImage:t,className:o="",uploadType:s="profile",userId:i}){let[l,n]=(0,a.useState)(!1),[d,h]=(0,a.useState)(t||null),f=async t=>{try{let o,r;if(n(!0),!t.target.files||0===t.target.files.length)throw Error("You must select an image to upload.");let a=t.target.files[0];if(!a.type.startsWith("image/"))throw Error("Please select an image file.");if(a.size>5242880)throw Error("Image must be less than 5MB.");let l=a.name.split(".").pop();"payment-proof"===s&&i?(o=`payment_proof_${i}_${Date.now()}.${l}`,r="payment-proofs"):(o=`${Math.random().toString(36).substring(2)}.${l}`,r="profile-photos");let m="payment-proof"===s?o:`profile-photos/${o}`,{error:c}=await p.storage.from(r).upload("payment-proof"===s?o:m,a);if(c)throw c;if("payment-proof"===s)h(URL.createObjectURL(a)),e(o);else{let{data:t}=p.storage.from(r).getPublicUrl(m),o=t.publicUrl;h(o),e(o)}}catch(e){console.error("Image upload error:",e),alert(e.message||"Failed to upload image. Please try again.")}finally{n(!1)}};return r.jsx("div",{className:`space-y-4 ${o}`,children:(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[d?r.jsx("div",{className:"relative",children:r.jsx("img",{src:d,alt:"payment-proof"===s?"Payment proof preview":"Profile photo preview",className:"w-28 h-28 sm:w-32 sm:h-32 rounded-lg object-cover border-4 border-white shadow-lg"})}):r.jsx("div",{className:"w-28 h-28 sm:w-32 sm:h-32 rounded-lg border-2 border-dashed border-white/30 flex items-center justify-center",children:r.jsx(c.Z,{className:"h-10 w-10 sm:h-12 sm:w-12 text-white/50"})}),(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[r.jsx("input",{type:"file",accept:"image/*",onChange:f,disabled:l,className:"hidden",id:"image-upload"}),r.jsx("label",{htmlFor:"image-upload",children:(0,r.jsxs)(m.z,{type:"button",disabled:l,onClick:()=>document.getElementById("image-upload")?.click(),className:"cursor-pointer bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 min-h-[44px] px-4 sm:px-6",children:[r.jsx(c.Z,{className:"mr-2 h-4 w-4"}),l?"Uploading...":d?"Change Photo":"payment-proof"===s?"Upload Payment Proof":"Upload Photo"]})}),(0,r.jsxs)("p",{className:"text-sm text-white/60 text-center",children:["payment-proof"===s?"Upload payment proof (max 5MB)":"Upload profile photo (max 5MB)",r.jsx("br",{}),"Supported: JPG, PNG, WebP, GIF"]})]})]})})}}};