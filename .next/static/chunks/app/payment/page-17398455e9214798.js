(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[790],{73067:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var r=s(65531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},62442:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var r=s(65531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r.Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},49036:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var r=s(65531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r.Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},80612:function(e,t,s){Promise.resolve().then(s.bind(s,96006))},78455:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var r=s(57437),a=s(2265),n=s(6763),l=s(6673),i=s(4035);function o(e){let{onImageUploaded:t,currentImage:s,className:o="",uploadType:c="profile",userId:d}=e,[m,u]=(0,a.useState)(!1),[x,p]=(0,a.useState)(s||null),h=async e=>{try{let s,r;if(u(!0),!e.target.files||0===e.target.files.length)throw Error("You must select an image to upload.");let a=e.target.files[0];if(!a.type.startsWith("image/"))throw Error("Please select an image file.");if(a.size>("payment-proof"===c?10485760:5242880))throw Error("Image must be less than ".concat("payment-proof"===c?10:5,"MB."));let l=a.name.split(".").pop();"payment-proof"===c&&d?(s="payment_proof_".concat(d,"_").concat(Date.now(),".").concat(l),r="payment-proofs"):(s="".concat(Math.random().toString(36).substring(2),".").concat(l),r="profile-photos");let i="payment-proof"===c?s:"profile-photos/".concat(s);if("payment-proof"===c){let e=new FormData;e.append("file",a);let s=await fetch("/api/user/payment-proof",{method:"POST",body:e});if(!s.ok){let e=await s.json();throw Error(e.error||"Payment proof upload failed")}let r=await s.json();p(URL.createObjectURL(a)),t(r.payment_proof_url),console.log("Payment proof uploaded successfully via API:",r.payment_proof_url)}else{let{error:e}=await n.O.storage.from(r).upload(i,a,{cacheControl:"3600",upsert:!0});if(e)throw console.error("Upload error:",e),Error("Upload failed: ".concat(e.message));let{data:s}=n.O.storage.from(r).getPublicUrl(i),l=s.publicUrl;p(l),t(l),console.log("Profile photo uploaded successfully:",l)}}catch(e){console.error("Image upload error:",e),alert(e.message||"Failed to upload image. Please try again.")}finally{u(!1)}};return(0,r.jsx)("div",{className:"space-y-4 ".concat(o),children:(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[x?(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)("img",{src:x,alt:"payment-proof"===c?"Payment proof preview":"Profile photo preview",className:"w-28 h-28 sm:w-32 sm:h-32 rounded-lg object-cover border-4 border-white shadow-lg"})}):(0,r.jsx)("div",{className:"w-28 h-28 sm:w-32 sm:h-32 rounded-lg border-2 border-dashed border-white/30 flex items-center justify-center",children:(0,r.jsx)(i.Z,{className:"h-10 w-10 sm:h-12 sm:w-12 text-white/50"})}),(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:h,disabled:m,className:"hidden",id:"image-upload"}),(0,r.jsx)("label",{htmlFor:"image-upload",children:(0,r.jsxs)(l.z,{type:"button",disabled:m,onClick:()=>{var e;return null===(e=document.getElementById("image-upload"))||void 0===e?void 0:e.click()},className:"cursor-pointer bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 min-h-[44px] px-4 sm:px-6",children:[(0,r.jsx)(i.Z,{className:"mr-2 h-4 w-4"}),m?"Uploading...":x?"Change Photo":"payment-proof"===c?"Upload Payment Proof":"Upload Photo"]})}),(0,r.jsxs)("p",{className:"text-sm text-white/60 text-center",children:["payment-proof"===c?"Upload payment proof (max 5MB)":"Upload profile photo (max 5MB)",(0,r.jsx)("br",{}),"Supported: JPG, PNG, WebP, GIF"]})]})]})})}},6673:function(e,t,s){"use strict";s.d(t,{z:function(){return c}});var r=s(57437),a=s(2265),n=s(96061),l=s(39311),i=s(68177);let o=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-lg text-sm font-medium ring-offset-background transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"gradient-primary text-white hover:scale-105 glow",glass:"glass text-white hover:bg-white/20 border border-white/20",outline:"border border-white/30 text-white hover:bg-white/10",ghost:"text-white hover:bg-white/10",premium:"gradient-premium text-white hover:scale-105 glow shadow-lg"},size:{default:"h-12 px-6 py-3",sm:"h-9 rounded-md px-3",lg:"h-14 rounded-lg px-8 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=(0,a.forwardRef)((e,t)=>{let{className:s,variant:a,size:n,...c}=e;return(0,r.jsx)(i.E.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"inline-block",children:(0,r.jsx)("button",{className:(0,l.cn)(o({variant:a,size:n,className:s})),ref:t,...c})})});c.displayName="Button"},96006:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return z}});var r=s(57437),a=s(2265),n=s(82749),l=s(24033),i=s(86110),o=s(93023),c=s(29155),d=s(96061),m=s(39311);let u=(0,d.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),x=a.forwardRef((e,t)=>{let{className:s,variant:a,...n}=e;return(0,r.jsx)("div",{ref:t,role:"alert",className:(0,m.cn)(u({variant:a}),s),...n})});x.displayName="Alert";let p=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h5",{ref:t,className:(0,m.cn)("mb-1 font-medium leading-none tracking-tight",s),...a})});p.displayName="AlertTitle";let h=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,m.cn)("text-sm [&_p]:leading-relaxed",s),...a})});h.displayName="AlertDescription";var f=s(65531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let g=(0,f.Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var b=s(73067),y=s(49036),j=s(6141),v=s(71738),N=s(21271),w=s(13546),k=s(62442),P=s(56224),S=s(31541);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let C=(0,f.Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var I=s(4035);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let U=(0,f.Z)("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),Z=(0,f.Z)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);var E=s(78455),_=s(75298);function R(){let{subscriptionType:e,onPaymentProofUploaded:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[s,n]=(0,a.useState)(900),[d,m]=(0,a.useState)(null),[u,p]=(0,a.useState)(!1),[f,R]=(0,a.useState)(null),[z,T]=(0,a.useState)(!1),[A,O]=(0,a.useState)(!1),[M,B]=(0,a.useState)(null),[L,Y]=(0,a.useState)(null),[D,F]=(0,a.useState)(null),[V,G]=(0,a.useState)(null),[J,W]=(0,a.useState)(1),X=(0,l.useRouter)(),Q=(0,l.useSearchParams)(),q=e||Q.get("plan"),H="9773978753@fam",K="Aman Singh",$="basic"===q?99:"premium"===q?249:500,ee="upi://pay?pa=9773978753@fam&pn=Aman%20Singh";(0,a.useEffect)(()=>{let e=async()=>{try{let e=await _.toDataURL(ee,{width:280,margin:2,color:{dark:"#1a1a1a",light:"#ffffff"}});F(e)}catch(e){console.error("QR code generation failed:",e)}};q&&e()},[q,ee]),(0,a.useEffect)(()=>{if(!q){X.push("/subscription-selection");return}ea(),er()},[q]),(0,a.useEffect)(()=>{if(s>0&&!A&&!(null==L?void 0:L.payment_confirmed)){let e=setTimeout(()=>n(s-1),1e3);return()=>clearTimeout(e)}},[s,A,L]);let et=async(e,t)=>{try{await navigator.clipboard.writeText(e),G(t),setTimeout(()=>G(null),2e3)}catch(e){console.error("Copy failed:",e)}},es=e=>{window.location.href="upi://pay?pa=9773978753@fam&pn=Aman%20Singh"},er=async()=>{try{let e=await fetch("/api/user/check"),t=await e.json();t.exists&&t.user&&(Y(t.user),t.user.payment_proof_url&&(B(t.user.payment_proof_url),R(t.user.payment_proof_url)))}catch(e){console.error("Error checking existing payment:",e)}},ea=async()=>{try{m({basic:{price:99,name:"Basic Plan"},premium:{price:249,name:"Premium Plan"}}[q]||{price:$,name:"".concat(null==q?void 0:q.toUpperCase()," Plan")})}catch(e){console.error("Error fetching plan details:",e),m({price:$,name:"".concat(null==q?void 0:q.toUpperCase()," Plan")})}},en=async()=>{if(f&&d){T(!0);try{let e=await fetch("/api/user/payment-proof",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payment_proof_url:f})});e.ok?(O(!0),t?t():setTimeout(()=>{X.push("/dashboard")},2e3)):console.error("Failed to submit payment proof")}catch(e){console.error("Error submitting payment proof:",e)}finally{T(!1)}}};return d?A?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsx)(i.Zb,{className:"bg-white border shadow-lg max-w-md mx-auto",children:(0,r.jsxs)(i.aY,{className:"text-center p-8",children:[(0,r.jsx)("div",{className:"w-20 h-20 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,r.jsx)(g,{className:"h-10 w-10 text-white"})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Payment Submitted!"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Thank you! Your payment proof has been submitted successfully. Our team will review it shortly and confirm your payment."}),(0,r.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:(0,r.jsx)("p",{className:"text-blue-800 text-sm",children:"You will receive confirmation within 24 hours. Redirecting to dashboard..."})}),(0,r.jsx)(o.z,{onClick:()=>X.push("/dashboard"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:"Go to Dashboard"})]})})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("div",{className:"bg-white border-b shadow-sm",children:(0,r.jsx)("div",{className:"max-w-6xl mx-auto px-4 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)(o.z,{variant:"ghost",onClick:()=>X.back(),className:"text-gray-600 hover:text-gray-800",children:[(0,r.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),"Back"]}),(0,r.jsx)("div",{className:"h-6 w-px bg-gray-300"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(y.Z,{className:"h-5 w-5 text-green-600"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Secure Payment"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 bg-red-50 px-3 py-1 rounded-full",children:[(0,r.jsx)(j.Z,{className:"h-4 w-4 text-red-600"}),(0,r.jsx)("span",{className:"text-sm font-medium text-red-600",children:"".concat(Math.floor(s/60),":").concat((s%60).toString().padStart(2,"0"))})]})]})})}),(0,r.jsx)("div",{className:"max-w-6xl mx-auto px-4 py-4 sm:py-8",children:(0,r.jsxs)("div",{className:"grid lg:grid-cols-3 gap-4 lg:gap-8",children:[(0,r.jsx)("div",{className:"lg:col-span-1 order-2 lg:order-1",children:(0,r.jsxs)(i.Zb,{className:"bg-white border shadow-sm",children:[(0,r.jsx)(i.Ol,{className:"pb-4",children:(0,r.jsx)(i.ll,{className:"text-lg font-semibold text-gray-900",children:"Order Summary"})}),(0,r.jsxs)(i.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between py-3 border-b",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"font-medium text-gray-900 capitalize",children:[q," Plan"]}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"1 month subscription"})]}),(0,r.jsxs)("p",{className:"font-semibold text-gray-900",children:["₹",$]})]}),(0,r.jsxs)("div",{className:"space-y-2 py-3 border-b",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Subtotal"}),(0,r.jsxs)("span",{className:"text-gray-900",children:["₹",$]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Processing Fee"}),(0,r.jsx)("span",{className:"text-green-600",children:"Free"})]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center pt-3",children:[(0,r.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:"Total"}),(0,r.jsxs)("span",{className:"text-2xl font-bold text-gray-900",children:["₹",$]})]})]})]})}),(0,r.jsxs)("div",{className:"lg:col-span-2 order-1 lg:order-2",children:[1===J&&(0,r.jsxs)(i.Zb,{className:"bg-white border shadow-sm",children:[(0,r.jsx)(i.Ol,{className:"pb-6",children:(0,r.jsxs)(i.ll,{className:"text-xl font-semibold text-gray-900 flex items-center",children:[(0,r.jsx)(v.Z,{className:"h-5 w-5 mr-3 text-blue-600"}),"Choose Payment Method"]})}),(0,r.jsxs)(i.aY,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"border-2 border-blue-200 rounded-xl p-6 bg-blue-50",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center",children:(0,r.jsx)(N.Z,{className:"h-5 w-5 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900",children:"UPI Payment"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Instant payment via UPI apps"})]})]}),(0,r.jsx)(c.C,{className:"bg-green-100 text-green-800 border-green-200",children:"Recommended"})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg p-4 md:p-6 border text-center",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900 mb-4",children:"Scan QR Code"}),(0,r.jsx)("div",{className:"w-40 h-40 sm:w-48 sm:h-48 mx-auto bg-white rounded-lg border-2 border-gray-200 flex items-center justify-center mb-4",children:D?(0,r.jsx)("img",{src:D,alt:"UPI QR Code",className:"w-full h-full object-contain rounded-lg"}):(0,r.jsx)(w.Z,{className:"h-16 w-16 sm:h-20 sm:w-20 text-gray-400"})}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Open any UPI app and scan this code"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:"Payment Details"}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"UPI ID"}),(0,r.jsx)("p",{className:"font-mono text-gray-900",children:H})]}),(0,r.jsx)(o.z,{variant:"outline",size:"sm",onClick:()=>et(H,"UPI ID"),className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:"UPI ID"===V?(0,r.jsx)(k.Z,{className:"h-4 w-4"}):(0,r.jsx)(P.Z,{className:"h-4 w-4"})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Name"}),(0,r.jsx)("p",{className:"font-medium text-gray-900",children:K})]}),(0,r.jsx)(o.z,{variant:"outline",size:"sm",onClick:()=>et(K,"Name"),className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:"Name"===V?(0,r.jsx)(k.Z,{className:"h-4 w-4"}):(0,r.jsx)(P.Z,{className:"h-4 w-4"})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Amount"}),(0,r.jsxs)("p",{className:"text-lg font-bold text-gray-900",children:["₹",$]})]}),(0,r.jsx)(o.z,{variant:"outline",size:"sm",onClick:()=>et($.toString(),"Amount"),className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:"Amount"===V?(0,r.jsx)(k.Z,{className:"h-4 w-4"}):(0,r.jsx)(P.Z,{className:"h-4 w-4"})})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Quick Pay"}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-3",children:[{name:"PhonePe",url:"phonepe://pay",color:"bg-purple-600 hover:bg-purple-700"},{name:"Google Pay",url:"tez://upi/pay",color:"bg-blue-600 hover:bg-blue-700"},{name:"Paytm",url:"paytmmp://pay",color:"bg-indigo-600 hover:bg-indigo-700"},{name:"BHIM UPI",url:"upi://pay",color:"bg-green-600 hover:bg-green-700"}].map(e=>(0,r.jsxs)(o.z,{onClick:()=>es(e.url),className:"".concat(e.color," text-white"),children:[(0,r.jsx)(N.Z,{className:"h-4 w-4 mr-2"}),e.name]},e.name))})]})]})]}),(0,r.jsx)("div",{className:"mt-6 pt-6 border-t",children:(0,r.jsx)(o.z,{onClick:()=>W(2),className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 text-lg font-medium",children:"I've completed the payment"})})]}),(0,r.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)(y.Z,{className:"h-5 w-5 text-green-600 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Your payment is secure"}),(0,r.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"We use industry-standard encryption to protect your data. Your card details are never stored on our servers."})]})]})})]})]}),2===J&&(0,r.jsxs)(i.Zb,{className:"bg-white border shadow-sm",children:[(0,r.jsx)(i.Ol,{children:(0,r.jsxs)(i.ll,{className:"text-xl font-semibold text-gray-900 flex items-center",children:[(0,r.jsx)(S.Z,{className:"h-5 w-5 mr-3 text-blue-600"}),"Upload Payment Proof"]})}),(0,r.jsxs)(i.aY,{className:"space-y-6",children:[(0,r.jsxs)(x,{className:"bg-blue-50 border-blue-200",children:[(0,r.jsx)(C,{className:"h-4 w-4 text-blue-600"}),(0,r.jsx)(h,{className:"text-blue-800",children:"Please upload a clear screenshot of your payment confirmation to verify your transaction quickly."})]}),(0,r.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 md:p-8 text-center hover:border-blue-400 transition-colors",children:[(0,r.jsx)(I.Z,{className:"h-10 w-10 md:h-12 md:w-12 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload Screenshot"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6 text-sm md:text-base",children:"Take a screenshot of your payment confirmation and upload it here"}),(0,r.jsx)(E.Z,{onImageUploaded:e=>R(e),currentImage:f||void 0,className:"w-full",uploadType:"payment-proof",userId:(null==L?void 0:L.id)||"temp"})]}),f&&(0,r.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(g,{className:"h-5 w-5 text-green-600"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-green-900",children:"Payment proof uploaded!"}),(0,r.jsx)("p",{className:"text-sm text-green-700",children:"Click submit to complete your order"})]})]})}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-4",children:[(0,r.jsxs)(o.z,{variant:"outline",onClick:()=>W(1),className:"flex-1 border-gray-300 text-gray-700 hover:bg-gray-50 flex items-center justify-center",children:[(0,r.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),"Back to Payment"]}),(0,r.jsx)(o.z,{onClick:en,disabled:!f||z,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:z?"Submitting...":"Submit Payment Proof"})]})]})]})]})]})}),(0,r.jsx)("div",{className:"border-t bg-white",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-6 text-sm text-gray-500",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(y.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"SSL Encrypted"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(U,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Secure Connection"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Instant Processing"})]})]}),(0,r.jsx)("p",{className:"text-center text-xs text-gray-400 mt-3",children:"Need help? Contact us at support@cufy.com or +91 9876543210"})]})})]}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-gray-600",children:"Loading payment details..."})})}function z(){var e;let{data:t}=(0,n.useSession)(),s=(0,l.useRouter)(),[i,o]=(0,a.useState)(!0),[c,d]=(0,a.useState)(null);return(console.log("Payment page mounted, session:",null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.email),(0,a.useEffect)(()=>{var e;console.log("Payment page useEffect running"),console.log("Session:",null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.email);let r=new URLSearchParams(window.location.search),a=r.get("plan");if(console.log("Plan from URL (window.location):",a),console.log("Full URL:",window.location.href),a&&["basic","premium"].includes(a)&&(console.log("Valid plan found, setting planType:",a),d(a)),!t){console.log("No session, but keeping payment page open for now"),o(!1);return}if(!a||!["basic","premium"].includes(a)){console.log("No valid plan found after 2 seconds, redirecting to subscription selection");let e=setTimeout(()=>{s.push("/subscription-selection")},2e3);return()=>clearTimeout(e)}let n=async()=>{try{console.log("Checking user profile...");let e=await fetch("/api/user/check"),t=await e.json();if(console.log("User check response:",t),!t.exists){console.log("User profile does not exist, redirecting to onboarding"),s.push("/boys-onboarding");return}console.log("User profile exists, proceeding with payment page")}catch(e){console.error("Error checking user:",e)}finally{o(!1)}};t&&a&&["basic","premium"].includes(a)?n():o(!1)},[t,s]),i)?(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-white text-lg",children:"Loading payment details..."})}):c?(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900",children:(0,r.jsx)(R,{subscriptionType:c,onPaymentProofUploaded:()=>{s.push("/dashboard")}})}):(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-white text-lg",children:"Redirecting..."})})}},29155:function(e,t,s){"use strict";s.d(t,{C:function(){return i}});var r=s(57437);s(2265);var a=s(96061),n=s(39311);let l=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:s,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)(l({variant:s}),t),...a})}},93023:function(e,t,s){"use strict";s.d(t,{d:function(){return o},z:function(){return c}});var r=s(57437),a=s(2265),n=s(67256),l=s(96061),i=s(39311);let o=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:s,variant:a,size:l,asChild:c=!1,...d}=e,m=c?n.g7:"button";return(0,r.jsx)(m,{className:(0,i.cn)(o({variant:a,size:l,className:s})),ref:t,...d})});c.displayName="Button"},86110:function(e,t,s){"use strict";s.d(t,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return l},aY:function(){return d},ll:function(){return o}});var r=s(57437),a=s(2265),n=s(39311);let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});l.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})});i.displayName="CardHeader";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});o.displayName="CardTitle";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...a})});d.displayName="CardContent";let m=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})});m.displayName="CardFooter"},6763:function(e,t,s){"use strict";s.d(t,{O:function(){return o}});var r=s(37440),a=s(62601);let n="https://xdhtrwaghahigmbojotu.supabase.co",l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhkaHRyd2FnaGFoaWdtYm9qb3R1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU5Njk1OTYsImV4cCI6MjA3MTU0NTU5Nn0.ItDXVqjGSI-DaRCCbTCiWbopMnhXLGQiA3DMgBEzS4s",i=a.env.SUPABASE_SERVICE_ROLE_KEY;if(!n)throw Error("Missing NEXT_PUBLIC_SUPABASE_URL environment variable");if(!l)throw Error("Missing NEXT_PUBLIC_SUPABASE_ANON_KEY environment variable");let o=(0,r.eI)(n,l);i?(0,r.eI)(n,i,{auth:{autoRefreshToken:!1,persistSession:!1}}):(console.warn("SUPABASE_SERVICE_ROLE_KEY not found, some admin operations may not work"),(0,r.eI)(n,l))},39311:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var r=s(57042),a=s(74769);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}}},function(e){e.O(0,[749,492,440,519,971,864,744],function(){return e(e.s=80612)}),_N_E=e.O()}]);