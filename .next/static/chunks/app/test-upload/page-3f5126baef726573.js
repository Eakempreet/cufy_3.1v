(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[534],{4715:function(e,t,r){Promise.resolve().then(r.bind(r,6063))},3999:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var a=r(7437),s=r(2265),i=r(7440),o=r(2601);let n="https://xdhtrwaghahigmbojotu.supabase.co",l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhkaHRyd2FnaGFoaWdtYm9qb3R1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU5Njk1OTYsImV4cCI6MjA3MTU0NTU5Nn0.ItDXVqjGSI-DaRCCbTCiWbopMnhXLGQiA3DMgBEzS4s",c=o.env.SUPABASE_SERVICE_ROLE_KEY;if(!n)throw Error("Missing NEXT_PUBLIC_SUPABASE_URL environment variable");if(!l)throw Error("Missing NEXT_PUBLIC_SUPABASE_ANON_KEY environment variable");let d=(0,i.eI)(n,l);c?(0,i.eI)(n,c,{auth:{autoRefreshToken:!1,persistSession:!1}}):(console.warn("SUPABASE_SERVICE_ROLE_KEY not found, some admin operations may not work"),(0,i.eI)(n,l));var m=r(6673),p=r(4035);function u(e){let{onImageUploaded:t,currentImage:r,className:i="",uploadType:o="profile",userId:n}=e,[l,c]=(0,s.useState)(!1),[u,h]=(0,s.useState)(r||null),f=async e=>{try{let r,a;if(c(!0),!e.target.files||0===e.target.files.length)throw Error("You must select an image to upload.");let s=e.target.files[0];if(!s.type.startsWith("image/"))throw Error("Please select an image file.");if(s.size>5242880)throw Error("Image must be less than 5MB.");let i=s.name.split(".").pop();"payment-proof"===o&&n?(r="payment_proof_".concat(n,"_").concat(Date.now(),".").concat(i),a="payment-proofs"):(r="".concat(Math.random().toString(36).substring(2),".").concat(i),a="profile-photos");let l="payment-proof"===o?r:"profile-photos/".concat(r),{error:m}=await d.storage.from(a).upload("payment-proof"===o?r:l,s);if(m)throw m;if("payment-proof"===o)h(URL.createObjectURL(s)),t(r);else{let{data:e}=d.storage.from(a).getPublicUrl(l),r=e.publicUrl;h(r),t(r)}}catch(e){console.error("Image upload error:",e),alert(e.message||"Failed to upload image. Please try again.")}finally{c(!1)}};return(0,a.jsx)("div",{className:"space-y-4 ".concat(i),children:(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[u?(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("img",{src:u,alt:"payment-proof"===o?"Payment proof preview":"Profile photo preview",className:"w-28 h-28 sm:w-32 sm:h-32 rounded-lg object-cover border-4 border-white shadow-lg"})}):(0,a.jsx)("div",{className:"w-28 h-28 sm:w-32 sm:h-32 rounded-lg border-2 border-dashed border-white/30 flex items-center justify-center",children:(0,a.jsx)(p.Z,{className:"h-10 w-10 sm:h-12 sm:w-12 text-white/50"})}),(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:f,disabled:l,className:"hidden",id:"image-upload"}),(0,a.jsx)("label",{htmlFor:"image-upload",children:(0,a.jsxs)(m.z,{type:"button",disabled:l,onClick:()=>{var e;return null===(e=document.getElementById("image-upload"))||void 0===e?void 0:e.click()},className:"cursor-pointer bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 min-h-[44px] px-4 sm:px-6",children:[(0,a.jsx)(p.Z,{className:"mr-2 h-4 w-4"}),l?"Uploading...":u?"Change Photo":"payment-proof"===o?"Upload Payment Proof":"Upload Photo"]})}),(0,a.jsxs)("p",{className:"text-sm text-white/60 text-center",children:["payment-proof"===o?"Upload payment proof (max 5MB)":"Upload profile photo (max 5MB)",(0,a.jsx)("br",{}),"Supported: JPG, PNG, WebP, GIF"]})]})]})})}},6673:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var a=r(7437),s=r(2265),i=r(6061),o=r(9311),n=r(8177);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-lg text-sm font-medium ring-offset-background transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"gradient-primary text-white hover:scale-105 glow",glass:"glass text-white hover:bg-white/20 border border-white/20",outline:"border border-white/30 text-white hover:bg-white/10",ghost:"text-white hover:bg-white/10",premium:"gradient-premium text-white hover:scale-105 glow shadow-lg"},size:{default:"h-12 px-6 py-3",sm:"h-9 rounded-md px-3",lg:"h-14 rounded-lg px-8 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=(0,s.forwardRef)((e,t)=>{let{className:r,variant:s,size:i,...c}=e;return(0,a.jsx)(n.E.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"inline-block",children:(0,a.jsx)("button",{className:(0,o.cn)(l({variant:s,size:i,className:r})),ref:t,...c})})});c.displayName="Button"},804:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},Zb:function(){return n},aY:function(){return m},ll:function(){return c}});var a=r(7437),s=r(2265),i=r(9311),o=r(8177);let n=(0,s.forwardRef)((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"inline-block w-full",children:(0,a.jsx)("div",{ref:t,className:(0,i.cn)("glass rounded-xl border border-white/20 shadow-lg backdrop-blur-md p-6",r),...s})})});n.displayName="Card";let l=(0,s.forwardRef)((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",r),...s})});l.displayName="CardHeader";let c=(0,s.forwardRef)((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight text-white font-poppins",r),...s})});c.displayName="CardTitle";let d=(0,s.forwardRef)((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-white/70",r),...s})});d.displayName="CardDescription";let m=(0,s.forwardRef)((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",r),...s})});m.displayName="CardContent";let p=(0,s.forwardRef)((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",r),...s})});p.displayName="CardFooter"},6063:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var a=r(7437),s=r(2265),i=r(6691),o=r.n(i),n=r(804),l=r(3999);function c(){let[e,t]=(0,s.useState)(null);return(0,a.jsx)("div",{className:"min-h-screen bg-dark p-6",children:(0,a.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{children:(0,a.jsx)(n.ll,{className:"text-white",children:"Test Image Upload"})}),(0,a.jsxs)(n.aY,{className:"space-y-6",children:[(0,a.jsx)(l.Z,{onImageUploaded:e=>{t(e),console.log("Image uploaded:",e)}}),e&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-white font-semibold",children:"Uploaded Image:"}),(0,a.jsx)("div",{className:"relative w-full max-w-md",children:(0,a.jsx)(o(),{src:e,alt:"Uploaded",width:400,height:300,className:"rounded-lg border border-white/20"})}),(0,a.jsxs)("p",{className:"text-white/70 text-sm break-all",children:["URL: ",e]})]})]})]})})})}},9311:function(e,t,r){"use strict";r.d(t,{cn:function(){return i}});var a=r(7042),s=r(4769);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}}},function(e){e.O(0,[492,625,281,971,864,744],function(){return e(e.s=4715)}),_N_E=e.O()}]);