(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[534],{4035:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var o=r(65531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,o.Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},62601:function(e,t,r){"use strict";var o,n;e.exports=(null==(o=r.g.process)?void 0:o.env)&&"object"==typeof(null==(n=r.g.process)?void 0:n.env)?r.g.process:r(58960)},24715:function(e,t,r){Promise.resolve().then(r.bind(r,96063))},78455:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var o=r(57437),n=r(2265),a=r(6763),i=r(6673),s=r(4035);function l(e){let{onImageUploaded:t,currentImage:r,className:l="",uploadType:c="profile",userId:u}=e,[d,f]=(0,n.useState)(!1),[p,m]=(0,n.useState)(r||null),h=async e=>{try{let r,o;if(f(!0),!e.target.files||0===e.target.files.length)throw Error("You must select an image to upload.");let n=e.target.files[0];if(!n.type.startsWith("image/"))throw Error("Please select an image file.");if(n.size>("payment-proof"===c?10485760:5242880))throw Error("Image must be less than ".concat("payment-proof"===c?10:5,"MB."));let i=n.name.split(".").pop();"payment-proof"===c&&u?(r="payment_proof_".concat(u,"_").concat(Date.now(),".").concat(i),o="payment-proofs"):(r="".concat(Math.random().toString(36).substring(2),".").concat(i),o="profile-photos");let s="payment-proof"===c?r:"profile-photos/".concat(r);if("payment-proof"===c){let e=new FormData;e.append("file",n);let r=await fetch("/api/user/payment-proof",{method:"POST",body:e});if(!r.ok){let e=await r.json();throw Error(e.error||"Payment proof upload failed")}let o=await r.json();m(URL.createObjectURL(n)),t(o.payment_proof_url),console.log("Payment proof uploaded successfully via API:",o.payment_proof_url)}else{let{error:e}=await a.O.storage.from(o).upload(s,n,{cacheControl:"3600",upsert:!0});if(e)throw console.error("Upload error:",e),Error("Upload failed: ".concat(e.message));let{data:r}=a.O.storage.from(o).getPublicUrl(s),i=r.publicUrl;m(i),t(i),console.log("Profile photo uploaded successfully:",i)}}catch(e){console.error("Image upload error:",e),alert(e.message||"Failed to upload image. Please try again.")}finally{f(!1)}};return(0,o.jsx)("div",{className:"space-y-4 ".concat(l),children:(0,o.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[p?(0,o.jsx)("div",{className:"relative",children:(0,o.jsx)("img",{src:p,alt:"payment-proof"===c?"Payment proof preview":"Profile photo preview",className:"w-28 h-28 sm:w-32 sm:h-32 rounded-lg object-cover border-4 border-white shadow-lg"})}):(0,o.jsx)("div",{className:"w-28 h-28 sm:w-32 sm:h-32 rounded-lg border-2 border-dashed border-white/30 flex items-center justify-center",children:(0,o.jsx)(s.Z,{className:"h-10 w-10 sm:h-12 sm:w-12 text-white/50"})}),(0,o.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,o.jsx)("input",{type:"file",accept:"image/*",onChange:h,disabled:d,className:"hidden",id:"image-upload"}),(0,o.jsx)("label",{htmlFor:"image-upload",children:(0,o.jsxs)(i.z,{type:"button",disabled:d,onClick:()=>{var e;return null===(e=document.getElementById("image-upload"))||void 0===e?void 0:e.click()},className:"cursor-pointer bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 min-h-[44px] px-4 sm:px-6",children:[(0,o.jsx)(s.Z,{className:"mr-2 h-4 w-4"}),d?"Uploading...":p?"Change Photo":"payment-proof"===c?"Upload Payment Proof":"Upload Photo"]})}),(0,o.jsxs)("p",{className:"text-sm text-white/60 text-center",children:["payment-proof"===c?"Upload payment proof (max 5MB)":"Upload profile photo (max 5MB)",(0,o.jsx)("br",{}),"Supported: JPG, PNG, WebP, GIF"]})]})]})})}},6673:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var o=r(57437),n=r(2265),a=r(96061),i=r(39311),s=r(68177);let l=(0,a.j)("inline-flex items-center justify-center whitespace-nowrap rounded-lg text-sm font-medium ring-offset-background transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"gradient-primary text-white hover:scale-105 glow",glass:"glass text-white hover:bg-white/20 border border-white/20",outline:"border border-white/30 text-white hover:bg-white/10",ghost:"text-white hover:bg-white/10",premium:"gradient-premium text-white hover:scale-105 glow shadow-lg"},size:{default:"h-12 px-6 py-3",sm:"h-9 rounded-md px-3",lg:"h-14 rounded-lg px-8 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=(0,n.forwardRef)((e,t)=>{let{className:r,variant:n,size:a,...c}=e;return(0,o.jsx)(s.E.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"inline-block",children:(0,o.jsx)("button",{className:(0,i.cn)(l({variant:n,size:a,className:r})),ref:t,...c})})});c.displayName="Button"},70804:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},Zb:function(){return s},aY:function(){return d},ll:function(){return c}});var o=r(57437),n=r(2265),a=r(39311),i=r(68177);let s=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,o.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"inline-block w-full",children:(0,o.jsx)("div",{ref:t,className:(0,a.cn)("glass rounded-xl border border-white/20 shadow-lg backdrop-blur-md p-6",r),...n})})});s.displayName="Card";let l=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,o.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...n})});l.displayName="CardHeader";let c=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,o.jsx)("h3",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight text-white font-poppins",r),...n})});c.displayName="CardTitle";let u=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,o.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-white/70",r),...n})});u.displayName="CardDescription";let d=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,o.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...n})});d.displayName="CardContent";let f=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,o.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...n})});f.displayName="CardFooter"},96063:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var o=r(57437),n=r(2265),a=r(16691),i=r.n(a),s=r(70804),l=r(78455);function c(){let[e,t]=(0,n.useState)(null);return(0,o.jsx)("div",{className:"min-h-screen bg-dark p-6",children:(0,o.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,o.jsxs)(s.Zb,{children:[(0,o.jsx)(s.Ol,{children:(0,o.jsx)(s.ll,{className:"text-white",children:"Test Image Upload"})}),(0,o.jsxs)(s.aY,{className:"space-y-6",children:[(0,o.jsx)(l.Z,{onImageUploaded:e=>{t(e),console.log("Image uploaded:",e)}}),e&&(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)("h3",{className:"text-white font-semibold",children:"Uploaded Image:"}),(0,o.jsx)("div",{className:"relative w-full max-w-md",children:(0,o.jsx)(i(),{src:e,alt:"Uploaded",width:400,height:300,className:"rounded-lg border border-white/20"})}),(0,o.jsxs)("p",{className:"text-white/70 text-sm break-all",children:["URL: ",e]})]})]})]})})})}},6763:function(e,t,r){"use strict";r.d(t,{O:function(){return l}});var o=r(37440),n=r(62601);let a="https://xdhtrwaghahigmbojotu.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhkaHRyd2FnaGFoaWdtYm9qb3R1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU5Njk1OTYsImV4cCI6MjA3MTU0NTU5Nn0.ItDXVqjGSI-DaRCCbTCiWbopMnhXLGQiA3DMgBEzS4s",s=n.env.SUPABASE_SERVICE_ROLE_KEY;if(!a)throw Error("Missing NEXT_PUBLIC_SUPABASE_URL environment variable");if(!i)throw Error("Missing NEXT_PUBLIC_SUPABASE_ANON_KEY environment variable");let l=(0,o.eI)(a,i);s?(0,o.eI)(a,s,{auth:{autoRefreshToken:!1,persistSession:!1}}):(console.warn("SUPABASE_SERVICE_ROLE_KEY not found, some admin operations may not work"),(0,o.eI)(a,i))},39311:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var o=r(57042),n=r(74769);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,o.W)(t))}},58960:function(e){!function(){var t={229:function(e){var t,r,o,n=e.exports={};function a(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var l=[],c=!1,u=-1;function d(){c&&o&&(c=!1,o.length?l=o.concat(l):u=-1,l.length&&f())}function f(){if(!c){var e=s(d);c=!0;for(var t=l.length;t;){for(o=l,l=[];++u<t;)o&&o[u].run();u=-1,t=l.length}o=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new p(e,t)),1!==l.length||c||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=m,n.addListener=m,n.once=m,n.off=m,n.removeListener=m,n.removeAllListeners=m,n.emit=m,n.prependListener=m,n.prependOnceListener=m,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var a=r[e]={exports:{}},i=!0;try{t[e](a,a.exports,o),i=!1}finally{i&&delete r[e]}return a.exports}o.ab="//";var n=o(229);e.exports=n}()},30622:function(e,t,r){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o=r(2265),n=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var o,a={},c=null,u=null;for(o in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,o)&&!l.hasOwnProperty(o)&&(a[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===a[o]&&(a[o]=t[o]);return{$$typeof:n,type:e,key:c,ref:u,props:a,_owner:s.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},57437:function(e,t,r){"use strict";e.exports=r(30622)}},function(e){e.O(0,[492,440,691,971,864,744],function(){return e(e.s=24715)}),_N_E=e.O()}]);